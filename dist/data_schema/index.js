import{registerMvuSchema as r}from'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';const t=z,e=(r,e,a)=>t.z.coerce.number().prefault(r).transform(r=>_.clamp(r,e,a)),a=(r,t)=>_.fromPairs(_.take(_.toPairs(r),t)),u=t.z.object({简介:t.z.string().prefault(''),目标:t.z.string().prefault(''),奖励:t.z.string().prefault('')}).prefault({}),n=t.z.object({品质:t.z.string().prefault(''),类型:t.z.string().prefault(''),标签:t.z.array(t.z.string()).prefault([]).transform(r=>_.uniq(r)).optional(),效果:t.z.record(t.z.string(),t.z.string()).prefault({}),描述:t.z.string().prefault('')}),f=n.extend({位置:t.z.string().prefault('')}),p=n.extend({消耗:t.z.string().prefault('')}).transform(r=>_.pick(r,['品质','类型','消耗','标签','效果','描述'])),l=t.z.object({类型:t.z.enum(['增益','减益','特殊']).prefault('增益'),效果:t.z.string().prefault(''),层数:t.z.coerce.number().prefault(1),剩余时间:t.z.string().prefault(''),来源:t.z.string().prefault('')}).prefault({}),s=n.extend({数量:t.z.coerce.number().prefault(1)}).transform(r=>_.pick(r,['品质','类型','数量','标签','效果','描述'])),i=t.z.object(_.mapValues({力量:0,敏捷:0,体质:0,智力:0,精神:0},()=>t.z.coerce.number().prefault(0))).prefault({}),o=t.z.object({是否开启:t.z.boolean().prefault(!1),要素:t.z.record(t.z.string(),t.z.record(t.z.string(),t.z.string())).prefault({}),权能:t.z.record(t.z.string(),t.z.record(t.z.string(),t.z.string())).prefault({}),法则:t.z.record(t.z.string(),t.z.record(t.z.string(),t.z.string())).prefault({}),神位:t.z.string().prefault(''),神国:t.z.object({名称:t.z.string().prefault(''),描述:t.z.string().prefault('')}).prefault({})}).prefault({}).transform(r=>{const t=_.size(r.法则),e=_.size(r.权能);return t>0?{...r,要素:{},权能:{},法则:r.神位?r.法则:a(r.法则,1)}:e>=2?{...r,要素:{},权能:a(r.权能,2),法则:a(r.法则,1)}:{...r,要素:a(r.要素,3),权能:a(r.权能,2),法则:{}}}),c=t.z.object({等级:e(1,1,25),生命层级:t.z.string().prefault(''),种族:t.z.string().prefault(''),身份:t.z.array(t.z.string()).prefault([]).transform(r=>_.uniq(r)),职业:t.z.array(t.z.string()).prefault([]).transform(r=>_.uniq(r)),属性:i,装备:t.z.record(t.z.string(),f).prefault({}),技能:t.z.record(t.z.string(),p).prefault({}),登神长阶:o}),g=t.z.object({...c.shape,累计经验值:t.z.coerce.number().prefault(0),升级所需经验:t.z.union([t.z.coerce.number().prefault(120),t.z.literal('MAX')]),冒险者等级:t.z.string().prefault('未评级'),生命值:t.z.coerce.number().prefault(0),生命值上限:t.z.coerce.number().prefault(0),法力值:t.z.coerce.number().prefault(0),法力值上限:t.z.coerce.number().prefault(0),体力值:t.z.coerce.number().prefault(0),体力值上限:t.z.coerce.number().prefault(0),属性点:t.z.coerce.number().prefault(0),背包:t.z.record(t.z.string(),s).prefault({}).transform(r=>_.pickBy(r,r=>r.数量>0)),金钱:t.z.coerce.number().prefault(0).transform(Math.round),状态效果:t.z.record(t.z.string(),l).prefault({})}).prefault({}).transform(r=>{const t={...r,升级所需经验:r.等级>=25?'MAX':r.升级所需经验,生命值:_.clamp(r.生命值,0,r.生命值上限),法力值:_.clamp(r.法力值,0,r.法力值上限),体力值:_.clamp(r.体力值,0,r.体力值上限)};return _.pick(t,['种族','身份','职业','生命层级','等级','累计经验值','升级所需经验','冒险者等级','属性点','属性','生命值上限','生命值','法力值上限','法力值','体力值上限','体力值','状态效果','金钱','背包','装备','技能','登神长阶'])}),m=t.z.record(t.z.string(),t.z.object({...c.shape,是否在场:t.z.boolean().prefault(!1),性格:t.z.string().prefault(''),喜爱:t.z.string().prefault(''),外貌:t.z.string().prefault(''),着装:t.z.string().prefault(''),是否缔结契约:t.z.boolean().prefault(!1),好感度:e(0,-100,100),心里话:t.z.string().prefault(''),背景故事:t.z.string().prefault('')}).prefault({}).transform(r=>_.pick(r,['是否在场','种族','身份','职业','生命层级','性格','喜爱','外貌','着装','等级','属性','装备','技能','登神长阶','是否缔结契约','好感度','心里话','背景故事']))).prefault({}),b=t.z.object({阿斯塔利亚快讯:t.z.object({势力要闻:t.z.string().prefault(''),尊位行迹:t.z.string().prefault(''),军事行动:t.z.string().prefault(''),经济动脉:t.z.string().prefault(''),灾害预警:t.z.string().prefault('')}).prefault({}),酒馆留言板:t.z.object({高额悬赏:t.z.string().prefault(''),冒险发现:t.z.string().prefault(''),怪物异动:t.z.string().prefault(''),通缉要犯:t.z.string().prefault(''),宝物传闻:t.z.string().prefault('')}).prefault({}),午后茶会:t.z.object({社交逸闻:t.z.string().prefault(''),千里远望:t.z.string().prefault(''),命运涟漪:t.z.string().prefault(''),邂逅预兆:t.z.string().prefault('')}).prefault({})}),d=t.z.object({事件:t.z.record(t.z.any(),t.z.any()).prefault({}),世界:t.z.object({时间:t.z.string().prefault(''),地点:t.z.string().prefault('')}).prefault({}),任务列表:t.z.record(t.z.string(),u).prefault({}),主角:g.prefault({}),命定系统:t.z.object({命运点数:(j=0,h=0,t.z.coerce.number().prefault(j).transform(r=>Math.max(Math.round(r),h))),命定之人:m}).prefault({}),新闻:b.prefault({})});var j,h;$(()=>{r(d)});