<head><script type="module">import{createPinia as e,defineStore as t,storeToRefs as a}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{default as l}from'https://testingcf.jsdelivr.net/npm/json5/+esm';import{klona as o}from'https://testingcf.jsdelivr.net/npm/klona/+esm';var n={665(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,l]of t)a[e]=l;return a}}},r={};const c=Vue,s={class:'creator-app'};var i=function e(t){var a=r[t];if(void 0!==a)return a.exports;var l=r[t]={exports:{}};return n[t](l,l.exports,e),l.exports}(665);const d={},m=(0,i.A)(d,[['render',function(e,t){const a=(0,c.resolveComponent)('RouterView');return(0,c.openBlock)(),(0,c.createElementBlock)('div',s,[(0,c.createVNode)(a)])}],['__scopeId','data-v-15ec88ba']]),u=VueRouter,p=[{value:'common',label:'普通',color:'#9e9e9e'},{value:'uncommon',label:'优秀',color:'#4caf50'},{value:'rare',label:'稀有',color:'#2196f3'},{value:'epic',label:'史诗',color:'#9c27b0'},{value:'legendary',label:'传说',color:'#ff9800'},{value:'mythic',label:'神话',color:'#e91e63'},{value:'only',label:'唯一',color:'#ff0000'}],v=[{label:'武器',value:'武器'},{label:'防具',value:'防具'},{label:'饰品',value:'饰品'}],f=[{label:'主动',value:'主动'},{label:'被动',value:'被动'}],V=[{value:'equipment',label:'装备'},{value:'item',label:'道具'},{value:'skill',label:'技能'}],k=e=>p.find(t=>t.value===e)?.label||'普通',N=e=>p.find(t=>t.value===e)?.color||'#9e9e9e';async function y(e,t){try{const a=await fetch(`https://testingcf.jsdelivr.net/gh/The-poem-of-destiny/FrontEnd-for-destined-journey@1.5.15/public/assets/data/${e}`);if(!a.ok)return console.log(`未找到自定义数据文件 (${e})`),{};const o=await a.text(),n=l.parse(o);return console.log(`成功加载自定义${t}数据`),n}catch(e){return console.log(`未找到自定义${t}数据或格式错误:`,e),{}}}function E(e,t){return _.mergeWith({},e,t,(e,t)=>{if(_.isArray(e))return[...e,...t]})}const g=(0,c.ref)({});(async function(){return y('baseInfo.json','基础信息')})().then(e=>{g.value=e});const b=(0,c.computed)(()=>[...(g.value.genders||[]).filter(e=>'自定义'!==e),'自定义']),h=(0,c.computed)(()=>({...g.value.raceCosts||{},自定义:80})),B=(0,c.computed)(()=>({...g.value.identityCosts||{},自定义:80})),C=((0,c.computed)(()=>[...(g.value.startLocations||[]).filter(e=>'自定义'!==e),'自定义']),(0,c.computed)(()=>{const e=((e,t='-')=>{const a=[],l=new Map,o=new Set(e),n=new Set;for(const a of e){const e=a.split(t);let l='';for(let a=0;a<e.length-1;a++){const r=e[a].trim();l=l?`${l}${t}${r}`:r,o.has(l)&&n.add(l)}}for(const o of e){const e=o.split(t);let r='',c=a;for(let a=0;a<e.length;a++){const o=e[a].trim();r=r?`${r}${t}${o}`:o;let s=l.get(r);if(!s&&(s={label:o,value:r,children:[]},l.set(r,s),c.push(s),n.has(r))){const e={label:`${o}（本地区）`,value:r};s.children.unshift(e)}c=s.children}}const r=e=>{for(const t of e)t.children&&0===t.children.length?delete t.children:t.children&&r(t.children)};return r(a),a})((g.value.startLocations||[]).filter(e=>'自定义'!==e));return e.push({label:'自定义',value:'自定义'}),e})),x=['力量','敏捷','体质','智力','精神'],w=e=>e>=1&&e<=4?0:e>=5&&e<=8?1:e>=9&&e<=12?2:e>=13&&e<=16?3:e>=17&&e<=20?4:e>=21&&e<=24?5:e>=25?6:0,S=e=>e>=1&&e<=4?'第一层级':e>=5&&e<=8?'第二层级':e>=9&&e<=12?'第三层级':e>=13&&e<=16?'第四层级':e>=17&&e<=20?'第五层级':e>=21&&e<=24?'第六层级':e>=25?'第七层级':'未知层级',D={};let P=null;function F(){return P||D}!async function(){const e=await async function(){return y('skills.json','技能')}();P=E(D,e)}();const I=()=>_.find(_.keys(B.value),e=>_.includes(e,'平民'))||'',L=t('character',()=>{const e=(0,c.ref)({name:'',gender:'男',customGender:'',age:18,race:'人类',customRace:'',identity:I(),customIdentity:'',startLocation:'大陆东南部区域-索伦蒂斯王国',customStartLocation:'',level:1,basePoints:{力量:0,敏捷:0,体质:0,智力:0,精神:0},attributePoints:{力量:0,敏捷:0,体质:0,智力:0,精神:0},reincarnationPoints:1e3,destinyPoints:0,money:0}),t=(0,c.ref)([]),a=(0,c.ref)([]),l=(0,c.ref)([]),o=(0,c.ref)([]),n=(0,c.ref)(null),r=(0,c.computed)(()=>_.sum([_.get(h.value,e.value.race,0),_.get(B.value,e.value.identity,0),m.value,_.sumBy(t.value,'cost'),_.sumBy(a.value,'cost'),_.sumBy(l.value,'cost'),_.sumBy(o.value,'cost'),Math.ceil(e.value.money/100),Math.ceil(e.value.destinyPoints/2)])),s=(0,c.computed)(()=>_.sum(_.values(e.value.basePoints))),i=(0,c.computed)(()=>25),d=(0,c.computed)(()=>i.value-s.value),m=(0,c.computed)(()=>_.sum(_.values(e.value.attributePoints))),u=(0,c.computed)(()=>{return t=e.value.level,Math.max(0,t-1);var t}),p=(0,c.computed)(()=>u.value-m.value),v=(0,c.computed)(()=>{const t=w(e.value.level);return _.fromPairs(_.map(x,a=>[a,e.value.basePoints[a]+t+e.value.attributePoints[a]]))});return(0,c.watch)(()=>e.value.level,()=>{e.value.attributePoints={力量:0,敏捷:0,体质:0,智力:0,精神:0}},{flush:'sync'}),(0,c.watch)(()=>[e.value.race,e.value.customRace],()=>{const t='自定义'===e.value.race?e.value.customRace:e.value.race,a=_.without(_.keys(h.value),'自定义'),o=F();_.remove(l.value,e=>{const l=(n=e.name,_.findKey(o,e=>_.some(e,e=>e.name===n))||'');var n;return _.includes(a,l)&&l!==t})},{deep:!0}),(0,c.watch)(B,t=>{e.value.identity||_.isEmpty(t)||(e.value.identity=I())},{immediate:!0}),{character:e,consumedPoints:r,selectedEquipments:t,selectedItems:a,selectedSkills:l,selectedPartners:o,selectedBackground:n,usedBP:s,maxBP:i,remainingBP:d,usedAP:m,maxAP:u,remainingAP:p,finalAttributes:v,updateCharacterField:(t,a)=>{e.value[t]=a},updateAttribute:(t,a)=>{e.value.attributePoints[t]=Math.max(0,a)},addBasePoint:t=>{d.value>0&&e.value.basePoints[t]<6&&e.value.basePoints[t]++},removeBasePoint:t=>{e.value.basePoints[t]>0&&e.value.basePoints[t]--},addAttributePoint:t=>{p.value>0&&e.value.attributePoints[t]++},removeAttributePoint:t=>{e.value.attributePoints[t]>0&&e.value.attributePoints[t]--},rollInitialPoints:()=>{const t=(e=>{if(e&&(e=>{const t=e.toLowerCase();return['[dev]','[test]'].some(e=>t.includes(e))})(e))return 888888;const t=Math.random(),a=Math.pow(t,3),l=Math.floor(1e3+9001*a);return Math.min(l,1e4)})(e.value.name);return e.value.reincarnationPoints=t,t},resetCharacter:()=>{e.value={name:'',gender:'男',customGender:'',age:18,race:'人类',customRace:'',identity:I(),customIdentity:'',startLocation:'大陆东南部区域-索伦蒂斯王国',customStartLocation:'',level:1,basePoints:{力量:0,敏捷:0,体质:0,智力:0,精神:0},attributePoints:{力量:0,敏捷:0,体质:0,智力:0,精神:0},reincarnationPoints:1e3,destinyPoints:0,money:0}},addEquipment:e=>{t.value.push(e)},removeEquipment:e=>{_.remove(t.value,t=>t.name===e.name)},replaceEquipmentByName:(e,a)=>{_.remove(t.value,e=>e.name===a),t.value.push(e)},addItem:e=>{a.value.push(e)},removeItem:e=>{_.remove(a.value,t=>t.name===e.name)},replaceItemByName:(e,t)=>{_.remove(a.value,e=>e.name===t),a.value.push(e)},addSkill:e=>{l.value.push(e)},removeSkill:e=>{_.remove(l.value,t=>t.name===e.name)},replaceSkillByName:(e,t)=>{_.remove(l.value,e=>e.name===t),l.value.push(e)},clearSelections:()=>{t.value=[],a.value=[],l.value=[]},clearPartners:()=>{o.value=[]},clearAllSelections:()=>{t.value=[],a.value=[],l.value=[],o.value=[],n.value=null},addPartner:e=>{o.value.push(e)},removePartner:e=>{_.remove(o.value,t=>t.name===e.name)},replacePartnerByName:(e,t)=>{_.remove(o.value,e=>e.name===t),o.value.push(e)},setBackground:e=>{n.value=e},resetDestinyExchange:()=>{e.value.destinyPoints=0}}}),q=t('customContent',()=>{const e=(0,c.ref)(''),t=(0,c.ref)(''),a=(0,c.ref)(''),l=(0,c.ref)({categoryType:'equipment',customItemType:'',itemName:'',itemRarity:'common',itemTag:[],itemEffect:{},itemDescription:'',itemConsume:'',itemQuantity:1}),n=()=>{l.value={categoryType:'equipment',customItemType:'',itemName:'',itemRarity:'common',itemTag:[],itemEffect:{},itemDescription:'',itemConsume:'',itemQuantity:1},t.value=''},r={strength:5,dexterity:5,constitution:5,intelligence:5,mind:5},s=(0,c.ref)({itemName:'',itemLevel:1,itemLifeLevel:'',itemGrade:1,itemRace:'',itemIdentity:[],itemCareer:[],itemPersonality:'',itemLike:'',itemApp:'',itemCloth:'',itemEquip:[],itemAttributes:{...r},itemStairway:'',itemIsContract:!0,itemAffinity:0,itemComment:'',itemBackgroundInfo:'',itemSkills:[]}),i=()=>{s.value={itemName:'',itemLevel:1,itemLifeLevel:'',itemGrade:1,itemRace:'',itemIdentity:[],itemCareer:[],itemPersonality:'',itemLike:'',itemApp:'',itemCloth:'',itemEquip:[],itemAttributes:o(r),itemStairway:'',itemIsContract:!0,itemAffinity:0,itemComment:'',itemBackgroundInfo:'',itemSkills:[]},a.value=''};return{customBackgroundDescription:e,updateCustomBackgroundDescription:t=>{e.value=t},editingCustomItemName:t,updateEditingCustomItemName:e=>{t.value=e},editingCustomPartnerName:a,updateEditingCustomPartnerName:e=>{a.value=e},customItemForm:l,updateCustomItemForm:(e,t)=>{l.value[e]=t},setCustomItemForm:e=>{l.value={...l.value,...e}},resetCustomItemForm:n,customPartnerForm:s,updateCustomPartnerForm:(e,t)=>{s.value[e]=t},setCustomPartnerForm:e=>{s.value={...s.value,...e}},resetCustomPartnerForm:i,resetAll:()=>{e.value='',n(),i(),t.value='',a.value=''}}}),T='start_presets';function A(){try{const e=getVariables({type:'character'}),t=_.get(e,T);if(t&&_.isArray(t.presets))return t}catch(e){console.warn('读取预设存储失败，返回空存储:',e)}return{presets:[]}}function M(e){try{insertOrAssignVariables({[T]:e},{type:'character'}),console.log('✅ 预设存储已保存到角色卡变量')}catch(e){throw console.error('保存预设存储失败:',e),e}}function U(){const e=A();return _.orderBy(e.presets,['updatedAt'],['desc'])}function R(e){const t=A();return _.some(t.presets,{name:e})}function j(e,t=!1){const a=A(),l=_.findIndex(a.presets,{name:e.name});if(-1!==l){if(!t)return toastr.warning(`预设「${e.name}」已存在`),!1;a.presets[l]={...e,updatedAt:Date.now()},toastr.success(`预设「${e.name}」已更新`)}else a.presets.push({...e,createdAt:Date.now(),updatedAt:Date.now()}),toastr.success(`预设「${e.name}」已保存`);return a.lastUsedPreset=e.name,M(a),!0}const G=['name','gender','customGender','age','race','customRace','identity','customIdentity','startLocation','customStartLocation','level','basePoints','attributePoints','reincarnationPoints','destinyPoints','money'],O={力量:0,敏捷:0,体质:0,智力:0,精神:0},K=['力量','敏捷','体质','智力','精神'];function H(e,t){t.resetCharacter(),t.clearAllSelections();const a=function(e){if(!('basePoints'in e)){const t=e.attributePoints;if(t){let a=5;const l={...t};for(const e of K){if(a<=0)break;const t=Math.min(l[e]||0,1);l[e]=(l[e]||0)-t,a-=t}for(const e of K){if(a<=0)break;const t=Math.min(l[e]||0,a);l[e]=(l[e]||0)-t,a-=t}return{...e,attributePoints:l,basePoints:{...O}}}return{...e,basePoints:{...O}}}return e}(e.character);_.forEach(G,e=>{_.has(a,e)&&t.updateCharacterField(e,_.get(a,e))}),_.forEach(e.equipments,e=>t.addEquipment(e)),_.forEach(e.items,e=>t.addItem(e)),_.forEach(e.skills,e=>t.addSkill(e)),_.forEach(e.partners,e=>t.addPartner(e)),t.setBackground(e.background),toastr.success(`已加载预设「${e.name}」`)}function J(e){return new Date(e).toLocaleString('zh-CN',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'})}const Q=['createdAt','updatedAt'];function W(e){const t=U(),a=_.find(t,t=>function(e,t){const a=_.omit(t.character,Q),l=_.omit(e.character,Q);return _.every([_.isEqual(a,l),_.isEqual(t.selectedEquipments,e.equipments),_.isEqual(t.selectedItems,e.items),_.isEqual(t.selectedSkills,e.skills),_.isEqual(t.selectedPartners,e.partners),_.isEqual(t.selectedBackground,e.background)])}(t,e));return a?.name??null}function X(e,t){const a=new Blob([e],{type:'application/json;charset=utf-8'}),l=URL.createObjectURL(a),o=document.createElement('a');o.href=l,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(l)}function Y(e,t){const a={imported:0,skipped:0,overwritten:0,renamed:0};_.forEach(e,e=>{j({...e,createdAt:e.createdAt||Date.now(),updatedAt:Date.now()},!1),a.imported++}),_.forEach(t,({preset:e,resolution:t})=>{switch(t){case'overwrite':j({...e,updatedAt:Date.now()},!0),a.overwritten++;break;case'rename':{const t=function(e){let t=1,a=`${e} (${t})`;for(;R(a);)t++,a=`${e} (${t})`;return a}(e.name);j({...e,name:t,createdAt:Date.now(),updatedAt:Date.now()},!1),a.renamed++;break}case'skip':a.skipped++}});const l=[],o=a.imported+a.overwritten+a.renamed;return o>0&&l.push(`成功导入 ${o} 个预设`),a.overwritten>0&&l.push(`覆盖 ${a.overwritten} 个`),a.renamed>0&&l.push(`重命名 ${a.renamed} 个`),a.skipped>0&&l.push(`跳过 ${a.skipped} 个`),o>0?toastr.success(l.join('，')):a.skipped>0&&toastr.info(`已跳过所有 ${a.skipped} 个冲突预设`),a}const Z=()=>{(0,c.nextTick)(()=>{const e=window.frameElement;e&&e.scrollIntoView({behavior:'smooth',block:'center'})})},ee={class:'modal-container'},te={class:'modal-header'},ae={class:'modal-title'},le={class:'modal-content'},oe={key:0,class:'save-section'},ne={class:'save-row'},re={key:1,class:'import-section'},ce={class:'list-section'},se={class:'list-header'},ie={key:0,class:'empty-state'},de={key:0,class:'hint'},me={key:1,class:'preset-list'},ue={class:'preset-main'},pe={class:'preset-info'},ve={class:'preset-name'},fe={class:'preset-time'},Ve={class:'preset-meta'},ke={class:'meta-item'},Ne={class:'meta-item'},ye={class:'meta-item'},Ee={class:'meta-item'},ge={class:'meta-item'},be={class:'preset-actions'},he=['onClick'],Be=['onClick'],Ce=['onClick'],xe=['onClick'],we={class:'modal-container conflict-container'},Se={class:'modal-content'},De={class:'conflict-description'},_e={class:'conflict-list'},Pe={class:'conflict-info'},Fe={class:'conflict-name'},Ie={class:'conflict-detail'},$e={class:'conflict-options'},Le={class:'conflict-option'},qe=['name','checked','onChange'],Te={class:'conflict-option'},Ae=['name','checked','onChange'],Me={class:'conflict-option'},Ue=['name','checked','onChange'],Re={key:0,class:'no-conflict-hint'},ze=(0,c.defineComponent)({__name:'PresetModal',props:{visible:{type:Boolean},mode:{}},emits:['close','loaded','saved'],setup(e,{emit:t}){const a=e,l=t,n=L(),r=q(),s=(0,c.ref)([]),i=(0,c.ref)(''),d=(0,c.ref)(null),m=()=>{s.value=U()};(0,c.watch)(()=>a.visible,e=>{e&&(m(),i.value='',d.value=null,Z())}),(0,c.onMounted)(()=>{a.visible&&(m(),Z())});const u=()=>{const e=i.value.trim();if(!e)return void toastr.warning('请输入预设名称');const t=function(e,t){const a=Date.now();return{name:e,createdAt:a,updatedAt:a,character:o(t.character),equipments:o(t.selectedEquipments),items:o(t.selectedItems),skills:o(t.selectedSkills),partners:o(t.selectedPartners),background:o(t.selectedBackground)}}(e,n);R(e)?(d.value=null,p.value===e?(j(t,!0),i.value='',p.value=null,m(),l('saved',t)):(p.value=e,toastr.info(`预设「${e}」已存在，再次点击保存确认覆盖`))):(j(t,!1),i.value='',m(),l('saved',t))},p=(0,c.ref)(null),v=e=>{d.value===e?(!function(e){const t=A(),a=_.remove(t.presets,{name:e});_.isEmpty(a)?toastr.error(`预设「${e}」不存在`):(t.lastUsedPreset===e&&(t.lastUsedPreset=void 0),M(t),toastr.info(`预设「${e}」已删除`))}(e),d.value=null,m()):(d.value=e,p.value=null)},f=()=>{d.value=null},V=()=>{l('close')},k=(0,c.computed)(()=>'load'===a.mode?'加载预设':'预设管理'),N=(0,c.computed)(()=>'load'!==a.mode),y=e=>{!function(e){const t={version:1,type:'single',exportedAt:Date.now(),presets:[o(e)]};X(JSON.stringify(t,null,2),`${e.name}.preset.json`),toastr.success(`预设「${e.name}」已导出`)}(e)},E=()=>{!function(){const e=U();if(_.isEmpty(e))return void toastr.warning('没有可导出的预设');const t={version:1,type:'batch',exportedAt:Date.now(),presets:o(e)};X(JSON.stringify(t,null,2),`所有预设_${(new Date).toISOString().slice(0,10)}.presets.json`),toastr.success(`已导出 ${e.length} 个预设`)}()},g=(0,c.ref)(!1),b=(0,c.ref)([]),h=(0,c.ref)([]),B=async()=>{try{const e=await new Promise((e,t)=>{const a=document.createElement('input');a.type='file',a.accept='.json',a.style.display='none',a.addEventListener('change',()=>{const l=a.files?.[0];if(!l)return void t(new Error('未选择文件'));const o=new FileReader;o.onload=()=>e(o.result),o.onerror=()=>t(new Error('文件读取失败')),o.readAsText(l)}),a.addEventListener('cancel',()=>{t(new Error('用户取消'))}),document.body.appendChild(a),a.click(),document.body.removeChild(a)});let t;try{t=JSON.parse(e)}catch{return void toastr.error('导入失败：文件不是有效的 JSON 格式')}const a=function(e){if(!_.isPlainObject(e))return toastr.error('导入失败：文件格式不正确'),null;const t=e;if(!_.has(t,'version')||!_.has(t,'presets'))return toastr.error('导入失败：缺少必要字段（version/presets）'),null;if(!_.isArray(t.presets))return toastr.error('导入失败：presets 字段格式不正确'),null;const a=t.presets,l=['name','character'];for(const e of a){const t=_.filter(l,t=>!_.has(e,t));if(!_.isEmpty(t))return toastr.error(`导入失败：预设缺少必要字段（${t.join(', ')}）`),null}return{version:t.version,type:t.type||'single',exportedAt:t.exportedAt||Date.now(),presets:a}}(t);if(!a)return;if(_.isEmpty(a.presets))return void toastr.warning('导入文件中没有预设数据');const{conflicts:l,noConflicts:o}=function(e){const t=[],a=[];return _.forEach(e,e=>{R(e.name)?t.push({preset:e,resolution:'overwrite'}):a.push(e)}),{conflicts:t,noConflicts:a}}(a.presets);_.isEmpty(l)?(Y(o,[]),m()):(b.value=l,h.value=o,g.value=!0)}catch(e){if(e instanceof Error&&'用户取消'===e.message)return;console.error('导入预设失败:',e),toastr.error('导入预设失败')}},C=(e,t)=>{b.value[e].resolution=t},x=()=>{_.forEach(b.value,e=>{e.resolution='overwrite'})},w=()=>{_.forEach(b.value,e=>{e.resolution='skip'})},S=()=>{_.forEach(b.value,e=>{e.resolution='rename'})},D=()=>{Y(h.value,b.value),g.value=!1,b.value=[],h.value=[],m()},P=()=>{g.value=!1,b.value=[],h.value=[]};return(t,a)=>((0,c.openBlock)(),(0,c.createBlock)(c.Teleport,{to:'body'},[e.visible?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:0,class:'modal-overlay',onClick:(0,c.withModifiers)(V,['self'])},[(0,c.createElementVNode)('div',ee,[(0,c.createCommentVNode)(' 标题栏 '),(0,c.createElementVNode)('div',te,[(0,c.createElementVNode)('h2',ae,(0,c.toDisplayString)(k.value),1),(0,c.createElementVNode)('button',{class:'close-button',title:'关闭',onClick:V},'✕')]),(0,c.createCommentVNode)(' 内容区域 '),(0,c.createElementVNode)('div',le,[(0,c.createCommentVNode)(' 保存新预设区域 '),N.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',oe,[a[1]||(a[1]=(0,c.createElementVNode)('h3',{class:'section-title'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-floppy-disk'}),(0,c.createTextVNode)(' 保存当前配置')],-1)),(0,c.createElementVNode)('div',ne,[(0,c.withDirectives)((0,c.createElementVNode)('input',{'onUpdate:modelValue':a[0]||(a[0]=e=>i.value=e),type:'text',class:'preset-input',placeholder:'输入预设名称...',onKeyup:(0,c.withKeys)(u,['enter'])},null,544),[[c.vModelText,i.value]]),(0,c.createElementVNode)('button',{class:(0,c.normalizeClass)(['action-button save-button',{confirm:p.value===i.value.trim()}]),onClick:u},[(0,c.createElementVNode)('i',{class:(0,c.normalizeClass)(['fa-solid',p.value===i.value.trim()?'fa-check':'fa-save'])},null,2),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(p.value===i.value.trim()?'确认覆盖':'保存预设'),1)],2)])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 导入预设区域 '),N.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',re,[a[4]||(a[4]=(0,c.createElementVNode)('h3',{class:'section-title'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-file-import'}),(0,c.createTextVNode)(' 导入预设')],-1)),(0,c.createElementVNode)('div',{class:'import-row'},[(0,c.createElementVNode)('button',{class:'action-button import-button',onClick:B},[...a[2]||(a[2]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-upload'},null,-1),(0,c.createTextVNode)(' 导入预设文件 ',-1)])]),a[3]||(a[3]=(0,c.createElementVNode)('span',{class:'import-hint'},'支持 .json 格式的预设文件',-1))])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 预设列表 '),(0,c.createElementVNode)('div',ce,[(0,c.createElementVNode)('div',se,[a[6]||(a[6]=(0,c.createElementVNode)('h3',{class:'section-title'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-list'}),(0,c.createTextVNode)(' 已保存的预设')],-1)),s.value.length>0&&N.value?((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:0,class:'action-button export-all-button',onClick:E},[...a[5]||(a[5]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-file-export'},null,-1),(0,c.createTextVNode)(' 全部导出 ',-1)])])):(0,c.createCommentVNode)('v-if',!0)]),0===s.value.length?((0,c.openBlock)(),(0,c.createElementBlock)('div',ie,[a[7]||(a[7]=(0,c.createElementVNode)('i',{class:'fa-solid fa-inbox empty-icon'},null,-1)),a[8]||(a[8]=(0,c.createElementVNode)('p',null,'暂无保存的预设',-1)),N.value?((0,c.openBlock)(),(0,c.createElementBlock)('p',de,'在上方输入名称保存当前配置')):(0,c.createCommentVNode)('v-if',!0)])):((0,c.openBlock)(),(0,c.createElementBlock)('div',me,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(s.value,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:(0,c.normalizeClass)(['preset-item',{'delete-pending':d.value===e.name}])},[(0,c.createElementVNode)('div',ue,[(0,c.createElementVNode)('div',pe,[(0,c.createElementVNode)('span',ve,(0,c.toDisplayString)(e.name),1),(0,c.createElementVNode)('span',fe,(0,c.toDisplayString)((0,c.unref)(J)(e.updatedAt)),1)]),(0,c.createElementVNode)('div',Ve,[(0,c.createElementVNode)('span',ke,[a[9]||(a[9]=(0,c.createElementVNode)('i',{class:'fa-solid fa-user'},null,-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(e.character.name||'未命名'),1)]),(0,c.createElementVNode)('span',Ne,[a[10]||(a[10]=(0,c.createElementVNode)('i',{class:'fa-solid fa-star'},null,-1)),(0,c.createTextVNode)(' Lv.'+(0,c.toDisplayString)(e.character.level),1)]),(0,c.createElementVNode)('span',ye,[a[11]||(a[11]=(0,c.createElementVNode)('i',{class:'fa-solid fa-shield'},null,-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(e.equipments.length),1)]),(0,c.createElementVNode)('span',Ee,[a[12]||(a[12]=(0,c.createElementVNode)('i',{class:'fa-solid fa-wand-sparkles'},null,-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(e.skills.length),1)]),(0,c.createElementVNode)('span',ge,[a[13]||(a[13]=(0,c.createElementVNode)('i',{class:'fa-solid fa-heart'},null,-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(e.partners.length),1)])])]),(0,c.createElementVNode)('div',be,[d.value===e.name?((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:0},[(0,c.createElementVNode)('button',{class:'action-button confirm-delete',onClick:t=>v(e.name)},[...a[14]||(a[14]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-check'},null,-1),(0,c.createTextVNode)(' 确认删除 ',-1)])],8,he),(0,c.createElementVNode)('button',{class:'action-button cancel-button',onClick:f},[...a[15]||(a[15]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark'},null,-1),(0,c.createTextVNode)(' 取消 ',-1)])])],64)):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createElementVNode)('button',{class:'action-button load-button',onClick:t=>(e=>{H(e,n);const t='【自定义开局】'===e.background?.name?e.background?.description??'':'';r.updateCustomBackgroundDescription(t),l('loaded',e),l('close')})(e)},[...a[16]||(a[16]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-download'},null,-1),(0,c.createTextVNode)(' 加载 ',-1)])],8,Be),N.value?((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:0,class:'action-button export-button',onClick:t=>y(e)},[...a[17]||(a[17]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-file-export'},null,-1),(0,c.createTextVNode)(' 导出 ',-1)])],8,Ce)):(0,c.createCommentVNode)('v-if',!0),N.value?((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:1,class:'action-button delete-button',onClick:t=>v(e.name)},[...a[18]||(a[18]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-trash'},null,-1),(0,c.createTextVNode)(' 删除 ',-1)])],8,xe)):(0,c.createCommentVNode)('v-if',!0)],64))])],2))),128))]))])]),(0,c.createCommentVNode)(' 底部按钮 '),(0,c.createElementVNode)('div',{class:'modal-footer'},[(0,c.createElementVNode)('button',{class:'footer-button',onClick:V},'关闭')])])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 导入冲突处理弹窗 '),g.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:1,class:'modal-overlay conflict-overlay',onClick:(0,c.withModifiers)(P,['self'])},[(0,c.createElementVNode)('div',we,[(0,c.createElementVNode)('div',{class:'modal-header'},[a[19]||(a[19]=(0,c.createElementVNode)('h2',{class:'modal-title'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-triangle-exclamation'}),(0,c.createTextVNode)(' 导入冲突')],-1)),(0,c.createElementVNode)('button',{class:'close-button',title:'关闭',onClick:P},'✕')]),(0,c.createElementVNode)('div',Se,[(0,c.createElementVNode)('p',De,' 以下 '+(0,c.toDisplayString)(b.value.length)+' 个预设与现有预设名称冲突，请选择处理方式： ',1),(0,c.createCommentVNode)(' 批量操作 '),(0,c.createElementVNode)('div',{class:'batch-actions'},[(0,c.createElementVNode)('button',{class:'action-button batch-button',onClick:x},[...a[20]||(a[20]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-arrows-rotate'},null,-1),(0,c.createTextVNode)(' 全部覆盖 ',-1)])]),(0,c.createElementVNode)('button',{class:'action-button batch-button',onClick:S},[...a[21]||(a[21]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-pen'},null,-1),(0,c.createTextVNode)(' 全部重命名 ',-1)])]),(0,c.createElementVNode)('button',{class:'action-button batch-button',onClick:w},[...a[22]||(a[22]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-forward'},null,-1),(0,c.createTextVNode)(' 全部跳过 ',-1)])])]),(0,c.createCommentVNode)(' 冲突列表 '),(0,c.createElementVNode)('div',_e,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(b.value,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.preset.name,class:'conflict-item'},[(0,c.createElementVNode)('div',Pe,[(0,c.createElementVNode)('span',Fe,(0,c.toDisplayString)(e.preset.name),1),(0,c.createElementVNode)('span',Ie,[a[23]||(a[23]=(0,c.createElementVNode)('i',{class:'fa-solid fa-user'},null,-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(e.preset.character.name||'未命名')+' · Lv.'+(0,c.toDisplayString)(e.preset.character.level),1)])]),(0,c.createElementVNode)('div',$e,[(0,c.createElementVNode)('label',Le,[(0,c.createElementVNode)('input',{type:'radio',name:`conflict-${t}`,value:'overwrite',checked:'overwrite'===e.resolution,onChange:e=>C(t,'overwrite')},null,40,qe),a[24]||(a[24]=(0,c.createElementVNode)('span',{class:'option-label overwrite-label'},'覆盖',-1))]),(0,c.createElementVNode)('label',Te,[(0,c.createElementVNode)('input',{type:'radio',name:`conflict-${t}`,value:'rename',checked:'rename'===e.resolution,onChange:e=>C(t,'rename')},null,40,Ae),a[25]||(a[25]=(0,c.createElementVNode)('span',{class:'option-label rename-label'},'重命名',-1))]),(0,c.createElementVNode)('label',Me,[(0,c.createElementVNode)('input',{type:'radio',name:`conflict-${t}`,value:'skip',checked:'skip'===e.resolution,onChange:e=>C(t,'skip')},null,40,Ue),a[26]||(a[26]=(0,c.createElementVNode)('span',{class:'option-label skip-label'},'跳过',-1))])])]))),128))]),(0,c.createCommentVNode)(' 无冲突项提示 '),h.value.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('p',Re,[a[27]||(a[27]=(0,c.createElementVNode)('i',{class:'fa-solid fa-circle-check'},null,-1)),(0,c.createTextVNode)(' 另有 '+(0,c.toDisplayString)(h.value.length)+' 个预设无冲突，将直接导入 ',1)])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',{class:'modal-footer conflict-footer'},[(0,c.createElementVNode)('button',{class:'footer-button cancel-footer',onClick:P},'取消'),(0,c.createElementVNode)('button',{class:'footer-button confirm-footer',onClick:D},'确认导入')])])])):(0,c.createCommentVNode)('v-if',!0)]))}}),je=(0,i.A)(ze,[['__scopeId','data-v-ca6d08a0']]),Ge=e(),Oe={only:'唯一',common:'普通',uncommon:'优良',rare:'稀有',epic:'史诗',legendary:'传说',mythic:'神话'};function Ke(){const e=L(),t=q(),{character:l}=a(e);return{executeJourney:async()=>{try{await async function(e,t,a,l){await waitGlobalInitialized('Mvu');const o=_.filter(a,e=>!e.isCustom),n=_.filter(t,e=>!e.isCustom),r=_.filter(l,e=>!e.isCustom),c=Mvu.getMvuData({type:'message',message_id:'latest'});_.set(c,'stat_data.命定系统.命运点数',e.destinyPoints);const s=_.fromPairs(_.map(o,e=>[e.name,{品质:_.get(Oe,e.rarity,'普通'),类型:e.type,消耗:e.consume||'',标签:e.tag||[],效果:e.effect||{},描述:e.description}]));_.set(c,'stat_data.主角.技能',s);const i=_.fromPairs(_.map(n,e=>[e.name,{品质:_.get(Oe,e.rarity,'普通'),数量:e.quantity||1,类型:e.type,标签:e.tag||[],效果:e.effect||{},描述:e.description}]));_.set(c,'stat_data.主角.背包',i),_.set(c,'stat_data.主角.金钱',Math.max(0,Math.round(e.money))),_.set(c,'stat_data.主角.等级',e.level);const d=_.fromPairs(_.map(r,e=>{const t=_.fromPairs(_.chain(e.equip).filter(e=>!!e.name).map(e=>[e.name,{品质:_.get(Oe,e.rarity||'','普通'),类型:e.type||'',标签:e.tag||[],效果:e.effect||{},描述:e.description||'',位置:e.position||''}]).value()),a=_.fromPairs(_.map(e.skills,e=>[e.name,{品质:_.get(Oe,e.rarity,'普通'),类型:e.type,消耗:e.consume||'',标签:e.tag||[],效果:e.effect||{},描述:e.description}]));return[e.name,{在场:!0,生命层级:e.lifeLevel,等级:e.level,种族:e.race,身份:[...e.identity],职业:[...e.career],性格:e.personality,喜爱:e.like,外貌:e.app,着装:e.cloth,属性:{力量:e.attributes.strength,敏捷:e.attributes.dexterity,体质:e.attributes.constitution,智力:e.attributes.intelligence,精神:e.attributes.mind},登神长阶:{是否开启:e.stairway.isOpen,要素:e.stairway.elements??{},权能:e.stairway.powers??{},法则:e.stairway.laws??{},神位:e.stairway.godlyRank??'',神国:e.stairway.godKingdom?{名称:e.stairway.godKingdom.name,描述:e.stairway.godKingdom.description}:{名称:'',描述:''}},命定契约:e.isContract,好感度:e.affinity,心里话:e.comment||'',背景故事:e.backgroundInfo||'',装备:t,技能:a}]}));_.set(c,'stat_data.命定系统.关系列表',d),await Mvu.replaceMvuData(c,{type:'message',message_id:'latest'}),console.log('✅ 预设数据已成功写入消息楼层变量')}(l.value,e.selectedItems,e.selectedSkills,e.selectedPartners),console.log('✅ 角色数据已写入 MVU 变量');const a=function(e,t,a,l,o,n,r){const c=[],s='自定义'===e.gender?e.customGender:e.gender,i='自定义'===e.race?e.customRace:e.race,d='自定义'===e.identity?e.customIdentity:e.identity,m='自定义'===e.startLocation?e.customStartLocation:e.startLocation,u=w(e.level),p=t=>{const a=e.basePoints[t],l=e.attributePoints[t];return`${a}(基础) + ${u}(层级) + ${l}(额外) = ${a+u+l}`};c.push('【角色信息】'),c.push(`姓名: ${e.name}`),c.push(`性别: ${s}`),c.push(`年龄: ${e.age}岁`),c.push(`种族: ${i}`),c.push(`身份: ${d}`),c.push(`出生地: ${m}`),c.push(`生命层级: ${S(e.level)}`),c.push(`等级: Lv.${e.level}`),c.push(''),c.push('【角色属性】'),c.push(`力量: ${p('力量')}`),c.push(`敏捷: ${p('敏捷')}`),c.push(`体质: ${p('体质')}`),c.push(`智力: ${p('智力')}`),c.push(`精神: ${p('精神')}`),t.length>0&&(c.push(''),c.push('【装备列表】'),t.forEach((e,a)=>{c.push(`- 名称: ${e.name}`),c.push(`  类型: ${e.type}`),c.push(`  品质: ${Oe[e.rarity]||e.rarity}`),e.tag&&e.tag.length>0&&c.push(`  标签: ${e.tag.join('、')}`),_.isEmpty(e.effect)||(c.push('  效果:'),_.forEach(e.effect,(e,t)=>{c.push(`    - ${t}: ${e}`)})),e.description&&c.push(`  描述: ${e.description}`),a<t.length-1&&c.push('')}));const v=_.filter(o,'isCustom');v.length>0&&(c.push(''),c.push('【自定义道具】'),v.forEach((e,t)=>{c.push(`- 名称: ${e.name||'未命名'}`),e.type&&c.push(`  类型: ${e.type}`),e.rarity&&c.push(`  品质: ${Oe[e.rarity]||e.rarity}`),e.quantity&&c.push(`  数量: ${e.quantity}`),e.tag&&e.tag.length>0&&c.push(`  标签: ${e.tag.join('、')}`),_.isEmpty(e.effect)||(c.push('  效果:'),_.forEach(e.effect,(e,t)=>{c.push(`    - ${t}: ${e}`)})),e.description&&c.push(`  描述: ${e.description}`),t<v.length-1&&c.push('')}));const f=_.filter(n,'isCustom');f.length>0&&(c.push(''),c.push('【自定义技能】'),f.forEach((e,t)=>{c.push(`- 名称: ${e.name||'未命名'}`),e.type&&c.push(`  类型: ${e.type}`),e.rarity&&c.push(`  品质: ${Oe[e.rarity]||e.rarity}`),e.tag&&e.tag.length>0&&c.push(`  标签: ${e.tag.join('、')}`),e.consume&&c.push(`  消耗: ${e.consume}`),_.isEmpty(e.effect)||(c.push('  效果:'),_.forEach(e.effect,(e,t)=>{c.push(`    - ${t}: ${e}`)})),e.description&&c.push(`  描述: ${e.description}`),t<f.length-1&&c.push('')}));const V=_.filter(a,'isCustom');if(V.length>0&&(c.push(''),c.push('【关系列表】'),V.forEach(e=>{if(c.push(`◆ 名称: ${e.name}`),c.push(`  种族: ${e.race}`),c.push(`  身份: ${e.identity.join('、')}`),e.career.length>0&&c.push(`  职业: ${e.career.join('、')}`),c.push(`  生命层级: ${e.lifeLevel}`),c.push(`  等级: ${e.level}`),c.push(`  性格: ${e.personality}`),c.push(`  喜爱: ${e.like}`),c.push(`  外貌: ${e.app}`),c.push(`  着装: ${e.cloth}`),c.push('  属性:'),c.push(`    力量: ${e.attributes.strength}`),c.push(`    敏捷: ${e.attributes.dexterity}`),c.push(`    体质: ${e.attributes.constitution}`),c.push(`    智力: ${e.attributes.intelligence}`),c.push(`    精神: ${e.attributes.mind}`),c.push(`  命定契约: ${e.isContract}`),c.push(`  好感度: ${e.affinity}`),!_.isEmpty(e.equip)){const t=_.filter(e.equip,'name');t.length>0&&(c.push('  装备:'),t.forEach((e,a)=>{c.push(`    - 名称: ${e.name}`),e.type&&c.push(`      类型: ${e.type}`),e.rarity&&c.push(`      品质: ${Oe[e.rarity]||e.rarity}`),e.tag&&e.tag.length>0&&c.push(`      标签: ${e.tag.join('、')}`),_.isEmpty(e.effect)||(c.push('      效果:'),_.forEach(e.effect,(e,t)=>{c.push(`        - ${t}: ${e}`)})),e.description&&c.push(`      描述: ${e.description}`),a<t.length-1&&c.push('')}))}if(e.stairway.isOpen){c.push('  登神长阶: 已开启');const t=_.get(e.stairway,'elements.custom.desc')||_.chain(e.stairway.elements).values().map(e=>e?.desc||'').find(Boolean).value();t&&c.push(`    描述: ${t}`)}e.comment&&c.push(`  心里话: ${e.comment}`),e.backgroundInfo&&c.push(`  背景: ${e.backgroundInfo}`),e.skills.length>0&&(c.push('  技能:'),e.skills.forEach((t,a)=>{c.push(`    - 名称: ${t.name}`),t.type&&c.push(`      类型: ${t.type}`),t.rarity&&c.push(`      品质: ${Oe[t.rarity]||t.rarity}`),t.tag&&t.tag.length>0&&c.push(`      标签: ${t.tag.join('、')}`),t.consume&&c.push(`      消耗: ${t.consume}`),_.isEmpty(t.effect)||(c.push('      效果:'),_.forEach(t.effect,(e,t)=>{c.push(`        - ${t}: ${e}`)})),t.description&&c.push(`      描述: ${t.description}`),a<e.skills.length-1&&c.push('')}))})),l){c.push(''),c.push('【初始开局剧情】'),c.push(`${l.name}`);const e='【自定义开局】'===l.name&&r?r:l.description;c.push(`描述: ${e}`)}return`\`\`\`text\n${c.join('\n')}\n\`\`\`\n\n---\n根据<status_current_variables>和以上内容，生成一个符合描述和情景的初始剧情！\n（注意：生成初始剧情时，先检查上述内容是否完整，如不完整，必须参考相关设定进行完善。）`}(l.value,e.selectedEquipments,e.selectedPartners,e.selectedBackground,e.selectedItems,e.selectedSkills,t.customBackgroundDescription);console.log('✅ AI 提示词已生成：\n',a),await createChatMessages([{role:'user',message:a}]),console.log('✅ 角色信息已发送给 AI'),await triggerSlash('/trigger')}catch(e){console.error('❌ 踏上旅程时发生错误：',e)}}}}async function He(e){const t=o(e),a=async e=>{if(_.isString(e))return async function(e){if(!e)return e;try{return await SillyTavern.substituteParams(e)}catch{return e}}(e);if(_.isArray(e))return Promise.all(e.map(a));if(_.isPlainObject(e)){const t={};for(const[l,o]of Object.entries(e))t[l]=await a(o);return t}return e};return await a(t)}function Je(){const e=L(),{character:t}=a(e);return{availablePoints:(0,c.computed)(()=>{const a=e.consumedPoints;return t.value.reincarnationPoints-a}),canRollPoints:(0,c.computed)(()=>0===e.consumedPoints),rollPoints:()=>e.rollInitialPoints()}}function Qe(){const e=L(),t=(0,c.ref)(!1),a=(0,c.ref)('manage'),l=()=>{a.value='load',t.value=!0};return{showModal:t,modalMode:a,openManageModal:()=>{a.value='manage',t.value=!0},openLoadModal:l,closeModal:()=>{t.value=!1},checkAndShowLoadModal:()=>{(function(){const e=A();return!_.isEmpty(e.presets)})()&&l()},checkMatchingPreset:()=>W(e)}}function We(e,t){const a=t=>_.some(e(),{name:t.name}),l=e=>t()>=e.cost;return{isSelected:a,canSelect:l,isDisabled:e=>!a(e)&&!l(e)}}const Xe=[{title:'基础信息与属性',shortTitle:'信息/属性',step:1},{title:'装备与技能',shortTitle:'装备/技能',step:2},{title:'伙伴与初始背景',shortTitle:'伙伴/背景',step:3},{title:'确认提交',shortTitle:'确认',step:4}],Ye='Layout',Ze='BasicInfo',et='Selections',tt='Background',at='Confirm',lt='/',ot='/basic',nt={1:Ze,2:et,3:tt,4:at},rt={[Ze]:1,[et]:2,[tt]:3,[at]:4},ct=Xe.length;function st(){const e=L(),{character:t}=a(e),l=(0,c.computed)(()=>t.value.reincarnationPoints),o=(0,c.computed)(()=>e.consumedPoints);return{availablePoints:(0,c.computed)(()=>l.value-o.value),totalPoints:l,consumedPoints:o}}const it={class:'content-area'},dt=(0,c.defineComponent)({__name:'ContentArea',props:{transitionName:{}},setup:e=>(t,a)=>{const l=(0,c.resolveComponent)('router-view');return(0,c.openBlock)(),(0,c.createElementBlock)('div',it,[(0,c.createVNode)(l,null,{default:(0,c.withCtx)(({Component:t,route:a})=>[(0,c.createVNode)(c.Transition,{name:e.transitionName,mode:'out-in'},{default:(0,c.withCtx)(()=>[((0,c.openBlock)(),(0,c.createBlock)((0,c.resolveDynamicComponent)(t),{key:a.path}))]),_:2},1032,['name'])]),_:1})])}}),mt=(0,i.A)(dt,[['__scopeId','data-v-422e4092']]),ut={class:'header-controls'},pt={class:'points-display'},vt={class:'points-total'},ft={class:'control-buttons'},Vt=['disabled','title'],kt=(0,c.defineComponent)({__name:'HeaderControls',emits:['openPreset'],setup(e,{emit:t}){const l=L(),{character:o}=a(l),{availablePoints:n,canRollPoints:r,rollPoints:s}=Je(),i=t;return(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',ut,[(0,c.createElementVNode)('div',pt,[t[2]||(t[2]=(0,c.createElementVNode)('span',{class:'points-label'},'可用转生点：',-1)),(0,c.createElementVNode)('span',{class:(0,c.normalizeClass)(['points-value',{negative:(0,c.unref)(n)<0}])},(0,c.toDisplayString)((0,c.unref)(n)),3),(0,c.createElementVNode)('span',vt,'/ '+(0,c.toDisplayString)((0,c.unref)(o).reincarnationPoints),1)]),(0,c.createElementVNode)('div',ft,[(0,c.createElementVNode)('button',{class:'control-button roll-button',disabled:!(0,c.unref)(r),title:(0,c.unref)(r)?'随机生成新的转生点数':'已消耗点数，无法重新 Roll（请先重置）',onClick:t[0]||(t[0]=(...e)=>(0,c.unref)(s)&&(0,c.unref)(s)(...e))},[...t[3]||(t[3]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-dice'},null,-1),(0,c.createElementVNode)('span',{class:'button-text'},'Roll 点数',-1)])],8,Vt),(0,c.createElementVNode)('button',{class:'control-button preset-button',title:'管理角色预设',onClick:t[1]||(t[1]=e=>i('openPreset'))},[...t[4]||(t[4]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-bookmark'},null,-1),(0,c.createElementVNode)('span',{class:'button-text'},'预设管理',-1)])])])]))}}),Nt=(0,i.A)(kt,[['__scopeId','data-v-25795810']]),yt={class:'navigation'},Et=['disabled'],gt=['disabled','title'],bt={class:'text'},ht=(0,c.defineComponent)({__name:'NavigationButtons',props:{canGoPrevious:{type:Boolean},isNextDisabled:{type:Boolean},nextButtonText:{},nextDisabledTitle:{}},emits:['previous','next'],setup(e,{emit:t}){const a=t;return(t,l)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',yt,[(0,c.createElementVNode)('button',{class:'nav-button prev-button',disabled:!e.canGoPrevious,onClick:l[0]||(l[0]=e=>a('previous'))},[...l[2]||(l[2]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-chevron-left'},null,-1),(0,c.createElementVNode)('span',{class:'text'},'上一步',-1)])],8,Et),(0,c.createElementVNode)('button',{class:'nav-button next-button',disabled:e.isNextDisabled,title:e.isNextDisabled?e.nextDisabledTitle:void 0,onClick:l[1]||(l[1]=e=>a('next'))},[(0,c.createElementVNode)('span',bt,(0,c.toDisplayString)(e.nextButtonText),1),l[3]||(l[3]=(0,c.createElementVNode)('i',{class:'fa-solid fa-chevron-right'},null,-1))],8,gt)]))}}),Bt=(0,i.A)(ht,[['__scopeId','data-v-de8f52dc']]),Ct={class:'confirm-dialog'},xt={class:'confirm-actions'},wt=(0,c.defineComponent)({__name:'SavePresetConfirm',props:{visible:{type:Boolean}},emits:['save','skip','cancel'],setup(e,{emit:t}){const a=t;return(t,l)=>((0,c.openBlock)(),(0,c.createBlock)(c.Teleport,{to:'body'},[e.visible?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:0,class:'confirm-overlay',onClick:l[3]||(l[3]=(0,c.withModifiers)(e=>a('cancel'),['self']))},[(0,c.createElementVNode)('div',Ct,[l[7]||(l[7]=(0,c.createElementVNode)('div',{class:'confirm-header'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-bookmark'}),(0,c.createElementVNode)('h3',null,'保存预设')],-1)),l[8]||(l[8]=(0,c.createElementVNode)('div',{class:'confirm-body'},[(0,c.createElementVNode)('p',null,'是否在踏上旅程前保存当前配置为预设？'),(0,c.createElementVNode)('p',{class:'confirm-hint'},'保存后下次可以快速加载相同配置')],-1)),(0,c.createElementVNode)('div',xt,[(0,c.createElementVNode)('button',{class:'confirm-button save',onClick:l[0]||(l[0]=e=>a('save'))},[...l[4]||(l[4]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-floppy-disk'},null,-1),(0,c.createTextVNode)(' 保存预设 ',-1)])]),(0,c.createElementVNode)('button',{class:'confirm-button skip',onClick:l[1]||(l[1]=e=>a('skip'))},[...l[5]||(l[5]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-forward'},null,-1),(0,c.createTextVNode)(' 不保存 ',-1)])]),(0,c.createElementVNode)('button',{class:'confirm-button cancel',onClick:l[2]||(l[2]=e=>a('cancel'))},[...l[6]||(l[6]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark'},null,-1),(0,c.createTextVNode)(' 取消 ',-1)])])])])])):(0,c.createCommentVNode)('v-if',!0)]))}}),St=(0,i.A)(wt,[['__scopeId','data-v-45c171a6']]),Dt={class:'steps'},_t={class:'title'},Pt=(0,c.defineComponent)({__name:'Steps',props:{steps:{default:()=>[]},step:{default:1}},setup(e,{expose:t}){const a=e;return t({steps:a.steps,step:a.step}),(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Dt,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.steps,(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:a,class:(0,c.normalizeClass)(['step',{pass:e.step>=a+1}])},[(0,c.createElementVNode)('div',_t,(0,c.toDisplayString)(t.title),1)],2))),128))]))}}),Ft=(0,i.A)(Pt,[['__scopeId','data-v-4595f292']]),It={class:'layout'},$t=(0,c.defineComponent)({__name:'index',setup(e){const t=L(),{currentStep:a,canGoPrevious:l,isLastStep:o,transitionName:n,goToPrevious:r,goToFirst:s,goToStep:i}=function(){const e=(0,u.useRouter)(),t=(0,u.useRoute)(),a=(0,c.ref)('slide-left'),l=(0,c.computed)(()=>{const e=t.meta?.step;if(e)return e;const a=t.name;return rt[a]||1}),o=(0,c.computed)(()=>l.value>1),n=(0,c.computed)(()=>l.value===ct),r=t=>{if(t>=1&&t<=ct){const a=nt[t];a&&e.push({name:a})}};return(0,c.watch)(()=>t.name,(e,t)=>{const l=rt[e]||1,o=rt[t]||1;a.value=l>o?'slide-left':'slide-right'}),{currentStep:l,totalSteps:ct,stepConfigs:Xe,canGoPrevious:o,isLastStep:n,transitionName:a,goToPrevious:()=>{const e=l.value-1;e>=1&&r(e)},goToNext:()=>{const e=l.value+1;e<=ct&&r(e)},goToStep:r,goToFirst:()=>{e.push({name:Ze})}}}(),{showModal:d,modalMode:m,openManageModal:p,closeModal:v,checkAndShowLoadModal:f}=Qe(),V=(0,c.ref)(!1),{executeJourney:k}=Ke(),{availablePoints:N}=Je(),y=(0,c.ref)(!1),E=Xe.map(e=>({title:e.shortTitle}));(0,c.onMounted)(()=>{setTimeout(()=>{f()},300)});const g=()=>{s()},b=()=>{V.value&&(V.value=!1,v(),k())},h=async()=>{if(o.value){const e=W(t);return void(e?(toastr.info(`当前配置与预设「${e}」相同，直接开始旅程`),k()):(y.value=!0,Z()))}i(a.value+1)},B=()=>{y.value=!1,V.value=!0,p()},C=()=>{y.value=!1,k()},x=()=>{y.value=!1},w=()=>{V.value=!1,p()},S=(0,c.computed)(()=>!!o.value&&N.value<0),D=(0,c.computed)(()=>o.value?'踏上旅程':'下一步');return(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',It,[t[0]||(t[0]=(0,c.createElementVNode)('h1',{class:'main-title'},'命定之诗与黄昏之歌',-1)),(0,c.createVNode)(Nt,{onOpenPreset:w}),(0,c.createVNode)(Ft,{steps:(0,c.unref)(E),step:(0,c.unref)(a)},null,8,['steps','step']),(0,c.createVNode)(mt,{'transition-name':(0,c.unref)(n)},null,8,['transition-name']),(0,c.createVNode)(Bt,{'can-go-previous':(0,c.unref)(l),'is-next-disabled':(0,c.unref)(S),'next-button-text':(0,c.unref)(D),'next-disabled-title':'可用转生点数不能为负',onPrevious:(0,c.unref)(r),onNext:h},null,8,['can-go-previous','is-next-disabled','next-button-text','onPrevious']),(0,c.createVNode)(je,{visible:(0,c.unref)(d),mode:(0,c.unref)(m),onClose:(0,c.unref)(v),onLoaded:g,onSaved:b},null,8,['visible','mode','onClose']),(0,c.createVNode)(St,{visible:(0,c.unref)(y),onSave:B,onSkip:C,onCancel:x},null,8,['visible'])]))}}),Lt=(0,i.A)($t,[['__scopeId','data-v-3ba0e588']]),qt={class:'category-sidebar'},Tt={class:'category-list'},At=['disabled','onClick'],Mt={class:'content-area'},Ut={key:0,class:'filter-area'},Rt={class:'content-main'},zt=(0,c.defineComponent)({__name:'CategorySelectionLayout',props:{categories:{},modelValue:{},categoryNameFormatter:{type:Function,default:e=>e},disabledCategories:{default:()=>[]},contentMaxHeight:{default:'500px'},sidebarWidth:{default:'200px'}},emits:['update:modelValue'],setup(e,{emit:t}){const a=e,l=t,o=e=>a.disabledCategories.includes(e);return(t,n)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:'category-selection-layout',style:(0,c.normalizeStyle)({'--sidebar-width':e.sidebarWidth,'--content-max-height':e.contentMaxHeight})},[(0,c.createCommentVNode)(' 左侧：分类导航 '),(0,c.createElementVNode)('nav',qt,[(0,c.createElementVNode)('div',Tt,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.categories,t=>((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:t,class:(0,c.normalizeClass)(['category-item',{active:e.modelValue===t,disabled:o(t)}]),disabled:o(t),onClick:e=>(e=>{a.disabledCategories.includes(e)||l('update:modelValue',e)})(t)},(0,c.toDisplayString)(e.categoryNameFormatter(t)),11,At))),128)),(0,c.createCommentVNode)(' 分类项插槽，用于在分类后插入额外内容（如二级分类） '),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.categories,a=>((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:`slot-${a}`},[e.modelValue===a?(0,c.renderSlot)(t.$slots,'sub-category',{key:0,category:a}):(0,c.createCommentVNode)('v-if',!0)],64))),128))])]),(0,c.createCommentVNode)(' 右侧：内容区域 '),(0,c.createElementVNode)('div',Mt,[(0,c.createCommentVNode)(' 顶部筛选区域插槽 '),t.$slots.filter?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ut,[(0,c.renderSlot)(t.$slots,'filter')])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 主内容插槽 '),(0,c.createElementVNode)('div',Rt,[(0,c.renderSlot)(t.$slots,'content')])])],4))}}),jt=(0,i.A)(zt,[['__scopeId','data-v-0b4afefe']]),Gt={通用开局:[{name:'【自定义开局】',description:'自由发挥你的想象力，编写你自己的人物初始背景。'}]};let Ot=null;function Kt(){return Ot||Gt}!async function(){const e=await async function(){return y('backgrounds.json','初始剧情')}();Ot=E(Gt,e)}();const Ht={};let Jt=null;function Qt(){return Jt||Ht}!async function(){const e=await async function(){return y('partners.json','伙伴')}();Jt=E(Ht,e)}();const Wt={class:'form-textarea-wrapper'},Xt=['rows','placeholder','disabled','readonly','maxlength'],Yt=(0,c.defineComponent)({__name:'FormTextarea',props:{modelValue:{},rows:{default:3},placeholder:{default:''},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:{},autoResize:{type:Boolean,default:!1}},emits:['update:modelValue','focus','blur'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.ref)(),n=(0,c.computed)({get:()=>a.modelValue,set:e=>l('update:modelValue',e)}),r=e=>{l('focus',e)},s=e=>{l('blur',e)},i=()=>{a.autoResize&&o.value&&(0,c.nextTick)(()=>{o.value&&(o.value.style.height='auto',o.value.style.height=`${o.value.scrollHeight}px`)})};return(0,c.watch)(()=>a.modelValue,i),(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Wt,[(0,c.withDirectives)((0,c.createElementVNode)('textarea',{ref_key:'textareaRef',ref:o,'onUpdate:modelValue':a[0]||(a[0]=e=>n.value=e),rows:e.rows,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,maxlength:e.maxlength,class:(0,c.normalizeClass)(['form-textarea',{'is-disabled':e.disabled,'is-readonly':e.readonly,'auto-resize':e.autoResize}]),onFocus:r,onBlur:s,onInput:i},null,42,Xt),[[c.vModelText,n.value]])]))}}),Zt=(0,i.A)(Yt,[['__scopeId','data-v-517d0cac']]),ea={class:'requirement-item'},ta={class:'requirement-label'},aa=(0,c.defineComponent)({__name:'RequirementBadge',props:{label:{},requiredValue:{},currentValue:{},matchMode:{default:'exact'}},setup(e){const t=e,a=(0,c.computed)(()=>'prefix'===t.matchMode?t.currentValue===t.requiredValue||t.currentValue.startsWith(t.requiredValue+'-'):t.currentValue===t.requiredValue);return(t,l)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',ea,[(0,c.createElementVNode)('span',ta,(0,c.toDisplayString)(e.label)+'：',1),(0,c.createElementVNode)('span',{class:(0,c.normalizeClass)(['requirement-value',{'requirement-met':a.value,'requirement-unmet':!a.value}])},(0,c.toDisplayString)(e.requiredValue),3)]))}}),la=(0,i.A)(aa,[['__scopeId','data-v-18788000']]),oa={class:'background-list'},na={key:0,class:'empty-message'},ra=['onClick'],ca={class:'card-header'},sa={class:'background-name'},ia=['onClick'],da={key:0,class:'requirements'},ma={class:'background-summary'},ua={key:1,class:'requirement-warning'},pa=(0,c.defineComponent)({__name:'BackgroundList',props:{items:{},selectedItem:{},characterRace:{},characterLocation:{},characterIdentity:{}},emits:['select','update:customDescription'],setup(e,{emit:t}){const a=e,l=t,o=q(),n=(0,c.ref)(new Set),r=e=>n.value.has(e),s=e=>a.selectedItem?.name===e.name,i=(e,t)=>!e||e===t,d=e=>{return!!i(e.requiredRace,a.characterRace)&&(!!i(e.requiredIdentity,a.characterIdentity)&&(t=e.requiredLocation,l=a.characterLocation,!(t&&l!==t&&!l.startsWith(t+'-'))));var t,l},m=(0,c.computed)({get:()=>o.customBackgroundDescription,set:e=>o.updateCustomBackgroundDescription(e)}),u=e=>{o.updateCustomBackgroundDescription(e),l('update:customDescription',e)},p=e=>'【自定义开局】'===e.name,v=(0,c.ref)([]),f=(0,c.ref)('');return(0,c.watch)(()=>a.items,async e=>{const t=e.map(e=>e.name).join('|');t===f.value&&v.value.length>0||(f.value=t,v.value=await Promise.all(e.map(He)))},{immediate:!0}),(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',oa,[0===v.value.length?((0,c.openBlock)(),(0,c.createElementBlock)('div',na,'该分类暂无初始剧情')):(0,c.createCommentVNode)('v-if',!0),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(v.value,t=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t.name,class:(0,c.normalizeClass)(['background-card',{selected:s(t),disabled:!d(t),expanded:r(t.name)}]),onClick:e=>(e=>{d(e)&&l('select',e)})(t)},[(0,c.createElementVNode)('div',ca,[(0,c.createElementVNode)('h3',sa,(0,c.toDisplayString)(t.name),1),t.description.length>100?((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:0,class:'expand-btn',onClick:e=>{return a=t.name,e.stopPropagation(),void(n.value.has(a)?n.value.delete(a):n.value.add(a));var a}},(0,c.toDisplayString)(r(t.name)?'收起':'展开'),9,ia)):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createCommentVNode)(' 限制要求 '),t.requiredRace||t.requiredLocation||t.requiredIdentity?((0,c.openBlock)(),(0,c.createElementBlock)('div',da,[t.requiredRace?((0,c.openBlock)(),(0,c.createBlock)(la,{key:0,label:'种族要求','required-value':t.requiredRace,'current-value':e.characterRace},null,8,['required-value','current-value'])):(0,c.createCommentVNode)('v-if',!0),t.requiredLocation?((0,c.openBlock)(),(0,c.createBlock)(la,{key:1,label:'地区要求','required-value':t.requiredLocation,'current-value':e.characterLocation,'match-mode':'prefix'},null,8,['required-value','current-value'])):(0,c.createCommentVNode)('v-if',!0),t.requiredIdentity?((0,c.openBlock)(),(0,c.createBlock)(la,{key:2,label:'身份要求','required-value':t.requiredIdentity,'current-value':e.characterIdentity},null,8,['required-value','current-value'])):(0,c.createCommentVNode)('v-if',!0)])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 描述内容（过长时可折叠） '),(0,c.createElementVNode)('p',ma,[r(t.name)||t.description.length<=100?((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:0},[(0,c.createTextVNode)((0,c.toDisplayString)(t.description),1)],64)):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createTextVNode)((0,c.toDisplayString)(t.description.substring(0,100))+'... ',1)],64))]),(0,c.createCommentVNode)(' 不满足要求时显示提示 '),d(t)?(0,c.createCommentVNode)('v-if',!0):((0,c.openBlock)(),(0,c.createElementBlock)('div',ua,' ⚠️ 不满足该剧情的限定条件 ')),(0,c.createCommentVNode)(' 自定义开局输入框 '),(0,c.withDirectives)((0,c.createElementVNode)('div',{class:'custom-input-area',onClick:a[0]||(a[0]=(0,c.withModifiers)(()=>{},['stop']))},[a[1]||(a[1]=(0,c.createElementVNode)('div',{class:'custom-input-label'},'请编写您的自定义开局剧情：',-1)),(0,c.createVNode)(Zt,{'model-value':m.value,rows:6,placeholder:'在这里发挥您的想象力，编写您自己的人物初始剧情...\n\n例如：您可以描述角色的出身、经历的事件、当前的处境等等。','onUpdate:modelValue':u},null,8,['model-value'])],512),[[c.vShow,p(t)&&s(t)]])],10,ra))),128))]))}}),va=(0,i.A)(pa,[['__scopeId','data-v-20e63764']]),fa={class:'confirm-header'},Va={class:'confirm-title'},ka={class:'confirm-content'},Na={class:'confirm-message'},ya={class:'confirm-actions'},Ea=(0,c.defineComponent)({__name:'ConfirmModal',props:{visible:{type:Boolean},title:{default:'确认操作'},message:{},confirmText:{default:'确认'},cancelText:{default:'取消'},type:{default:'warning'}},emits:['confirm','cancel'],setup(e,{emit:t}){const a=e,l=t;(0,c.watch)(()=>a.visible,e=>{e&&Z()});const o=(0,c.computed)(()=>{switch(a.type){case'danger':return'fa-solid fa-triangle-exclamation';case'info':return'fa-solid fa-circle-info';default:return'fa-solid fa-circle-question'}}),n=()=>{l('confirm')},r=()=>{l('cancel')};return(t,a)=>((0,c.openBlock)(),(0,c.createBlock)(c.Teleport,{to:'body'},[e.visible?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:0,class:'confirm-overlay',onClick:(0,c.withModifiers)(r,['self'])},[(0,c.createElementVNode)('div',{class:(0,c.normalizeClass)(['confirm-container',`type-${e.type}`])},[(0,c.createCommentVNode)(' 标题栏 '),(0,c.createElementVNode)('div',fa,[(0,c.createElementVNode)('i',{class:(0,c.normalizeClass)(['confirm-icon',o.value])},null,2),(0,c.createElementVNode)('h3',Va,(0,c.toDisplayString)(e.title),1)]),(0,c.createCommentVNode)(' 内容区域 '),(0,c.createElementVNode)('div',ka,[(0,c.createElementVNode)('p',Na,(0,c.toDisplayString)(e.message),1)]),(0,c.createCommentVNode)(' 按钮区域 '),(0,c.createElementVNode)('div',ya,[(0,c.createElementVNode)('button',{class:'btn-cancel',onClick:r},[a[0]||(a[0]=(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark'},null,-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(e.cancelText),1)]),(0,c.createElementVNode)('button',{class:(0,c.normalizeClass)(['btn-confirm',`btn-${e.type}`]),onClick:n},[a[1]||(a[1]=(0,c.createElementVNode)('i',{class:'fa-solid fa-check'},null,-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(e.confirmText),1)],2)])],2)])):(0,c.createCommentVNode)('v-if',!0)]))}}),ga=(0,i.A)(Ea,[['__scopeId','data-v-62de9d7e']]),ba={key:0,class:'array-items'},ha={class:'item-index'},Ba=['placeholder','onKeydown'],Ca=['onDblclick'],xa={class:'item-actions'},wa=['disabled','onClick'],Sa=['disabled','onClick'],Da=['disabled','onClick'],_a=['disabled','onClick'],Pa={class:'empty-state'},Fa={class:'empty-text'},Ia={key:2,class:'add-item-section'},$a=['placeholder','disabled'],La=['disabled'],qa={class:'add-text'},Ta={class:'count-info'},Aa={class:'count-current'},Ma={class:'count-max'},Ua=(0,c.defineComponent)({__name:'FormArrayInput',props:{modelValue:{},placeholder:{default:'请输入内容'},maxItems:{default:10},minItems:{default:0},disabled:{type:Boolean,default:!1},addButtonText:{default:'添加项目'},emptyText:{default:'暂无项目，点击下方按钮添加'}},emits:['update:modelValue'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.ref)(''),n=(0,c.ref)(null),r=(0,c.ref)(''),s=(0,c.computed)(()=>!a.disabled&&a.modelValue.length<a.maxItems),i=(0,c.computed)(()=>!a.disabled&&a.modelValue.length>a.minItems),d=()=>{if(!s.value)return;const e=o.value.trim();e&&!a.modelValue.includes(e)&&(l('update:modelValue',[...a.modelValue,e]),o.value='')},m=e=>{a.disabled||(n.value=e,r.value=a.modelValue[e])},u=()=>{if(null===n.value)return;const e=r.value.trim();e&&e!==a.modelValue[n.value]&&(a.modelValue.some((t,a)=>a!==n.value&&t===e)||((e,t)=>{const o=[...a.modelValue];o[e]=t,l('update:modelValue',o)})(n.value,e)),n.value=null,r.value=''},p=()=>{n.value=null,r.value=''},v=(e,t)=>{if(a.disabled)return;const o='up'===t?e-1:e+1;if(o<0||o>=a.modelValue.length)return;const n=[...a.modelValue];[n[e],n[o]]=[n[o],n[e]],l('update:modelValue',n)},f=e=>{'Enter'===e.key&&(e.preventDefault(),d())};return(t,V)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['form-array-input',{'is-disabled':e.disabled}])},[(0,c.createCommentVNode)(' 已有项目列表 '),e.modelValue.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',ba,[(0,c.createVNode)(c.TransitionGroup,{name:'list'},{default:(0,c.withCtx)(()=>[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.modelValue,(t,o)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:`item-${o}-${t}`,class:'array-item'},[(0,c.createCommentVNode)(' 序号标识 '),(0,c.createElementVNode)('span',ha,(0,c.toDisplayString)(o+1),1),(0,c.createCommentVNode)(' 编辑模式 '),n.value===o?(0,c.withDirectives)(((0,c.openBlock)(),(0,c.createElementBlock)('input',{key:0,'onUpdate:modelValue':V[0]||(V[0]=e=>r.value=e),class:'item-input editing',placeholder:e.placeholder,onBlur:p,onKeydown:[(0,c.withKeys)((0,c.withModifiers)(u,['prevent']),['enter']),(0,c.withKeys)((0,c.withModifiers)(p,['prevent']),['escape'])]},null,40,Ba)),[[c.vModelText,r.value]]):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createCommentVNode)(' 显示模式 '),(0,c.createElementVNode)('span',{class:'item-text',onDblclick:e=>m(o)},(0,c.toDisplayString)(t),41,Ca)],2112)),(0,c.createCommentVNode)(' 操作按钮组 '),(0,c.createElementVNode)('div',xa,[(0,c.createElementVNode)('button',{type:'button',class:'action-btn edit-btn',title:'编辑',disabled:e.disabled,onClick:e=>m(o)},[...V[2]||(V[2]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-pen'},null,-1)])],8,wa),(0,c.createElementVNode)('button',{type:'button',class:'action-btn move-btn',title:'上移',disabled:e.disabled||0===o,onClick:e=>v(o,'up')},[...V[3]||(V[3]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-arrow-up'},null,-1)])],8,Sa),(0,c.createElementVNode)('button',{type:'button',class:'action-btn move-btn',title:'下移',disabled:e.disabled||o===e.modelValue.length-1,onClick:e=>v(o,'down')},[...V[4]||(V[4]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-arrow-down'},null,-1)])],8,Da),(0,c.createElementVNode)('button',{type:'button',class:'action-btn remove-btn',title:'删除',disabled:!i.value,onClick:e=>(e=>{if(!i.value)return;const t=[...a.modelValue];t.splice(e,1),l('update:modelValue',t)})(o)},[...V[5]||(V[5]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark'},null,-1)])],8,_a)])]))),128))]),_:1})])):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createCommentVNode)(' 空状态 '),(0,c.createElementVNode)('div',Pa,[V[6]||(V[6]=(0,c.createElementVNode)('span',{class:'empty-icon'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-clipboard-list'})],-1)),(0,c.createElementVNode)('span',Fa,(0,c.toDisplayString)(e.emptyText),1)])],2112)),(0,c.createCommentVNode)(' 添加新项 '),s.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ia,[(0,c.withDirectives)((0,c.createElementVNode)('input',{'onUpdate:modelValue':V[1]||(V[1]=e=>o.value=e),type:'text',class:'add-input',placeholder:e.placeholder,disabled:e.disabled,onKeydown:f},null,40,$a),[[c.vModelText,o.value]]),(0,c.createElementVNode)('button',{type:'button',class:'add-btn',disabled:e.disabled||!o.value.trim(),onClick:d},[V[7]||(V[7]=(0,c.createElementVNode)('span',{class:'add-icon'},'+',-1)),(0,c.createElementVNode)('span',qa,(0,c.toDisplayString)(e.addButtonText),1)],8,La)])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 数量提示 '),(0,c.createElementVNode)('div',Ta,[(0,c.createElementVNode)('span',Aa,(0,c.toDisplayString)(e.modelValue.length),1),V[8]||(V[8]=(0,c.createElementVNode)('span',{class:'count-separator'},'/',-1)),(0,c.createElementVNode)('span',Ma,(0,c.toDisplayString)(e.maxItems),1),V[9]||(V[9]=(0,c.createElementVNode)('span',{class:'count-label'},'项',-1))])],2))}}),Ra=(0,i.A)(Ua,[['__scopeId','data-v-c73d04d0']]),za=['onClick'],ja=['onClick'],Ga={key:1,class:'expand-icon placeholder'},Oa={class:'node-label'},Ka={key:0,class:'node-children'},Ha=(0,c.defineComponent)({__name:'CascaderTreeNode',props:{options:{},modelValue:{},expandedNodes:{},depth:{default:0}},emits:['toggle','select'],setup(e,{emit:t}){const a=e,l=t,o=e=>!!(e.children&&e.children.length>0),n=e=>a.expandedNodes.has(e.value),r=e=>!o(e)&&e.value===a.modelValue,s=e=>{l('toggle',e)},i=(e,t)=>{l('select',e,t)};return(t,a)=>{const d=(0,c.resolveComponent)('CascaderTreeNode',!0);return(0,c.openBlock)(),(0,c.createElementBlock)('div',{class:'tree-level',style:(0,c.normalizeStyle)({paddingLeft:e.depth>0?'16px':'0'})},[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.options,t=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t.value,class:'tree-node'},[(0,c.createElementVNode)('div',{class:(0,c.normalizeClass)(['node-content',{'is-selected':r(t),'is-disabled':t.disabled,'has-children':o(t)}]),onClick:e=>((e,t)=>{t.stopPropagation(),l('select',e.value,o(e))})(t,e)},[o(t)?((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:0,class:(0,c.normalizeClass)(['expand-icon',{expanded:n(t)}]),onClick:e=>((e,t)=>{t.stopPropagation(),l('toggle',e.value)})(t,e)},' ▶ ',10,ja)):((0,c.openBlock)(),(0,c.createElementBlock)('span',Ga)),(0,c.createElementVNode)('span',Oa,(0,c.toDisplayString)(t.label),1)],10,za),o(t)&&n(t)?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ka,[(0,c.createCommentVNode)(' 递归调用自身 '),(0,c.createVNode)(d,{options:t.children,'model-value':e.modelValue,'expanded-nodes':e.expandedNodes,depth:e.depth+1,onToggle:s,onSelect:i},null,8,['options','model-value','expanded-nodes','depth'])])):(0,c.createCommentVNode)('v-if',!0)]))),128))],4)}}}),Ja=(0,i.A)(Ha,[['__scopeId','data-v-0a519f5e']]),Qa={class:'cascader-dropdown'},Wa={class:'search-box'},Xa=['placeholder'],Ya={key:0,class:'search-results'},Za=['onClick'],el=['innerHTML'],tl={key:0,class:'no-results'},al={class:'tree-container'},ll=(0,c.defineComponent)({__name:'FormCascader',props:{modelValue:{},options:{},placeholder:{default:'请选择'},disabled:{type:Boolean,default:!1},searchPlaceholder:{default:'搜索...'},separator:{default:'-'}},emits:['update:modelValue','change'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.ref)(!1),n=(0,c.ref)(''),r=(0,c.ref)(new Set),s=(0,c.ref)(null),i=(0,c.ref)(null),d=(0,c.computed)(()=>a.modelValue?a.modelValue:a.placeholder),m=(e,t='')=>{const l=[];for(const o of e){const e=t?`${t}${a.separator}${o.label}`:o.label,n=o.value;l.push({option:o,path:e,fullValue:n}),o.children&&o.children.length>0&&l.push(...m(o.children,e))}return l},u=(0,c.computed)(()=>{if(!n.value.trim())return[];const e=n.value.toLowerCase();return m(a.options).filter(t=>t.path.toLowerCase().includes(e)&&!(t.option.children&&t.option.children.length>0))}),p=(0,c.computed)(()=>n.value.trim().length>0),v=e=>{if(!n.value.trim())return e;const t=n.value.trim(),a=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')})`,'gi');return e.replace(a,'<mark class="highlight">$1</mark>')},f=e=>{r.value.has(e)?r.value.delete(e):r.value.add(e),r.value=new Set(r.value)},V=(e,t)=>{t?f(e):(l('update:modelValue',e),l('change',e),o.value=!1,n.value='')},k=()=>{a.disabled||(o.value=!o.value,o.value&&!('ontouchstart'in window||navigator.maxTouchPoints>0)&&(0,c.nextTick)(()=>{i.value?.focus()}))},N=e=>{s.value&&!s.value.contains(e.target)&&(o.value=!1,n.value='')},y=e=>{'Escape'===e.key&&(o.value=!1,n.value='')},E=()=>{if(!a.modelValue)return;const e=a.modelValue.split(a.separator);let t='';for(let l=0;l<e.length-1;l++)t=t?`${t}${a.separator}${e[l]}`:e[l],r.value.add(t)};return(0,c.onMounted)(()=>{document.addEventListener('click',N),document.addEventListener('keydown',y),E()}),(0,c.onUnmounted)(()=>{document.removeEventListener('click',N),document.removeEventListener('keydown',y)}),(0,c.watch)(o,e=>{e||(n.value='')}),(0,c.watch)(()=>a.modelValue,()=>{E()}),(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{ref_key:'wrapperRef',ref:s,class:'cascader-wrapper'},[(0,c.createCommentVNode)(' 触发器 '),(0,c.createElementVNode)('div',{class:(0,c.normalizeClass)(['cascader-trigger',{'is-open':(0,c.unref)(o),'is-disabled':e.disabled}]),onClick:k},[(0,c.createElementVNode)('span',{class:(0,c.normalizeClass)(['selected-text',{placeholder:!e.modelValue}])},(0,c.toDisplayString)((0,c.unref)(d)),3),(0,c.createElementVNode)('span',{class:(0,c.normalizeClass)(['trigger-arrow',{rotated:(0,c.unref)(o)}])},'▼',2)],2),(0,c.createCommentVNode)(' 下拉面板 '),(0,c.withDirectives)((0,c.createElementVNode)('div',Qa,[(0,c.createCommentVNode)(' 搜索框 '),(0,c.createElementVNode)('div',Wa,[(0,c.withDirectives)((0,c.createElementVNode)('input',{ref_key:'searchInputRef',ref:i,'onUpdate:modelValue':a[0]||(a[0]=e=>(0,c.isRef)(n)?n.value=e:null),type:'text',class:'search-input',placeholder:e.searchPlaceholder,onClick:a[1]||(a[1]=(0,c.withModifiers)(()=>{},['stop']))},null,8,Xa),[[c.vModelText,(0,c.unref)(n)]]),(0,c.unref)(n)?((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:0,class:'clear-btn',onClick:a[2]||(a[2]=(0,c.withModifiers)(e=>n.value='',['stop']))},'✕')):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createCommentVNode)(' 搜索结果模式 '),(0,c.unref)(p)?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ya,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(u),t=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t.fullValue,class:(0,c.normalizeClass)(['search-result-item',{'is-selected':t.fullValue===e.modelValue}]),onClick:e=>{return a=t.fullValue,l('update:modelValue',a),l('change',a),o.value=!1,void(n.value='');var a}},[(0,c.createCommentVNode)(' eslint-disable-next-line vue/no-v-html '),(0,c.createElementVNode)('span',{innerHTML:v(t.path)},null,8,el)],10,Za))),128)),0===(0,c.unref)(u).length?((0,c.openBlock)(),(0,c.createElementBlock)('div',tl,'无匹配结果')):(0,c.createCommentVNode)('v-if',!0)])):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createCommentVNode)(' 树形浏览模式 '),(0,c.createElementVNode)('div',al,[(0,c.createVNode)(Ja,{options:e.options,'model-value':e.modelValue,'expanded-nodes':(0,c.unref)(r),depth:0,onToggle:f,onSelect:V},null,8,['options','model-value','expanded-nodes'])])],2112))],512),[[c.vShow,(0,c.unref)(o)]])],512))}}),ol=(0,i.A)(ll,[['__scopeId','data-v-8dd65b4a']]),nl={class:'form-input-wrapper'},rl=['type','placeholder','disabled','readonly','maxlength'],cl=(0,c.defineComponent)({__name:'FormInput',props:{modelValue:{},type:{default:'text'},placeholder:{default:''},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:{}},emits:['update:modelValue','focus','blur'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.computed)({get:()=>a.modelValue,set:e=>l('update:modelValue',e)}),n=e=>{l('focus',e)},r=e=>{l('blur',e)};return(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',nl,[(0,c.withDirectives)((0,c.createElementVNode)('input',{'onUpdate:modelValue':a[0]||(a[0]=e=>o.value=e),type:e.type,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,maxlength:e.maxlength,class:(0,c.normalizeClass)(['form-input',{'is-disabled':e.disabled,'is-readonly':e.readonly}]),onFocus:n,onBlur:r},null,42,rl),[[c.vModelDynamic,o.value]])]))}}),sl=(0,i.A)(cl,[['__scopeId','data-v-68bda4ea']]),il={key:0,class:'kv-list'},dl={class:'row-index'},ml={class:'row-inputs'},ul=['placeholder'],pl=['placeholder'],vl={class:'row-text'},fl={class:'kv-key'},Vl={class:'kv-value'},kl={class:'row-actions'},Nl=['disabled','onClick'],yl=['disabled','onClick'],El={key:1,class:'empty-state'},gl={class:'empty-text'},bl={key:2,class:'add-row'},hl=['placeholder','disabled'],Bl=['placeholder','disabled'],Cl=['disabled'],xl={class:'count-info'},wl={class:'count-current'},Sl={class:'count-max'},Dl=(0,c.defineComponent)({__name:'FormKeyValueInput',props:{modelValue:{},placeholderKey:{default:'请输入字段名'},placeholderValue:{default:'请输入对应内容'},maxItems:{default:20},minItems:{default:0},disabled:{type:Boolean,default:!1},addButtonText:{default:'添加条目'},emptyText:{default:'暂无条目，点击下方按钮添加'}},emits:['update:modelValue'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.ref)([]),n=(0,c.ref)(''),r=(0,c.ref)(''),s=(0,c.ref)(null),i=(0,c.ref)(null),d=(0,c.computed)(()=>!a.disabled&&o.value.length<a.maxItems),m=(0,c.computed)(()=>!a.disabled&&o.value.length>a.minItems),u=e=>{const t={};e.forEach(e=>{e.key.trim()&&(t[e.key.trim()]=e.value?.trim()??'')}),l('update:modelValue',t)};(0,c.watch)(()=>a.modelValue,e=>{o.value=Object.entries(e||{}).map(([e,t])=>({key:e,value:t??''}))},{immediate:!0,deep:!0});const p=()=>{if(!d.value)return;const e=n.value.trim();if(!e)return;const t=r.value.trim(),a=o.value.findIndex(t=>t.key===e);if(a>=0){const l=[...o.value];l[a]={key:e,value:t},o.value=l,u(l)}else{const a=[...o.value,{key:e,value:t}];o.value=a,u(a)}n.value='',r.value=''},v=()=>{s.value=null,i.value=null},f=()=>{if(null===s.value||!i.value)return;const e=i.value.key.trim(),t=i.value.value.trim();if(!e)return;if(o.value.some((t,a)=>a!==s.value&&t.key===e))return;const a=[...o.value];a[s.value]={key:e,value:t},o.value=a,u(a),v()},V=e=>{'Enter'===e.key&&(e.preventDefault(),p())};return(t,l)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['form-key-value',{'is-disabled':e.disabled}])},[o.value.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',il,[(0,c.createVNode)(c.TransitionGroup,{name:'kv-list'},{default:(0,c.withCtx)(()=>[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(o.value,(t,n)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:`kv-${n}-${t.key}`,class:'kv-row'},[(0,c.createElementVNode)('span',dl,(0,c.toDisplayString)(n+1),1),s.value===n&&i.value?((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:0},[(0,c.createElementVNode)('div',ml,[(0,c.withDirectives)((0,c.createElementVNode)('input',{'onUpdate:modelValue':l[0]||(l[0]=e=>i.value.key=e),class:'kv-input',placeholder:e.placeholderKey,onKeydown:(0,c.withKeys)(f,['enter'])},null,40,ul),[[c.vModelText,i.value.key]]),(0,c.withDirectives)((0,c.createElementVNode)('input',{'onUpdate:modelValue':l[1]||(l[1]=e=>i.value.value=e),class:'kv-input',placeholder:e.placeholderValue,onKeydown:(0,c.withKeys)(f,['enter'])},null,40,pl),[[c.vModelText,i.value.value]])]),(0,c.createElementVNode)('div',{class:'row-actions'},[(0,c.createElementVNode)('button',{type:'button',class:'action-btn',onClick:f},'保存'),(0,c.createElementVNode)('button',{type:'button',class:'action-btn subtle',onClick:v},'取消')])],64)):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createElementVNode)('div',vl,[(0,c.createElementVNode)('span',fl,(0,c.toDisplayString)(t.key),1),l[4]||(l[4]=(0,c.createElementVNode)('span',{class:'kv-separator'},':',-1)),(0,c.createElementVNode)('span',Vl,(0,c.toDisplayString)(t.value),1)]),(0,c.createElementVNode)('div',kl,[(0,c.createElementVNode)('button',{type:'button',class:'action-btn',disabled:e.disabled,onClick:e=>(e=>{a.disabled||(s.value=e,i.value={...o.value[e]})})(n)},' 编辑 ',8,Nl),(0,c.createElementVNode)('button',{type:'button',class:'action-btn danger',disabled:!m.value,onClick:e=>(e=>{if(!m.value)return;const t=[...o.value];t.splice(e,1),o.value=t,u(t)})(n)},' 删除 ',8,yl)])],64))]))),128))]),_:1})])):((0,c.openBlock)(),(0,c.createElementBlock)('div',El,[(0,c.createElementVNode)('span',gl,(0,c.toDisplayString)(e.emptyText),1)])),d.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',bl,[(0,c.withDirectives)((0,c.createElementVNode)('input',{'onUpdate:modelValue':l[2]||(l[2]=e=>n.value=e),class:'kv-input',placeholder:e.placeholderKey,disabled:e.disabled,onKeydown:V},null,40,hl),[[c.vModelText,n.value]]),(0,c.withDirectives)((0,c.createElementVNode)('input',{'onUpdate:modelValue':l[3]||(l[3]=e=>r.value=e),class:'kv-input',placeholder:e.placeholderValue,disabled:e.disabled,onKeydown:V},null,40,Bl),[[c.vModelText,r.value]]),(0,c.createElementVNode)('button',{type:'button',class:'add-btn',disabled:e.disabled||!n.value.trim(),onClick:p},(0,c.toDisplayString)(e.addButtonText),9,Cl)])):(0,c.createCommentVNode)('v-if',!0),(0,c.createElementVNode)('div',xl,[(0,c.createElementVNode)('span',wl,(0,c.toDisplayString)(o.value.length),1),l[5]||(l[5]=(0,c.createElementVNode)('span',{class:'count-separator'},'/',-1)),(0,c.createElementVNode)('span',Sl,(0,c.toDisplayString)(e.maxItems),1),l[6]||(l[6]=(0,c.createElementVNode)('span',{class:'count-label'},'项',-1))])],2))}}),_l=(0,i.A)(Dl,[['__scopeId','data-v-a1444030']]),Pl=['for'],Fl={key:0,class:'required-mark'},Il=(0,c.defineComponent)({__name:'FormLabel',props:{label:{},required:{type:Boolean,default:!1},htmlFor:{}},setup:e=>(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('label',{for:e.htmlFor,class:(0,c.normalizeClass)(['form-label',{'is-required':e.required}])},[(0,c.renderSlot)(t.$slots,'icon'),(0,c.createElementVNode)('span',null,(0,c.toDisplayString)(e.label),1),e.required?((0,c.openBlock)(),(0,c.createElementBlock)('span',Fl,'*')):(0,c.createCommentVNode)('v-if',!0)],10,Pl))}),$l=(0,i.A)(Il,[['__scopeId','data-v-11a19624']]),Ll={class:'form-number-wrapper'},ql=['min','max','step','placeholder','disabled','readonly'],Tl={key:0,class:'number-controls'},Al=['disabled'],Ml=['disabled'],Ul=(0,c.defineComponent)({__name:'FormNumber',props:{modelValue:{},min:{default:1},max:{default:1e4},step:{default:1},placeholder:{default:''},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},showControls:{type:Boolean,default:!0}},emits:['update:modelValue','change','blur'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.ref)(),n=(0,c.computed)({get:()=>a.modelValue,set:e=>{const t=Number(e);if(!isNaN(t)){const e=Math.max(a.min,Math.min(a.max,t));l('update:modelValue',e),l('change',e)}}}),r=()=>{if(!a.disabled&&!a.readonly){const e=Math.min(a.max,a.modelValue+a.step);l('update:modelValue',e),l('change',e)}},s=()=>{if(!a.disabled&&!a.readonly){const e=Math.max(a.min,a.modelValue-a.step);l('update:modelValue',e),l('change',e)}},i=e=>{let t;t=isNaN(a.modelValue)||null===a.modelValue?a.min:Math.max(a.min,Math.min(a.max,a.modelValue)),t!==a.modelValue&&(l('update:modelValue',t),l('change',t)),o.value&&(o.value.value=String(t)),l('blur',e)};return(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Ll,[(0,c.withDirectives)((0,c.createElementVNode)('input',{ref_key:'inputRef',ref:o,'onUpdate:modelValue':a[0]||(a[0]=e=>n.value=e),type:'number',min:e.min,max:e.max,step:e.step,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,class:(0,c.normalizeClass)(['form-number',{'is-disabled':e.disabled,'is-readonly':e.readonly,'has-controls':e.showControls}]),onBlur:i},null,42,ql),[[c.vModelText,n.value,void 0,{number:!0}]]),e.showControls?((0,c.openBlock)(),(0,c.createElementBlock)('div',Tl,[(0,c.createElementVNode)('button',{type:'button',class:'control-btn up',disabled:e.disabled||e.readonly||e.modelValue>=e.max,onClick:r},' ▲ ',8,Al),(0,c.createElementVNode)('button',{type:'button',class:'control-btn down',disabled:e.disabled||e.readonly||e.modelValue<=e.min,onClick:s},' ▼ ',8,Ml)])):(0,c.createCommentVNode)('v-if',!0)]))}}),Rl=(0,i.A)(Ul,[['__scopeId','data-v-48d2dd58']]),zl=['value','disabled'],jl={class:'radio-label'},Gl=(0,c.defineComponent)({__name:'FormRadio',props:{modelValue:{type:[String,Number,Boolean]},options:{},disabled:{type:Boolean,default:!1},layout:{default:'vertical'}},emits:['update:modelValue','change'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.computed)({get:()=>a.modelValue,set:e=>{l('update:modelValue',e),l('change',e)}}),n=(0,c.computed)(()=>a.options.map(e=>'string'==typeof e?{label:e,value:e,disabled:!1}:e));return(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['form-radio-group',[`layout-${e.layout}`]])},[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(n.value,(t,l)=>((0,c.openBlock)(),(0,c.createElementBlock)('label',{key:l,class:(0,c.normalizeClass)(['radio-option',{'is-checked':o.value===t.value,'is-disabled':e.disabled||t.disabled}])},[(0,c.withDirectives)((0,c.createElementVNode)('input',{'onUpdate:modelValue':a[0]||(a[0]=e=>o.value=e),type:'radio',value:t.value,disabled:e.disabled||t.disabled,class:'radio-input'},null,8,zl),[[c.vModelRadio,o.value]]),a[1]||(a[1]=(0,c.createElementVNode)('span',{class:'radio-indicator'},null,-1)),(0,c.createElementVNode)('span',jl,(0,c.toDisplayString)(t.label),1)],2))),128))],2))}}),Ol=(0,i.A)(Gl,[['__scopeId','data-v-588d959c']]),Kl={class:'selected-text'},Hl={class:'select-dropdown'},Jl={class:'search-box'},Ql=['placeholder'],Wl={class:'options-list'},Xl=['onClick'],Yl=['innerHTML'],Zl={key:0,class:'no-results'},eo={class:'form-select-wrapper'},to=['value','disabled'],ao={key:0,value:'',disabled:''},lo=['value','disabled'],oo=(0,c.defineComponent)({__name:'FormSelect',props:{modelValue:{},options:{},placeholder:{default:'请选择'},disabled:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlaceholder:{default:'搜索...'}},emits:['update:modelValue','change'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.ref)(''),n=(0,c.ref)(!1),r=(0,c.ref)(null),s=(0,c.ref)(null),i=(0,c.computed)(()=>a.options.map(e=>'string'==typeof e?{label:e,value:e,disabled:!1}:e)),d=(0,c.computed)(()=>{if(!o.value.trim())return i.value;const e=o.value.toLowerCase();return i.value.filter(t=>t.label.toLowerCase().includes(e))}),m=(0,c.computed)(()=>{const e=i.value.find(e=>e.value===a.modelValue);return e?e.label:a.placeholder}),u=e=>{if(!o.value.trim())return e;const t=o.value.trim(),a=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')})`,'gi');return e.replace(a,'<mark class="highlight">$1</mark>')},p=()=>{a.disabled||(n.value=!n.value,n.value&&a.searchable&&!('ontouchstart'in window||navigator.maxTouchPoints>0)&&(0,c.nextTick)(()=>{s.value?.focus()}))},v=e=>{r.value&&!r.value.contains(e.target)&&(n.value=!1,o.value='')},f=e=>{'Escape'===e.key&&(n.value=!1,o.value='')},V=e=>{const t=e.target;l('update:modelValue',t.value),l('change',t.value)};return(0,c.onMounted)(()=>{document.addEventListener('click',v),document.addEventListener('keydown',f)}),(0,c.onUnmounted)(()=>{document.removeEventListener('click',v),document.removeEventListener('keydown',f)}),(0,c.watch)(n,e=>{e||(o.value='')}),(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,null,[(0,c.createCommentVNode)(' 可搜索模式：自定义下拉 '),e.searchable?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:0,ref_key:'wrapperRef',ref:r,class:'form-select-wrapper searchable'},[(0,c.createCommentVNode)(' 触发器 '),(0,c.createElementVNode)('div',{class:(0,c.normalizeClass)(['form-select-trigger',{'is-open':n.value,'is-disabled':e.disabled}]),onClick:p},[(0,c.createElementVNode)('span',Kl,(0,c.toDisplayString)(m.value),1),(0,c.createElementVNode)('span',{class:(0,c.normalizeClass)(['select-arrow',{rotated:n.value}])},'▼',2)],2),(0,c.createCommentVNode)(' 下拉面板 '),(0,c.withDirectives)((0,c.createElementVNode)('div',Hl,[(0,c.createCommentVNode)(' 搜索框 '),(0,c.createElementVNode)('div',Jl,[(0,c.withDirectives)((0,c.createElementVNode)('input',{ref_key:'searchInputRef',ref:s,'onUpdate:modelValue':a[0]||(a[0]=e=>o.value=e),type:'text',class:'search-input',placeholder:e.searchPlaceholder,onClick:a[1]||(a[1]=(0,c.withModifiers)(()=>{},['stop']))},null,8,Ql),[[c.vModelText,o.value]]),o.value?((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:0,class:'clear-btn',onClick:a[2]||(a[2]=(0,c.withModifiers)(e=>o.value='',['stop']))},'✕')):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createCommentVNode)(' 选项列表 '),(0,c.createElementVNode)('div',Wl,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(d.value,t=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t.value,class:(0,c.normalizeClass)(['option-item',{'is-selected':t.value===e.modelValue,'is-disabled':t.disabled}]),onClick:e=>(e=>{e.disabled||(l('update:modelValue',e.value),l('change',e.value),n.value=!1,o.value='')})(t)},[(0,c.createCommentVNode)(' eslint-disable-next-line vue/no-v-html '),(0,c.createElementVNode)('span',{innerHTML:u(t.label)},null,8,Yl)],10,Xl))),128)),0===d.value.length?((0,c.openBlock)(),(0,c.createElementBlock)('div',Zl,'无匹配结果')):(0,c.createCommentVNode)('v-if',!0)])],512),[[c.vShow,n.value]])],512)):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createCommentVNode)(' 非搜索模式：原生 select '),(0,c.createElementVNode)('div',eo,[(0,c.createElementVNode)('select',{value:e.modelValue,disabled:e.disabled,class:(0,c.normalizeClass)(['form-select',{'is-disabled':e.disabled}]),onChange:V},[e.placeholder?((0,c.openBlock)(),(0,c.createElementBlock)('option',ao,(0,c.toDisplayString)(e.placeholder),1)):(0,c.createCommentVNode)('v-if',!0),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(i.value,e=>((0,c.openBlock)(),(0,c.createElementBlock)('option',{key:e.value,value:e.value,disabled:e.disabled},(0,c.toDisplayString)(e.label),9,lo))),128))],42,to),a[3]||(a[3]=(0,c.createElementVNode)('span',{class:'select-arrow'},'▼',-1))])],2112))],2112))}}),no=(0,i.A)(oo,[['__scopeId','data-v-4a660eb2']]),ro={class:'form-stepper'},co={key:0,class:'stepper-label'},so={class:'stepper-controls'},io=['disabled'],mo={class:'stepper-value'},uo=['disabled'],po=(0,c.defineComponent)({__name:'FormStepper',props:{modelValue:{},min:{default:0},max:{default:100},step:{default:1},disabled:{type:Boolean,default:!1},disableIncrement:{type:Boolean,default:!1},label:{}},emits:['update:modelValue','increment','decrement'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.computed)(()=>!a.disabled&&a.modelValue>a.min),n=(0,c.computed)(()=>!a.disabled&&!a.disableIncrement&&a.modelValue<a.max),r=()=>{if(n.value){const e=Math.min(a.max,a.modelValue+a.step);l('update:modelValue',e),l('increment')}},s=()=>{if(o.value){const e=Math.max(a.min,a.modelValue-a.step);l('update:modelValue',e),l('decrement')}};return(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',ro,[e.label?((0,c.openBlock)(),(0,c.createElementBlock)('span',co,(0,c.toDisplayString)(e.label),1)):(0,c.createCommentVNode)('v-if',!0),(0,c.createElementVNode)('div',so,[(0,c.createElementVNode)('button',{type:'button',class:'stepper-btn decrement',disabled:!o.value,onClick:s},' − ',8,io),(0,c.createElementVNode)('span',mo,(0,c.toDisplayString)(e.modelValue),1),(0,c.createElementVNode)('button',{type:'button',class:'stepper-btn increment',disabled:!n.value,onClick:r},' + ',8,uo)])]))}}),vo=(0,i.A)(po,[['__scopeId','data-v-bf006b3c']]),fo={common:{min:5,max:30},uncommon:{min:20,max:60},rare:{min:35,max:100},epic:{min:80,max:200},legendary:{min:150,max:400},mythic:{min:300,max:1e3},only:{min:666,max:666}};const Vo=[100,213,456,2678,4642,8318,9999];const ko={class:'attribute-grid'},No={class:'total-points'},yo={class:'total-value'},Eo=(0,c.defineComponent)({__name:'AttributeEditor',props:{modelValue:{},min:{default:1},max:{default:100},disabled:{type:Boolean,default:!1}},emits:['update:modelValue'],setup(e,{emit:t}){const a=e,l=t,o=[{key:'strength',label:'力量',icon:'fa-solid fa-dumbbell'},{key:'dexterity',label:'敏捷',icon:'fa-solid fa-person-running'},{key:'constitution',label:'体质',icon:'fa-solid fa-heart-pulse'},{key:'intelligence',label:'智力',icon:'fa-solid fa-brain'},{key:'mind',label:'精神',icon:'fa-solid fa-wand-magic-sparkles'}],n=(0,c.computed)(()=>Object.values(a.modelValue).reduce((e,t)=>e+t,0));return(t,r)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['attribute-editor',{'is-disabled':e.disabled}])},[(0,c.createElementVNode)('div',ko,[((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(o,t=>(0,c.createElementVNode)('div',{key:t.key,class:'attribute-item'},[(0,c.createVNode)((0,c.unref)($l),{label:t.label},{icon:(0,c.withCtx)(()=>[(0,c.createElementVNode)('i',{class:(0,c.normalizeClass)(['label-icon',t.icon]),'aria-hidden':'true'},null,2)]),_:2},1032,['label']),(0,c.createVNode)((0,c.unref)(Rl),{'model-value':e.modelValue[t.key],min:e.min,max:e.max,disabled:e.disabled,'onUpdate:modelValue':e=>{return o=t.key,n=e,void l('update:modelValue',{...a.modelValue,[o]:n});var o,n}},null,8,['model-value','min','max','disabled','onUpdate:modelValue'])])),64))]),(0,c.createElementVNode)('div',No,[r[0]||(r[0]=(0,c.createElementVNode)('span',{class:'total-label'},'属性总和：',-1)),(0,c.createElementVNode)('span',yo,(0,c.toDisplayString)(n.value),1)])],2))}}),go=(0,i.A)(Eo,[['__scopeId','data-v-e089f256']]),bo=go,ho={key:0,class:'equipment-list'},Bo={key:0,class:'edit-form'},Co={class:'form-row'},xo={class:'form-row-group'},wo={class:'form-row half'},So={class:'form-row half'},Do={class:'form-row'},_o={class:'form-row'},Po={class:'form-row'},Fo={class:'edit-actions'},Io=['disabled'],$o={class:'item-header'},Lo={class:'item-type'},qo={class:'item-name'},To={key:0,class:'item-tag'},Ao={key:1,class:'item-effect'},Mo={class:'effect-list'},Uo={class:'effect-key'},Ro={class:'effect-value'},zo={key:2,class:'item-description'},jo={class:'item-actions'},Go=['disabled','onClick'],Oo=['disabled','onClick'],Ko={key:2,class:'add-form'},Ho={class:'form-row'},Jo={class:'form-row-group'},Qo={class:'form-row half'},Wo={class:'form-row half'},Xo={class:'form-row'},Yo={class:'form-row'},Zo={class:'form-row'},en={class:'add-form-actions'},tn=['disabled'],an={key:3,class:'add-section'},ln=['disabled'],on={class:'count-info'},nn={class:'count-current'},rn={class:'count-max'},cn=(0,c.defineComponent)({__name:'EquipmentEditor',props:{modelValue:{},maxItems:{default:10},disabled:{type:Boolean,default:!1}},emits:['update:modelValue'],setup(e,{emit:t}){const a=e,l=t,o=p.map(e=>({label:e.label,value:e.value})),n=v.map(e=>({label:e.label,value:e.value})),r=(0,c.ref)(null),s=(0,c.ref)({name:'',type:v[0].value,tag:[],rarity:'common',effect:{},description:''}),i=(0,c.ref)(null),d=(0,c.ref)(!1),m=(0,c.computed)(()=>!a.disabled&&a.modelValue.length<a.maxItems),u=()=>{s.value={name:'',type:v[0].value,tag:[],rarity:'common',effect:{},description:''}},f=()=>{if(!m.value||!s.value.name.trim())return;const e={...s.value,name:s.value.name.trim(),tag:s.value.tag.filter(e=>''!==e.trim()),effect:{...s.value.effect},description:s.value.description?.trim()||''};l('update:modelValue',[...a.modelValue,e]),u(),d.value=!1},V=()=>{if(null===r.value||!i.value)return;const e=[...a.modelValue];e[r.value]={...i.value,name:i.value.name.trim(),tag:i.value.tag.filter(e=>''!==e.trim()),effect:{...i.value.effect},description:i.value.description?.trim()||''},l('update:modelValue',e),y()},y=()=>{r.value=null,i.value=null},E=()=>{d.value=!d.value,d.value||u()};return(0,c.watch)(()=>a.disabled,e=>{e&&(y(),d.value=!1)}),(t,u)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['equipment-editor',{'is-disabled':e.disabled}])},[(0,c.createCommentVNode)(' 装备列表 '),e.modelValue.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',ho,[(0,c.createVNode)(c.TransitionGroup,{name:'equip-list'},{default:(0,c.withCtx)(()=>[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.modelValue,(t,s)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:`equip-${s}-${t.name}`,class:(0,c.normalizeClass)(['equipment-item',{editing:r.value===s}])},[(0,c.createCommentVNode)(' 编辑模式 '),r.value===s&&i.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',Bo,[(0,c.createElementVNode)('div',Co,[(0,c.createVNode)((0,c.unref)($l),{label:'装备名称'}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:i.value.name,'onUpdate:modelValue':u[0]||(u[0]=e=>i.value.name=e),placeholder:'请输入装备名称'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',xo,[(0,c.createElementVNode)('div',wo,[(0,c.createVNode)((0,c.unref)($l),{label:'类型'}),(0,c.createVNode)((0,c.unref)(no),{modelValue:i.value.type,'onUpdate:modelValue':u[1]||(u[1]=e=>i.value.type=e),options:(0,c.unref)(n)},null,8,['modelValue','options'])]),(0,c.createElementVNode)('div',So,[(0,c.createVNode)((0,c.unref)($l),{label:'品质'}),(0,c.createVNode)((0,c.unref)(no),{modelValue:i.value.rarity,'onUpdate:modelValue':u[2]||(u[2]=e=>i.value.rarity=e),options:(0,c.unref)(o)},null,8,['modelValue','options'])])]),(0,c.createElementVNode)('div',Do,[(0,c.createVNode)((0,c.unref)($l),{label:'标签'}),(0,c.createVNode)((0,c.unref)(Ra),{modelValue:i.value.tag,'onUpdate:modelValue':u[3]||(u[3]=e=>i.value.tag=e),placeholder:'输入标签后按回车添加或保存','add-button-text':'添加标签','empty-text':'暂无标签'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',_o,[(0,c.createVNode)((0,c.unref)($l),{label:'效果'}),(0,c.createVNode)((0,c.unref)(_l),{modelValue:i.value.effect,'onUpdate:modelValue':u[4]||(u[4]=e=>i.value.effect=e),'placeholder-key':'效果名','placeholder-value':'效果内容','add-button-text':'添加效果','empty-text':'暂无效果条目'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Po,[(0,c.createVNode)((0,c.unref)($l),{label:'描述'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:i.value.description,'onUpdate:modelValue':u[5]||(u[5]=e=>i.value.description=e),rows:2,placeholder:'请输入装备描述（可选）'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Fo,[(0,c.createElementVNode)('button',{type:'button',class:'btn-cancel',onClick:y},'取消'),(0,c.createElementVNode)('button',{type:'button',class:'btn-save',disabled:!i.value.name.trim(),onClick:V},' 保存 ',8,Io)])])):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createCommentVNode)(' 显示模式 '),(0,c.createElementVNode)('div',$o,[(0,c.createElementVNode)('span',Lo,(0,c.toDisplayString)(t.type||'武器'),1),(0,c.createElementVNode)('span',qo,(0,c.toDisplayString)(t.name),1),(0,c.createElementVNode)('span',{class:'item-rarity',style:(0,c.normalizeStyle)({'--rarity-color':(0,c.unref)(N)(t.rarity)})},(0,c.toDisplayString)((0,c.unref)(k)(t.rarity)),5)]),t.tag&&t.tag.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',To,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(t.tag,e=>((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:e,class:'tag-text'},(0,c.toDisplayString)(e),1))),128))])):(0,c.createCommentVNode)('v-if',!0),Object.keys(t.effect||{}).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ao,[u[12]||(u[12]=(0,c.createElementVNode)('span',{class:'effect-label'},'效果：',-1)),(0,c.createElementVNode)('div',Mo,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(t.effect,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'effect-row'},[(0,c.createElementVNode)('span',Uo,(0,c.toDisplayString)(t)+'：',1),(0,c.createElementVNode)('span',Ro,(0,c.toDisplayString)(e),1)]))),128))])])):(0,c.createCommentVNode)('v-if',!0),t.description?((0,c.openBlock)(),(0,c.createElementBlock)('div',zo,(0,c.toDisplayString)(t.description),1)):(0,c.createCommentVNode)('v-if',!0),(0,c.createElementVNode)('div',jo,[(0,c.createElementVNode)('button',{type:'button',class:'action-btn edit',title:'编辑',disabled:e.disabled,onClick:e=>(e=>{a.disabled||(r.value=e,i.value={...a.modelValue[e]})})(s)},[...u[13]||(u[13]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-pen-to-square','aria-hidden':'true'},null,-1),(0,c.createTextVNode)(' 编辑 ',-1)])],8,Go),(0,c.createElementVNode)('button',{type:'button',class:'action-btn delete',title:'删除',disabled:e.disabled,onClick:e=>(e=>{if(a.disabled)return;const t=[...a.modelValue];t.splice(e,1),l('update:modelValue',t)})(s)},[...u[14]||(u[14]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-trash','aria-hidden':'true'},null,-1),(0,c.createTextVNode)(' 删除 ',-1)])],8,Oo)])],64))],2))),128))]),_:1})])):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createCommentVNode)(' 空状态 '),u[15]||(u[15]=(0,c.createElementVNode)('div',{class:'empty-state'},[(0,c.createElementVNode)('span',{class:'empty-icon'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-shield-halved','aria-hidden':'true'})]),(0,c.createElementVNode)('span',{class:'empty-text'},'暂无装备，点击下方按钮添加')],-1))],2112)),(0,c.createCommentVNode)(' 添加装备表单 '),d.value&&m.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ko,[(0,c.createElementVNode)('div',{class:'add-form-header'},[u[17]||(u[17]=(0,c.createElementVNode)('span',{class:'form-title'},'添加新装备',-1)),(0,c.createElementVNode)('button',{type:'button',class:'close-btn',onClick:E},[...u[16]||(u[16]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark','aria-hidden':'true'},null,-1)])])]),(0,c.createElementVNode)('div',Ho,[(0,c.createVNode)((0,c.unref)($l),{label:'装备名称',required:''}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:s.value.name,'onUpdate:modelValue':u[6]||(u[6]=e=>s.value.name=e),placeholder:'请输入装备名称'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Jo,[(0,c.createElementVNode)('div',Qo,[(0,c.createVNode)((0,c.unref)($l),{label:'类型'}),(0,c.createVNode)((0,c.unref)(no),{modelValue:s.value.type,'onUpdate:modelValue':u[7]||(u[7]=e=>s.value.type=e),options:(0,c.unref)(n)},null,8,['modelValue','options'])]),(0,c.createElementVNode)('div',Wo,[(0,c.createVNode)((0,c.unref)($l),{label:'品质'}),(0,c.createVNode)((0,c.unref)(no),{modelValue:s.value.rarity,'onUpdate:modelValue':u[8]||(u[8]=e=>s.value.rarity=e),options:(0,c.unref)(o)},null,8,['modelValue','options'])])]),(0,c.createElementVNode)('div',Xo,[(0,c.createVNode)((0,c.unref)($l),{label:'标签'}),(0,c.createVNode)((0,c.unref)(Ra),{modelValue:s.value.tag,'onUpdate:modelValue':u[9]||(u[9]=e=>s.value.tag=e),placeholder:'输入标签后按回车添加或保存','add-button-text':'添加标签','empty-text':'暂无标签'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Yo,[(0,c.createVNode)((0,c.unref)($l),{label:'效果'}),(0,c.createVNode)((0,c.unref)(_l),{modelValue:s.value.effect,'onUpdate:modelValue':u[10]||(u[10]=e=>s.value.effect=e),'placeholder-key':'效果名','placeholder-value':'效果内容','add-button-text':'添加效果','empty-text':'暂无效果条目'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Zo,[(0,c.createVNode)((0,c.unref)($l),{label:'描述'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:s.value.description,'onUpdate:modelValue':u[11]||(u[11]=e=>s.value.description=e),rows:2,placeholder:'请输入装备描述（可选）'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',en,[(0,c.createElementVNode)('button',{type:'button',class:'btn-cancel',onClick:E},'取消'),(0,c.createElementVNode)('button',{type:'button',class:'btn-add',disabled:!s.value.name.trim(),onClick:f},' 添加装备 ',8,tn)])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 添加按钮 '),m.value&&!d.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',an,[(0,c.createElementVNode)('button',{type:'button',class:'add-btn',disabled:e.disabled,onClick:E},[...u[18]||(u[18]=[(0,c.createElementVNode)('span',{class:'add-icon'},'+',-1),(0,c.createElementVNode)('span',{class:'add-text'},'添加装备',-1)])],8,ln)])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 数量提示 '),(0,c.createElementVNode)('div',on,[(0,c.createElementVNode)('span',nn,(0,c.toDisplayString)(e.modelValue.length),1),u[19]||(u[19]=(0,c.createElementVNode)('span',{class:'count-separator'},'/',-1)),(0,c.createElementVNode)('span',rn,(0,c.toDisplayString)(e.maxItems),1),u[20]||(u[20]=(0,c.createElementVNode)('span',{class:'count-label'},'件装备',-1))])],2))}}),sn=(0,i.A)(cn,[['__scopeId','data-v-8ad64c50']]),dn=sn,mn={key:0,class:'skill-list'},un={key:0,class:'edit-form'},pn={class:'form-row'},vn={class:'form-row-group'},fn={class:'form-row half'},Vn={class:'form-row half'},kn={class:'form-row'},Nn={class:'form-row'},yn={class:'form-row'},En={class:'form-row'},gn={class:'edit-actions'},bn=['disabled'],hn={class:'item-header'},Bn={class:'item-type'},Cn={class:'item-name'},xn={key:0,class:'item-tag'},wn={key:1,class:'item-consume'},Sn={class:'consume-text'},Dn={key:2,class:'item-effect'},_n={class:'effect-list'},Pn={class:'effect-key'},Fn={class:'effect-value'},In={key:3,class:'item-description'},$n={class:'item-actions'},Ln=['disabled','onClick'],qn=['disabled','onClick'],Tn={key:2,class:'add-form'},An={class:'form-row'},Mn={class:'form-row-group'},Un={class:'form-row half'},Rn={class:'form-row half'},zn={class:'form-row'},jn={class:'form-row'},Gn={class:'form-row'},On={class:'form-row'},Kn={class:'add-form-actions'},Hn=['disabled'],Jn={key:3,class:'add-section'},Qn=['disabled'],Wn={class:'count-info'},Xn={class:'count-current'},Yn={class:'count-max'},Zn=(0,c.defineComponent)({__name:'SkillEditor',props:{modelValue:{},maxItems:{default:20},disabled:{type:Boolean,default:!1}},emits:['update:modelValue'],setup(e,{emit:t}){const a=e,l=t,o=p.map(e=>({label:e.label,value:e.value})),n=f.map(e=>({label:e.label,value:e.value})),r=(0,c.ref)(null),s=(0,c.ref)({name:'',type:f[0].value,tag:[],rarity:'common',consume:'',effect:{},description:''}),i=(0,c.ref)(null),d=(0,c.ref)(!1),m=(0,c.computed)(()=>!a.disabled&&a.modelValue.length<a.maxItems),u=()=>{s.value={name:'',type:f[0].value,tag:[],rarity:'common',consume:'',effect:{},description:''}},v=()=>{if(!m.value||!s.value.name.trim())return;const e={...s.value,name:s.value.name.trim(),tag:s.value.tag.filter(e=>''!==e.trim()),consume:s.value.consume?.trim()||'',effect:{...s.value.effect},description:s.value.description?.trim()||''};l('update:modelValue',[...a.modelValue,e]),u(),d.value=!1},V=()=>{if(null===r.value||!i.value)return;const e=[...a.modelValue];e[r.value]={...i.value,name:i.value.name.trim(),tag:i.value.tag.filter(e=>''!==e.trim()),consume:i.value.consume?.trim()||'',effect:{...i.value.effect},description:i.value.description?.trim()||''},l('update:modelValue',e),y()},y=()=>{r.value=null,i.value=null},E=()=>{d.value=!d.value,d.value||u()};return(0,c.watch)(()=>a.disabled,e=>{e&&(y(),d.value=!1)}),(t,u)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['skill-editor',{'is-disabled':e.disabled}])},[(0,c.createCommentVNode)(' 技能列表 '),e.modelValue.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',mn,[(0,c.createVNode)(c.TransitionGroup,{name:'skill-list'},{default:(0,c.withCtx)(()=>[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.modelValue,(t,s)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:`skill-${s}-${t.name}`,class:(0,c.normalizeClass)(['skill-item',{editing:r.value===s}])},[(0,c.createCommentVNode)(' 编辑模式 '),r.value===s&&i.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',un,[(0,c.createElementVNode)('div',pn,[(0,c.createVNode)((0,c.unref)($l),{label:'技能名称'}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:i.value.name,'onUpdate:modelValue':u[0]||(u[0]=e=>i.value.name=e),placeholder:'请输入技能名称'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',vn,[(0,c.createElementVNode)('div',fn,[(0,c.createVNode)((0,c.unref)($l),{label:'类型'}),(0,c.createVNode)((0,c.unref)(no),{modelValue:i.value.type,'onUpdate:modelValue':u[1]||(u[1]=e=>i.value.type=e),options:(0,c.unref)(n)},null,8,['modelValue','options'])]),(0,c.createElementVNode)('div',Vn,[(0,c.createVNode)((0,c.unref)($l),{label:'品质'}),(0,c.createVNode)((0,c.unref)(no),{modelValue:i.value.rarity,'onUpdate:modelValue':u[2]||(u[2]=e=>i.value.rarity=e),options:(0,c.unref)(o)},null,8,['modelValue','options'])])]),(0,c.createElementVNode)('div',kn,[(0,c.createVNode)((0,c.unref)($l),{label:'标签'}),(0,c.createVNode)((0,c.unref)(Ra),{modelValue:i.value.tag,'onUpdate:modelValue':u[3]||(u[3]=e=>i.value.tag=e),placeholder:'输入标签后按回车添加或保存','add-button-text':'添加标签','empty-text':'暂无标签'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Nn,[(0,c.createVNode)((0,c.unref)($l),{label:'消耗'}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:i.value.consume,'onUpdate:modelValue':u[4]||(u[4]=e=>i.value.consume=e),placeholder:'例如：[攻击:50MP] 或 [动作:30SP]'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',yn,[(0,c.createVNode)((0,c.unref)($l),{label:'效果'}),(0,c.createVNode)((0,c.unref)(_l),{modelValue:i.value.effect,'onUpdate:modelValue':u[5]||(u[5]=e=>i.value.effect=e),'placeholder-key':'效果名','placeholder-value':'效果内容','add-button-text':'添加效果','empty-text':'暂无效果条目'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',En,[(0,c.createVNode)((0,c.unref)($l),{label:'描述'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:i.value.description,'onUpdate:modelValue':u[6]||(u[6]=e=>i.value.description=e),rows:2,placeholder:'请输入技能描述（可选）'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',gn,[(0,c.createElementVNode)('button',{type:'button',class:'btn-cancel',onClick:y},'取消'),(0,c.createElementVNode)('button',{type:'button',class:'btn-save',disabled:!i.value.name.trim(),onClick:V},' 保存 ',8,bn)])])):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createCommentVNode)(' 显示模式 '),(0,c.createElementVNode)('div',hn,[(0,c.createElementVNode)('span',Bn,(0,c.toDisplayString)(t.type||'主动'),1),(0,c.createElementVNode)('span',Cn,(0,c.toDisplayString)(t.name),1),(0,c.createElementVNode)('span',{class:'item-rarity',style:(0,c.normalizeStyle)({'--rarity-color':(0,c.unref)(N)(t.rarity)})},(0,c.toDisplayString)((0,c.unref)(k)(t.rarity)),5)]),t.tag&&t.tag.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',xn,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(t.tag,e=>((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:e,class:'tag-text'},(0,c.toDisplayString)(e),1))),128))])):(0,c.createCommentVNode)('v-if',!0),t.consume?((0,c.openBlock)(),(0,c.createElementBlock)('div',wn,[u[14]||(u[14]=(0,c.createElementVNode)('span',{class:'consume-label'},'消耗：',-1)),(0,c.createElementVNode)('span',Sn,(0,c.toDisplayString)(t.consume),1)])):(0,c.createCommentVNode)('v-if',!0),Object.keys(t.effect||{}).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Dn,[u[15]||(u[15]=(0,c.createElementVNode)('span',{class:'effect-label'},'效果：',-1)),(0,c.createElementVNode)('div',_n,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(t.effect,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'effect-row'},[(0,c.createElementVNode)('span',Pn,(0,c.toDisplayString)(t)+'：',1),(0,c.createElementVNode)('span',Fn,(0,c.toDisplayString)(e),1)]))),128))])])):(0,c.createCommentVNode)('v-if',!0),t.description?((0,c.openBlock)(),(0,c.createElementBlock)('div',In,(0,c.toDisplayString)(t.description),1)):(0,c.createCommentVNode)('v-if',!0),(0,c.createElementVNode)('div',$n,[(0,c.createElementVNode)('button',{type:'button',class:'action-btn edit',title:'编辑',disabled:e.disabled,onClick:e=>(e=>{a.disabled||(r.value=e,i.value={...a.modelValue[e]})})(s)},[...u[16]||(u[16]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-pen-to-square','aria-hidden':'true'},null,-1),(0,c.createTextVNode)(' 编辑 ',-1)])],8,Ln),(0,c.createElementVNode)('button',{type:'button',class:'action-btn delete',title:'删除',disabled:e.disabled,onClick:e=>(e=>{if(a.disabled)return;const t=[...a.modelValue];t.splice(e,1),l('update:modelValue',t)})(s)},[...u[17]||(u[17]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-trash','aria-hidden':'true'},null,-1),(0,c.createTextVNode)(' 删除 ',-1)])],8,qn)])],64))],2))),128))]),_:1})])):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[(0,c.createCommentVNode)(' 空状态 '),u[18]||(u[18]=(0,c.createElementVNode)('div',{class:'empty-state'},[(0,c.createElementVNode)('span',{class:'empty-icon'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-wand-magic','aria-hidden':'true'})]),(0,c.createElementVNode)('span',{class:'empty-text'},'暂无技能，点击下方按钮添加')],-1))],2112)),(0,c.createCommentVNode)(' 添加技能表单 '),d.value&&m.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',Tn,[(0,c.createElementVNode)('div',{class:'add-form-header'},[u[20]||(u[20]=(0,c.createElementVNode)('span',{class:'form-title'},'添加新技能',-1)),(0,c.createElementVNode)('button',{type:'button',class:'close-btn',onClick:E},[...u[19]||(u[19]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark','aria-hidden':'true'},null,-1)])])]),(0,c.createElementVNode)('div',An,[(0,c.createVNode)((0,c.unref)($l),{label:'技能名称',required:''}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:s.value.name,'onUpdate:modelValue':u[7]||(u[7]=e=>s.value.name=e),placeholder:'请输入技能名称'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Mn,[(0,c.createElementVNode)('div',Un,[(0,c.createVNode)((0,c.unref)($l),{label:'类型'}),(0,c.createVNode)((0,c.unref)(no),{modelValue:s.value.type,'onUpdate:modelValue':u[8]||(u[8]=e=>s.value.type=e),options:(0,c.unref)(n)},null,8,['modelValue','options'])]),(0,c.createElementVNode)('div',Rn,[(0,c.createVNode)((0,c.unref)($l),{label:'品质'}),(0,c.createVNode)((0,c.unref)(no),{modelValue:s.value.rarity,'onUpdate:modelValue':u[9]||(u[9]=e=>s.value.rarity=e),options:(0,c.unref)(o)},null,8,['modelValue','options'])])]),(0,c.createElementVNode)('div',zn,[(0,c.createVNode)((0,c.unref)($l),{label:'标签'}),(0,c.createVNode)((0,c.unref)(Ra),{modelValue:s.value.tag,'onUpdate:modelValue':u[10]||(u[10]=e=>s.value.tag=e),placeholder:'输入标签后按回车添加或保存','add-button-text':'添加标签','empty-text':'暂无标签'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',jn,[(0,c.createVNode)((0,c.unref)($l),{label:'消耗'}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:s.value.consume,'onUpdate:modelValue':u[11]||(u[11]=e=>s.value.consume=e),placeholder:'例如：[攻击:50MP] 或 [动作:30SP]'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Gn,[(0,c.createVNode)((0,c.unref)($l),{label:'效果'}),(0,c.createVNode)((0,c.unref)(_l),{modelValue:s.value.effect,'onUpdate:modelValue':u[12]||(u[12]=e=>s.value.effect=e),'placeholder-key':'效果名','placeholder-value':'效果内容','add-button-text':'添加效果','empty-text':'暂无效果条目'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',On,[(0,c.createVNode)((0,c.unref)($l),{label:'描述'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:s.value.description,'onUpdate:modelValue':u[13]||(u[13]=e=>s.value.description=e),rows:2,placeholder:'请输入技能描述（可选）'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',Kn,[(0,c.createElementVNode)('button',{type:'button',class:'btn-cancel',onClick:E},'取消'),(0,c.createElementVNode)('button',{type:'button',class:'btn-add',disabled:!s.value.name.trim(),onClick:v},' 添加技能 ',8,Hn)])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 添加按钮 '),m.value&&!d.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',Jn,[(0,c.createElementVNode)('button',{type:'button',class:'add-btn',disabled:e.disabled,onClick:E},[...u[21]||(u[21]=[(0,c.createElementVNode)('span',{class:'add-icon'},'+',-1),(0,c.createElementVNode)('span',{class:'add-text'},'添加技能',-1)])],8,Qn)])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 数量提示 '),(0,c.createElementVNode)('div',Wn,[(0,c.createElementVNode)('span',Xn,(0,c.toDisplayString)(e.modelValue.length),1),u[22]||(u[22]=(0,c.createElementVNode)('span',{class:'count-separator'},'/',-1)),(0,c.createElementVNode)('span',Yn,(0,c.toDisplayString)(e.maxItems),1),u[23]||(u[23]=(0,c.createElementVNode)('span',{class:'count-label'},'个技能',-1))])],2))}}),er=(0,i.A)(Zn,[['__scopeId','data-v-1821fd54']]),tr=er,ar={class:'form-body'},lr={class:'form-row'},or={class:'form-row'},nr={class:'level-buttons'},rr=['onClick'],cr={class:'cost-info'},sr={class:'cost-value'},ir={class:'form-row'},dr={class:'form-row'},mr={class:'field-hint'},ur={class:'form-row'},pr={class:'form-row'},vr={class:'form-row'},fr={class:'form-row'},Vr={class:'form-row'},kr={class:'form-row'},Nr={class:'form-row'},yr={class:'form-row'},Er={class:'form-row'},gr={class:'form-row'},br={class:'form-row'},hr={key:0,class:'field-hint'},Br={class:'form-row'},Cr={class:'form-row'},xr={class:'form-row'},wr={class:'form-row'},Sr={class:'form-actions'},Dr=['disabled'],_r=(0,c.defineComponent)({__name:'CustomPartnerForm',emits:['add'],setup(e,{expose:t,emit:a}){const l=a,n=q(),r=(0,c.ref)(!1),s=(0,c.computed)(()=>n.editingCustomPartnerName),i=(0,c.computed)(()=>''!==s.value.trim()),d=()=>{n.updateEditingCustomPartnerName(''),n.resetCustomPartnerForm()},m={1:{name:'第一层级 (普通)',minGrade:1,maxGrade:4},2:{name:'第二层级 (中坚)',minGrade:5,maxGrade:8},3:{name:'第三层级 (精英)',minGrade:9,maxGrade:12},4:{name:'第四层级 (史诗)',minGrade:13,maxGrade:16},5:{name:'第五层级 (传说)',minGrade:17,maxGrade:20},6:{name:'第六层级 (神话)',minGrade:21,maxGrade:24},7:{name:'第七层级 (神祗)',minGrade:25,maxGrade:25}},u=[{label:'是',value:!0},{label:'否',value:!1}],p={strength:5,dexterity:5,constitution:5,intelligence:5,mind:5},v=(0,c.computed)({get:()=>n.customPartnerForm.itemName,set:e=>n.updateCustomPartnerForm('itemName',e)}),f=(0,c.computed)({get:()=>n.customPartnerForm.itemLevel,set:e=>n.updateCustomPartnerForm('itemLevel',e)}),V=(0,c.computed)({get:()=>n.customPartnerForm.itemLifeLevel,set:e=>n.updateCustomPartnerForm('itemLifeLevel',e)}),k=(0,c.computed)({get:()=>n.customPartnerForm.itemGrade,set:e=>n.updateCustomPartnerForm('itemGrade',e)}),N=(0,c.computed)({get:()=>n.customPartnerForm.itemRace,set:e=>n.updateCustomPartnerForm('itemRace',e)}),y=(0,c.computed)({get:()=>n.customPartnerForm.itemIdentity,set:e=>n.updateCustomPartnerForm('itemIdentity',e)}),E=(0,c.computed)({get:()=>n.customPartnerForm.itemCareer,set:e=>n.updateCustomPartnerForm('itemCareer',e)}),g=(0,c.computed)({get:()=>n.customPartnerForm.itemPersonality,set:e=>n.updateCustomPartnerForm('itemPersonality',e)}),b=(0,c.computed)({get:()=>n.customPartnerForm.itemLike,set:e=>n.updateCustomPartnerForm('itemLike',e)}),h=(0,c.computed)({get:()=>n.customPartnerForm.itemApp,set:e=>n.updateCustomPartnerForm('itemApp',e)}),B=(0,c.computed)({get:()=>n.customPartnerForm.itemCloth,set:e=>n.updateCustomPartnerForm('itemCloth',e)}),C=(0,c.computed)({get:()=>n.customPartnerForm.itemEquip,set:e=>n.updateCustomPartnerForm('itemEquip',e)}),x=(0,c.computed)({get:()=>n.customPartnerForm.itemAttributes,set:e=>n.updateCustomPartnerForm('itemAttributes',e)}),w=(0,c.computed)({get:()=>n.customPartnerForm.itemStairway,set:e=>n.updateCustomPartnerForm('itemStairway',e)}),S=(0,c.computed)({get:()=>n.customPartnerForm.itemIsContract,set:e=>n.updateCustomPartnerForm('itemIsContract',e)}),D=(0,c.computed)({get:()=>n.customPartnerForm.itemAffinity,set:e=>n.updateCustomPartnerForm('itemAffinity',e)}),P=(0,c.computed)({get:()=>n.customPartnerForm.itemComment,set:e=>n.updateCustomPartnerForm('itemComment',e)}),F=(0,c.computed)({get:()=>n.customPartnerForm.itemBackgroundInfo,set:e=>n.updateCustomPartnerForm('itemBackgroundInfo',e)}),I=(0,c.computed)({get:()=>n.customPartnerForm.itemSkills,set:e=>n.updateCustomPartnerForm('itemSkills',e)}),L=(0,c.ref)(!1),T=(0,c.ref)(!1),A=(0,c.computed)(()=>function(e){if(e<1||e>7)throw new Error('层级必须在 1 到 7 之间');return Vo[e-1]}(f.value)),M=(0,c.computed)(()=>m[f.value]),U=(0,c.computed)(()=>''!==v.value.trim()&&''!==N.value.trim());(0,c.watch)(()=>f.value,e=>{const t=m[e];t&&(V.value=t.name,(k.value<t.minGrade||k.value>t.maxGrade)&&(k.value=t.minGrade))},{immediate:!0});const R=()=>{n.resetCustomPartnerForm();const e=m[f.value];e&&(V.value=e.name)};t({fillFormByPartner:e=>{const t=(e=>{if(!e.trim())return 1;const t=_.findKey(m,t=>e.includes(t.name));return t?Number(t):1})(e.lifeLevel||''),a=e.level||m[t].minGrade;n.setCustomPartnerForm({itemName:e.name||'',itemLevel:t,itemLifeLevel:e.lifeLevel||m[t].name,itemGrade:a,itemRace:e.race||'',itemIdentity:e.identity?[...e.identity]:[],itemCareer:e.career?[...e.career]:[],itemPersonality:e.personality||'',itemLike:e.like||'',itemApp:e.app||'',itemCloth:e.cloth||'',itemEquip:e.equip?e.equip.map(e=>{return{name:(t=e).name||'未知装备',type:t.type||'未知',tag:t.tag?[...t.tag]:[],rarity:t.rarity||'common',effect:t.effect?{...t.effect}:{},description:t.description||''};var t}):[],itemAttributes:e.attributes?o(e.attributes):o(p),itemStairway:e.stairway?.elements?.custom?.desc||'',itemIsContract:Boolean(e.isContract),itemAffinity:e.affinity??0,itemComment:e.comment||'',itemBackgroundInfo:e.backgroundInfo||'',itemSkills:e.skills?e.skills.map(e=>{return{name:(t=e).name||'未知技能',type:t.type||'未知',tag:t.tag?[...t.tag]:[],rarity:t.rarity||'common',consume:t.consume||'',effect:t.effect?{...t.effect}:{},description:t.description||''};var t}):[]}),n.updateEditingCustomPartnerName(e.name||''),r.value=!0}});const j=()=>{L.value=!0},G=()=>{L.value=!1,R()},O=()=>{L.value=!1},K=()=>{U.value&&(T.value=!0)},H=()=>{T.value=!1},J=()=>{T.value=!1;const e={name:v.value.trim(),cost:A.value,lifeLevel:V.value.trim()||'未知',level:k.value,race:N.value.trim(),identity:o(y.value),career:o(E.value),personality:g.value.trim()||'未知',like:b.value.trim()||'未知',app:h.value.trim()||'未知',cloth:B.value.trim()||'未知',equip:o(C.value).map(e=>({...e,rarity:e.rarity})),attributes:o(x.value),stairway:(t=w.value,t.trim()?{isOpen:!0,elements:{custom:{desc:t}}}:{isOpen:!1}),isContract:S.value,affinity:D.value,comment:P.value.trim(),backgroundInfo:F.value.trim(),skills:o(I.value).map(e=>({...e,rarity:e.rarity})),isCustom:!0};var t;l('add',e,s.value.trim()),R()};return(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['custom-destined-form',{expanded:r.value}])},[(0,c.createElementVNode)('div',{class:'form-header',onClick:t[0]||(t[0]=e=>r.value=!r.value)},[t[19]||(t[19]=(0,c.createElementVNode)('div',{class:'header-left'},[(0,c.createElementVNode)('h3',{class:'form-title'},'✨ 自定义伙伴'),(0,c.createElementVNode)('div',{class:'form-desc'},'创建您的专属伙伴')],-1)),(0,c.createElementVNode)('div',{class:(0,c.normalizeClass)(['toggle-icon',{rotated:r.value}])},'▼',2)]),(0,c.withDirectives)((0,c.createElementVNode)('div',ar,[(0,c.createCommentVNode)(' 姓名 '),(0,c.createElementVNode)('div',lr,[(0,c.createVNode)((0,c.unref)($l),{label:'姓名',required:''}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:v.value,'onUpdate:modelValue':t[1]||(t[1]=e=>v.value=e),placeholder:'请输入姓名',maxlength:50},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 层级 '),(0,c.createElementVNode)('div',or,[(0,c.createVNode)((0,c.unref)($l),{label:'层级',required:''}),(0,c.createElementVNode)('div',nr,[((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(7,e=>(0,c.createElementVNode)('button',{key:e,class:(0,c.normalizeClass)(['level-btn',{active:f.value===e}]),onClick:t=>f.value=e},' 第'+(0,c.toDisplayString)(['一','二','三','四','五','六','七'][e-1])+'层级 ',11,rr)),64))]),(0,c.createElementVNode)('div',cr,[t[20]||(t[20]=(0,c.createElementVNode)('span',{class:'cost-label'},'消耗点数：',-1)),(0,c.createElementVNode)('span',sr,(0,c.toDisplayString)(A.value),1)])]),(0,c.createCommentVNode)(' 生命层级（自动填充） '),(0,c.createElementVNode)('div',ir,[(0,c.createVNode)((0,c.unref)($l),{label:'生命层级（根据层级自动填充）'}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:V.value,'onUpdate:modelValue':t[2]||(t[2]=e=>V.value=e),readonly:'',disabled:''},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 等级 '),(0,c.createElementVNode)('div',dr,[(0,c.createVNode)((0,c.unref)($l),{label:`等级（${M.value.minGrade}-${M.value.maxGrade}级）`},null,8,['label']),(0,c.createVNode)((0,c.unref)(Rl),{modelValue:k.value,'onUpdate:modelValue':t[3]||(t[3]=e=>k.value=e),min:M.value.minGrade,max:M.value.maxGrade,placeholder:`${M.value.minGrade}-${M.value.maxGrade}`},null,8,['modelValue','min','max','placeholder']),(0,c.createElementVNode)('div',mr,' 该层级的等级范围：'+(0,c.toDisplayString)(M.value.minGrade)+'-'+(0,c.toDisplayString)(M.value.maxGrade)+'级 ',1)]),(0,c.createCommentVNode)(' 种族 '),(0,c.createElementVNode)('div',ur,[(0,c.createVNode)((0,c.unref)($l),{label:'种族',required:''}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:N.value,'onUpdate:modelValue':t[4]||(t[4]=e=>N.value=e),placeholder:'例如：人类、精灵等',maxlength:20},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 身份 '),(0,c.createElementVNode)('div',pr,[(0,c.createVNode)((0,c.unref)($l),{label:'身份'}),(0,c.createVNode)((0,c.unref)(Ra),{modelValue:y.value,'onUpdate:modelValue':t[5]||(t[5]=e=>y.value=e),placeholder:'输入身份后按回车添加'},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 职业 '),(0,c.createElementVNode)('div',vr,[(0,c.createVNode)((0,c.unref)($l),{label:'职业'}),(0,c.createVNode)((0,c.unref)(Ra),{modelValue:E.value,'onUpdate:modelValue':t[6]||(t[6]=e=>E.value=e),placeholder:'输入职业后按回车添加'},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 性格 '),(0,c.createElementVNode)('div',fr,[(0,c.createVNode)((0,c.unref)($l),{label:'性格'}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:g.value,'onUpdate:modelValue':t[7]||(t[7]=e=>g.value=e),placeholder:'描述角色的性格特征...'},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 喜爱 '),(0,c.createElementVNode)('div',Vr,[(0,c.createVNode)((0,c.unref)($l),{label:'喜爱'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:b.value,'onUpdate:modelValue':t[8]||(t[8]=e=>b.value=e),placeholder:'描述喜好和习惯...',rows:2},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 外貌 '),(0,c.createElementVNode)('div',kr,[(0,c.createVNode)((0,c.unref)($l),{label:'外貌'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:h.value,'onUpdate:modelValue':t[9]||(t[9]=e=>h.value=e),placeholder:'描述外貌特征...',rows:2},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 衣物 '),(0,c.createElementVNode)('div',Nr,[(0,c.createVNode)((0,c.unref)($l),{label:'着装'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:B.value,'onUpdate:modelValue':t[10]||(t[10]=e=>B.value=e),placeholder:'描述穿着打扮...',rows:2},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 属性 '),(0,c.createElementVNode)('div',yr,[(0,c.createVNode)((0,c.unref)($l),{label:'属性'}),(0,c.createVNode)(bo,{modelValue:x.value,'onUpdate:modelValue':t[11]||(t[11]=e=>x.value=e),min:1,max:20},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 装备 '),(0,c.createElementVNode)('div',Er,[(0,c.createVNode)((0,c.unref)($l),{label:'装备'}),(0,c.createVNode)(dn,{modelValue:C.value,'onUpdate:modelValue':t[12]||(t[12]=e=>C.value=e),'max-items':10},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 技能 '),(0,c.createElementVNode)('div',gr,[(0,c.createVNode)((0,c.unref)($l),{label:'技能'}),(0,c.createVNode)(tr,{modelValue:I.value,'onUpdate:modelValue':t[13]||(t[13]=e=>I.value=e),'max-items':10},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 登神长阶 '),(0,c.createElementVNode)('div',br,[(0,c.createVNode)((0,c.unref)($l),{label:'登神长阶（需等级 ≥ 13）'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:w.value,'onUpdate:modelValue':t[14]||(t[14]=e=>w.value=e),disabled:k.value<13,placeholder:k.value>=13?'描述登神长阶信息...':'等级需达到 13 级或以上才可填写',rows:2},null,8,['modelValue','disabled','placeholder']),k.value<13?((0,c.openBlock)(),(0,c.createElementBlock)('div',hr,' ⚠️ 当前等级 '+(0,c.toDisplayString)(k.value)+' 级，需要达到 13 级才能开启登神长阶 ',1)):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createCommentVNode)(' 命定契约 '),(0,c.createElementVNode)('div',Br,[(0,c.createVNode)((0,c.unref)($l),{label:'命定契约'}),(0,c.createVNode)((0,c.unref)(Ol),{modelValue:S.value,'onUpdate:modelValue':t[15]||(t[15]=e=>S.value=e),options:u},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 好感度 '),(0,c.createElementVNode)('div',Cr,[(0,c.createVNode)((0,c.unref)($l),{label:'好感度 (-100~100)'}),(0,c.createVNode)((0,c.unref)(Rl),{modelValue:D.value,'onUpdate:modelValue':t[16]||(t[16]=e=>D.value=e),min:-100,max:100,placeholder:'49'},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 心里话 '),(0,c.createElementVNode)('div',xr,[(0,c.createVNode)((0,c.unref)($l),{label:'心里话'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:P.value,'onUpdate:modelValue':t[17]||(t[17]=e=>P.value=e),placeholder:'该角色对你的评价...',rows:2},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 背景故事 '),(0,c.createElementVNode)('div',wr,[(0,c.createVNode)((0,c.unref)($l),{label:'背景故事'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:F.value,'onUpdate:modelValue':t[18]||(t[18]=e=>F.value=e),placeholder:'描述背景故事...',rows:3},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 操作按钮 '),(0,c.createElementVNode)('div',Sr,[(0,c.createElementVNode)('button',{class:'btn-reset',onClick:j},'清空'),i.value?((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:0,class:'btn-cancel',onClick:d},'取消编辑')):(0,c.createCommentVNode)('v-if',!0),(0,c.createElementVNode)('button',{class:'btn-submit',disabled:!U.value,onClick:K},(0,c.toDisplayString)(i.value?'确认修改':'添加到已选项目'),9,Dr)])],512),[[c.vShow,r.value]]),(0,c.createCommentVNode)(' 清空确认弹窗 '),(0,c.createVNode)(ga,{visible:L.value,title:'确认清空',message:'确定要清空所有已填写的内容吗？此操作不可撤销。','confirm-text':'确认清空','cancel-text':'取消',type:'danger',onConfirm:G,onCancel:O},null,8,['visible']),(0,c.createCommentVNode)(' 添加/修改确认弹窗 '),(0,c.createVNode)(ga,{visible:T.value,title:i.value?'确认修改':'确认添加',message:i.value?`确定要将「${s.value}」更新为「${v.value}」吗？`:`确定要将「${v.value}」添加到已选项目吗？`,'confirm-text':i.value?'确认修改':'确认添加','cancel-text':'取消',type:'info',onConfirm:J,onCancel:H},null,8,['visible','title','message','confirm-text'])],2))}}),Pr=(0,i.A)(_r,[['__scopeId','data-v-01050429']]),Fr=Pr,Ir={class:'exchange-header'},$r={class:'exchange-icon','aria-hidden':'true'},Lr={class:'exchange-title'},qr={class:'exchange-rate'},Tr={class:'exchange-body'},Ar={class:'current-display'},Mr={class:'label'},Ur={class:'value'},Rr={key:0,class:'unit'},zr={class:'exchange-controls'},jr=['disabled'],Gr=['disabled','title'],Or=['disabled','title'],Kr=(0,c.defineComponent)({__name:'exchange-card',props:{title:{},rateText:{},iconClass:{},currentLabel:{},currentValue:{},currentUnit:{default:''},gainUnit:{},gainPerPoint:{},maxExchangeable:{},modelValue:{},theme:{default:'gold'},exchangeAllTitle:{default:'将所有剩余转生点数兑换'},resetTitle:{default:'重置已兑换内容'},resetDisabled:{type:Boolean,default:!1}},emits:['update:modelValue','exchange','exchange-all','reset'],setup(e,{emit:t}){const a=e,l=t,o=(0,c.computed)({get:()=>a.modelValue,set:e=>l('update:modelValue',e)}),n=(0,c.computed)(()=>Math.max(0,Math.round(o.value))*a.gainPerPoint),r=(0,c.computed)(()=>o.value<=0||o.value>a.maxExchangeable),s=(0,c.computed)(()=>a.maxExchangeable<=0),i=(0,c.computed)(()=>`exchange-card--${a.theme}`);return(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['exchange-card',i.value])},[(0,c.createElementVNode)('div',Ir,[(0,c.createElementVNode)('span',$r,[(0,c.createElementVNode)('i',{class:(0,c.normalizeClass)(e.iconClass)},null,2)]),(0,c.createElementVNode)('span',Lr,(0,c.toDisplayString)(e.title),1),(0,c.createElementVNode)('span',qr,(0,c.toDisplayString)(e.rateText),1)]),(0,c.createElementVNode)('div',Tr,[(0,c.createElementVNode)('div',Ar,[(0,c.createElementVNode)('span',Mr,(0,c.toDisplayString)(e.currentLabel),1),(0,c.createElementVNode)('span',Ur,(0,c.toDisplayString)(e.currentValue),1),e.currentUnit?((0,c.openBlock)(),(0,c.createElementBlock)('span',Rr,(0,c.toDisplayString)(e.currentUnit),1)):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',zr,[(0,c.createVNode)((0,c.unref)(Rl),{modelValue:o.value,'onUpdate:modelValue':a[0]||(a[0]=e=>o.value=e),min:0,max:e.maxExchangeable,placeholder:'0',class:'exchange-input'},null,8,['modelValue','max']),(0,c.createElementVNode)('button',{class:'exchange-button',disabled:r.value,onClick:a[1]||(a[1]=e=>l('exchange'))},' 兑换 '+(0,c.toDisplayString)(n.value)+' '+(0,c.toDisplayString)(e.gainUnit),9,jr),(0,c.createElementVNode)('button',{class:'exchange-all-button',disabled:s.value,title:e.exchangeAllTitle,onClick:a[2]||(a[2]=e=>l('exchange-all'))},' 全部兑换 ',8,Gr),(0,c.createElementVNode)('button',{class:'exchange-reset-icon',disabled:e.resetDisabled,title:e.resetTitle,'aria-label':'重置',onClick:a[3]||(a[3]=e=>l('reset'))},[...a[4]||(a[4]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-rotate-left'},null,-1)])],8,Or)])])],2))}}),Hr=(0,i.A)(Kr,[['__scopeId','data-v-c35365ee']]),Jr=Hr,Qr=(0,c.defineComponent)({__name:'DestinyPointsExchange',setup(e){const t=L(),a=(0,c.ref)(0),l=(0,c.computed)(()=>{const e=Math.ceil(t.character.destinyPoints/2);return Math.max(0,t.character.reincarnationPoints-(t.consumedPoints-e))}),o=()=>{if(a.value<=0||a.value>l.value)return;const e=2*Math.max(0,Math.round(a.value));t.updateCharacterField('destinyPoints',e),a.value=0},n=()=>{l.value<=0||(t.updateCharacterField('destinyPoints',2*l.value),a.value=0)},r=()=>{t.resetDestinyExchange(),a.value=0};return(e,s)=>((0,c.openBlock)(),(0,c.createBlock)(Jr,{modelValue:(0,c.unref)(a),'onUpdate:modelValue':s[0]||(s[0]=e=>(0,c.isRef)(a)?a.value=e:null),title:'命运点数','rate-text':'(1转生点 = 2命运点)','icon-class':'fa-solid fa-stars','current-label':'当前：','current-value':(0,c.unref)(t).character.destinyPoints,'gain-unit':'命运点','gain-per-point':2,'max-exchangeable':(0,c.unref)(l),theme:'violet','exchange-all-title':'将所有剩余转生点数兑换为命运点数','reset-title':'重置已兑换的命运点数','reset-disabled':(0,c.unref)(t).character.destinyPoints<=0,onExchange:o,onExchangeAll:n,onReset:r},null,8,['modelValue','current-value','max-exchangeable','reset-disabled']))}}),Wr=Qr,Xr=Wr,Yr={class:'level-tabs'},Zr=['onClick'],ec=(0,c.defineComponent)({__name:'LevelTabs',props:{modelValue:{},levels:{}},emits:['update:modelValue'],setup(e,{emit:t}){const a=e,l=t;return(t,o)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Yr,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(a.levels,t=>((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:t,class:(0,c.normalizeClass)(['level-tab',{active:e.modelValue===t}]),onClick:e=>(e=>{l('update:modelValue',e)})(t)},(0,c.toDisplayString)(t),11,Zr))),128))]))}}),tc=(0,i.A)(ec,[['__scopeId','data-v-18f949f6']]),ac=tc,lc={class:'destined-one-list'},oc={key:0,class:'empty-message'},nc=['onClick'],rc={class:'card-header'},cc={class:'item-name'},sc={class:'header-actions'},ic={class:'item-cost'},dc=['onClick'],mc={class:'card-summary'},uc={class:'summary-row'},pc={class:'value'},vc={class:'summary-row'},fc={class:'value'},Vc={class:'summary-row'},kc={class:'value'},Nc={class:'summary-row'},yc={class:'value'},Ec={key:0,class:'card-body'},gc={class:'info-section'},bc={class:'info-row'},hc={class:'value'},Bc={class:'info-row'},Cc={class:'value'},xc={class:'info-row'},wc={class:'value'},Sc={class:'info-row'},Dc={class:'value'},_c={class:'info-section'},Pc={class:'info-block'},Fc={class:'block-content'},Ic={class:'info-block'},$c={class:'block-content'},Lc={class:'info-block'},qc={class:'block-content'},Tc={class:'info-section'},Ac={class:'attributes'},Mc={class:'attr-item'},Uc={class:'attr-value'},Rc={class:'attr-item'},zc={class:'attr-value'},jc={class:'attr-item'},Gc={class:'attr-value'},Oc={class:'attr-item'},Kc={class:'attr-value'},Hc={class:'attr-item'},Jc={class:'attr-value'},Qc={key:0,class:'info-section'},Wc={class:'equipment-list'},Xc={class:'equip-name'},Yc={key:0,class:'equip-info'},Zc={key:1,class:'equip-info'},es={key:2,class:'equip-info'},ts={key:3,class:'equip-info'},as={key:4,class:'equip-desc'},ls={key:1,class:'info-section'},os={class:'skills-list'},ns={class:'skill-header'},rs={class:'skill-name'},cs={class:'skill-type'},ss={key:0,class:'skill-tag'},is={key:1,class:'skill-consume'},ds={key:2,class:'skill-effect'},ms={key:3,class:'skill-effect'},us={class:'skill-desc'},ps={key:2,class:'info-section'},vs={class:'stairway-content'},fs={key:0,class:'stairway-section'},Vs={key:1,class:'stairway-section'},ks={key:2,class:'stairway-section'},Ns={key:3,class:'stairway-item'},ys={key:4,class:'stairway-section'},Es={key:0,class:'stairway-item'},gs={key:1,class:'stairway-desc'},bs={key:3,class:'info-section'},hs={class:'info-block'},Bs={class:'block-content'},Cs={key:4,class:'comment'},xs=(0,c.defineComponent)({__name:'PartnerList',props:{items:{}},emits:['select','deselect'],setup(e,{emit:t}){const a=e,l=t,o=L(),n=(0,c.computed)(()=>o.character.reincarnationPoints-o.consumedPoints),{isSelected:r,canSelect:s}=We(()=>o.selectedPartners,()=>n.value),{toggleExpand:i,isExpanded:d}=function(){const e=(0,c.ref)(new Set);return{expandedCards:e,toggleExpand:(t,a)=>{a?.stopPropagation(),e.value.has(t)?e.value.delete(t):e.value.add(t)},isExpanded:t=>e.value.has(t),expandAll:t=>{t.forEach(t=>e.value.add(t))},collapseAll:()=>{e.value.clear()}}}(),m=(0,c.ref)([]);return(0,c.watch)(()=>a.items,async e=>{m.value=await Promise.all(e.map(He))},{immediate:!0}),(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',lc,[0===(0,c.unref)(m).length?((0,c.openBlock)(),(0,c.createElementBlock)('div',oc,'该分类暂无伙伴')):(0,c.createCommentVNode)('v-if',!0),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(m),e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:(0,c.normalizeClass)(['destined-one-card',{selected:(0,c.unref)(r)(e),disabled:!(0,c.unref)(r)(e)&&!(0,c.unref)(s)(e),expanded:(0,c.unref)(d)(e.name)}]),onClick:t=>(e=>{r(e)?l('deselect',e):s(e)&&l('select',e)})(e)},[(0,c.createElementVNode)('div',rc,[(0,c.createElementVNode)('h3',cc,(0,c.toDisplayString)(e.name),1),(0,c.createElementVNode)('div',sc,[(0,c.createElementVNode)('div',ic,(0,c.toDisplayString)(e.cost)+' 点',1),(0,c.createElementVNode)('button',{class:'expand-btn',onClick:t=>(0,c.unref)(i)(e.name,t)},(0,c.toDisplayString)((0,c.unref)(d)(e.name)?'收起':'展开'),9,dc)])]),(0,c.createCommentVNode)(' 基本信息（始终显示） '),(0,c.createElementVNode)('div',mc,[(0,c.createElementVNode)('div',uc,[t[0]||(t[0]=(0,c.createElementVNode)('span',{class:'label'},'层级：',-1)),(0,c.createElementVNode)('span',pc,(0,c.toDisplayString)(e.lifeLevel),1)]),(0,c.createElementVNode)('div',vc,[t[1]||(t[1]=(0,c.createElementVNode)('span',{class:'label'},'种族：',-1)),(0,c.createElementVNode)('span',fc,(0,c.toDisplayString)(e.race),1)]),(0,c.createElementVNode)('div',Vc,[t[2]||(t[2]=(0,c.createElementVNode)('span',{class:'label'},'等级：',-1)),(0,c.createElementVNode)('span',kc,'Lv.'+(0,c.toDisplayString)(e.level),1)]),(0,c.createElementVNode)('div',Nc,[t[3]||(t[3]=(0,c.createElementVNode)('span',{class:'label'},'好感度：',-1)),(0,c.createElementVNode)('span',yc,(0,c.toDisplayString)(e.affinity),1)])]),(0,c.createCommentVNode)(' 详细信息（可折叠） '),(0,c.unref)(d)(e.name)?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ec,[(0,c.createElementVNode)('div',gc,[(0,c.createElementVNode)('div',bc,[t[4]||(t[4]=(0,c.createElementVNode)('span',{class:'label'},'身份：',-1)),(0,c.createElementVNode)('span',hc,(0,c.toDisplayString)(e.identity.join('、')),1)]),(0,c.createElementVNode)('div',Bc,[t[5]||(t[5]=(0,c.createElementVNode)('span',{class:'label'},'职业：',-1)),(0,c.createElementVNode)('span',Cc,(0,c.toDisplayString)(e.career.join('、')),1)]),(0,c.createElementVNode)('div',xc,[t[6]||(t[6]=(0,c.createElementVNode)('span',{class:'label'},'性格：',-1)),(0,c.createElementVNode)('span',wc,(0,c.toDisplayString)(e.personality),1)]),(0,c.createElementVNode)('div',Sc,[t[7]||(t[7]=(0,c.createElementVNode)('span',{class:'label'},'命定契约：',-1)),(0,c.createElementVNode)('span',Dc,(0,c.toDisplayString)(e.isContract?'是':'否'),1)])]),(0,c.createElementVNode)('div',_c,[(0,c.createElementVNode)('div',Pc,[t[8]||(t[8]=(0,c.createElementVNode)('div',{class:'block-title'},'喜好',-1)),(0,c.createElementVNode)('div',Fc,(0,c.toDisplayString)(e.like),1)]),(0,c.createElementVNode)('div',Ic,[t[9]||(t[9]=(0,c.createElementVNode)('div',{class:'block-title'},'外貌',-1)),(0,c.createElementVNode)('div',$c,(0,c.toDisplayString)(e.app),1)]),(0,c.createElementVNode)('div',Lc,[t[10]||(t[10]=(0,c.createElementVNode)('div',{class:'block-title'},'着装',-1)),(0,c.createElementVNode)('div',qc,(0,c.toDisplayString)(e.cloth),1)])]),(0,c.createElementVNode)('div',Tc,[t[16]||(t[16]=(0,c.createElementVNode)('div',{class:'block-title'},'属性',-1)),(0,c.createElementVNode)('div',Ac,[(0,c.createElementVNode)('div',Mc,[t[11]||(t[11]=(0,c.createElementVNode)('span',{class:'attr-label'},'力量：',-1)),(0,c.createElementVNode)('span',Uc,(0,c.toDisplayString)(e.attributes.strength),1)]),(0,c.createElementVNode)('div',Rc,[t[12]||(t[12]=(0,c.createElementVNode)('span',{class:'attr-label'},'敏捷：',-1)),(0,c.createElementVNode)('span',zc,(0,c.toDisplayString)(e.attributes.dexterity),1)]),(0,c.createElementVNode)('div',jc,[t[13]||(t[13]=(0,c.createElementVNode)('span',{class:'attr-label'},'体质：',-1)),(0,c.createElementVNode)('span',Gc,(0,c.toDisplayString)(e.attributes.constitution),1)]),(0,c.createElementVNode)('div',Oc,[t[14]||(t[14]=(0,c.createElementVNode)('span',{class:'attr-label'},'智力：',-1)),(0,c.createElementVNode)('span',Kc,(0,c.toDisplayString)(e.attributes.intelligence),1)]),(0,c.createElementVNode)('div',Hc,[t[15]||(t[15]=(0,c.createElementVNode)('span',{class:'attr-label'},'精神：',-1)),(0,c.createElementVNode)('span',Jc,(0,c.toDisplayString)(e.attributes.mind),1)])])]),e.equip&&e.equip.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Qc,[t[18]||(t[18]=(0,c.createElementVNode)('div',{class:'block-title'},'装备',-1)),(0,c.createElementVNode)('div',Wc,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.equip,(e,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:a,class:'equipment-item'},[(0,c.createElementVNode)('div',Xc,(0,c.toDisplayString)(e.name),1),e.type?((0,c.openBlock)(),(0,c.createElementBlock)('div',Yc,'类型：'+(0,c.toDisplayString)(e.type),1)):(0,c.createCommentVNode)('v-if',!0),e.tag&&e.tag.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Zc,' 标签：'+(0,c.toDisplayString)(e.tag.join('、')),1)):(0,c.createCommentVNode)('v-if',!0),Object.keys(e.effect||{}).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',es,[t[17]||(t[17]=(0,c.createTextVNode)(' 效果： ',-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.effect,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:t,class:'effect-inline'},(0,c.toDisplayString)(t)+'：'+(0,c.toDisplayString)(e),1))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('div',ts,'效果：无')),e.description?((0,c.openBlock)(),(0,c.createElementBlock)('div',as,(0,c.toDisplayString)(e.description),1)):(0,c.createCommentVNode)('v-if',!0)]))),128))])])):(0,c.createCommentVNode)('v-if',!0),e.skills&&e.skills.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',ls,[t[19]||(t[19]=(0,c.createElementVNode)('div',{class:'block-title'},'技能',-1)),(0,c.createElementVNode)('div',os,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.skills,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'skill-item'},[(0,c.createElementVNode)('div',ns,[(0,c.createElementVNode)('span',rs,(0,c.toDisplayString)(e.name),1),(0,c.createElementVNode)('span',cs,(0,c.toDisplayString)(e.type),1)]),e.tag&&e.tag.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',ss,(0,c.toDisplayString)(e.tag.join('、')),1)):(0,c.createCommentVNode)('v-if',!0),e.consume?((0,c.openBlock)(),(0,c.createElementBlock)('div',is,'消耗：'+(0,c.toDisplayString)(e.consume),1)):(0,c.createCommentVNode)('v-if',!0),Object.keys(e.effect||{}).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',ds,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.effect,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:t,class:'effect-inline'},(0,c.toDisplayString)(t)+'：'+(0,c.toDisplayString)(e),1))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('div',ms,'无效果')),(0,c.createElementVNode)('div',us,(0,c.toDisplayString)(e.description),1)]))),128))])])):(0,c.createCommentVNode)('v-if',!0),e.stairway.isOpen?((0,c.openBlock)(),(0,c.createElementBlock)('div',ps,[t[24]||(t[24]=(0,c.createElementVNode)('div',{class:'block-title'},'登神长阶',-1)),(0,c.createElementVNode)('div',vs,[e.stairway.elements?((0,c.openBlock)(),(0,c.createElementBlock)('div',fs,[t[20]||(t[20]=(0,c.createElementVNode)('div',{class:'stairway-label'},'要素：',-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.stairway.elements,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'stairway-item'},[(0,c.createElementVNode)('div',null,'• '+(0,c.toDisplayString)(t),1),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t},(0,c.toDisplayString)(t)+'：'+(0,c.toDisplayString)(e),1))),128))]))),128))])):(0,c.createCommentVNode)('v-if',!0),e.stairway.powers?((0,c.openBlock)(),(0,c.createElementBlock)('div',Vs,[t[21]||(t[21]=(0,c.createElementVNode)('div',{class:'stairway-label'},'权能：',-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.stairway.powers,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'stairway-item'},[(0,c.createElementVNode)('div',null,'• '+(0,c.toDisplayString)(t),1),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t},(0,c.toDisplayString)(t)+'：'+(0,c.toDisplayString)(e),1))),128))]))),128))])):(0,c.createCommentVNode)('v-if',!0),e.stairway.laws?((0,c.openBlock)(),(0,c.createElementBlock)('div',ks,[t[22]||(t[22]=(0,c.createElementVNode)('div',{class:'stairway-label'},'法则：',-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.stairway.laws,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'stairway-item'},[(0,c.createElementVNode)('div',null,'• '+(0,c.toDisplayString)(t),1),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t},(0,c.toDisplayString)(t)+'：'+(0,c.toDisplayString)(e),1))),128))]))),128))])):(0,c.createCommentVNode)('v-if',!0),e.stairway.godlyRank?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ns,' 神位：'+(0,c.toDisplayString)(e.stairway.godlyRank),1)):(0,c.createCommentVNode)('v-if',!0),e.stairway.godKingdom?.name||e.stairway.godKingdom?.description?((0,c.openBlock)(),(0,c.createElementBlock)('div',ys,[t[23]||(t[23]=(0,c.createElementVNode)('div',{class:'stairway-label'},'神国：',-1)),e.stairway.godKingdom?.name?((0,c.openBlock)(),(0,c.createElementBlock)('div',Es,(0,c.toDisplayString)(e.stairway.godKingdom?.name),1)):(0,c.createCommentVNode)('v-if',!0),e.stairway.godKingdom?.description?((0,c.openBlock)(),(0,c.createElementBlock)('div',gs,(0,c.toDisplayString)(e.stairway.godKingdom?.description),1)):(0,c.createCommentVNode)('v-if',!0)])):(0,c.createCommentVNode)('v-if',!0)])])):(0,c.createCommentVNode)('v-if',!0),e.backgroundInfo?((0,c.openBlock)(),(0,c.createElementBlock)('div',bs,[(0,c.createElementVNode)('div',hs,[t[25]||(t[25]=(0,c.createElementVNode)('div',{class:'block-title'},'背景故事',-1)),(0,c.createElementVNode)('div',Bs,(0,c.toDisplayString)(e.backgroundInfo),1)])])):(0,c.createCommentVNode)('v-if',!0),e.comment?((0,c.openBlock)(),(0,c.createElementBlock)('div',Cs,'"'+(0,c.toDisplayString)(e.comment)+'"',1)):(0,c.createCommentVNode)('v-if',!0)])):(0,c.createCommentVNode)('v-if',!0)],10,nc))),128))]))}}),ws=(0,i.A)(xs,[['__scopeId','data-v-253614da']]),Ss={class:'background-page'},Ds={class:'destined-ones-section'},_s={class:'destined-ones-content'},Ps={class:'background-section'},Fs={class:'summary-section'},Is={class:'summary-card'},$s={class:'summary-header'},Ls={class:'summary-title-row'},qs={class:'points-info'},Ts={class:'points-total'},As={class:'summary-content'},Ms={key:0,class:'summary-group'},Us={class:'summary-label'},Rs={class:'summary-items'},zs=['onClick'],js={class:'item-name'},Gs={class:'name-text'},Os={key:0,class:'custom-tag'},Ks={class:'item-cost'},Hs=['onClick'],Js={key:1,class:'summary-group'},Qs={class:'summary-items'},Ws={class:'summary-item full'},Xs={class:'item-name'},Ys={key:2,class:'empty-state'},Zs=(0,c.defineComponent)({__name:'index',setup(e){const t=L(),a=q(),l=(0,c.ref)(null),o=(0,c.ref)(''),n=(0,c.ref)(''),r=(0,c.computed)(()=>Object.keys(Qt())),s=(0,c.computed)(()=>Object.keys(Kt())),i=(0,c.computed)(()=>o.value&&Qt()[o.value]||[]),d=(0,c.computed)(()=>n.value&&Kt()[n.value]||[]),m=(0,c.computed)(()=>t.character.reincarnationPoints-t.consumedPoints),u=e=>{t.addPartner(e)},p=e=>{t.removePartner(e)},v=(e,l)=>{const o=l?.trim();o?t.replacePartnerByName(e,o):t.addPartner(e),a.updateEditingCustomPartnerName('')},f=e=>{if('【自定义开局】'===e.name){const l=a.customBackgroundDescription?.trim(),o={...e,description:l||e.description};return void t.setBackground(o)}t.setBackground(e)},V=e=>{a.updateCustomBackgroundDescription(e),'【自定义开局】'===t.selectedBackground?.name&&t.setBackground({...t.selectedBackground,description:e})},k=()=>{t.clearPartners(),t.setBackground(null),a.updateCustomBackgroundDescription('')};return(0,c.onMounted)(()=>{r.value.length>0&&(o.value=r.value[0]),s.value.length>0&&(n.value=s.value[0])}),(e,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Ss,[(0,c.createCommentVNode)(' 伙伴区域 '),(0,c.createElementVNode)('section',Ds,[a[2]||(a[2]=(0,c.createElementVNode)('h2',{class:'section-title'},'选择伙伴',-1)),(0,c.createCommentVNode)(' 层级导航 '),(0,c.createVNode)(ac,{modelValue:(0,c.unref)(o),'onUpdate:modelValue':a[0]||(a[0]=e=>(0,c.isRef)(o)?o.value=e:null),levels:(0,c.unref)(r)},null,8,['modelValue','levels']),(0,c.createCommentVNode)(' 伙伴列表 '),(0,c.createElementVNode)('div',_s,[(0,c.createVNode)(ws,{items:(0,c.unref)(i),onSelect:u,onDeselect:p},null,8,['items'])])]),(0,c.createCommentVNode)(' 自定义伙伴表单 '),(0,c.createVNode)(Fr,{ref_key:'customPartnerFormRef',ref:l,onAdd:v},null,512),(0,c.createCommentVNode)(' 命运点数兑换 '),(0,c.createVNode)(Xr),(0,c.createCommentVNode)(' 初始剧情区域 - 使用通用布局组件 '),(0,c.createElementVNode)('section',Ps,[a[3]||(a[3]=(0,c.createElementVNode)('h2',{class:'section-title'},'选择初始开局剧情',-1)),(0,c.createVNode)(jt,{modelValue:(0,c.unref)(n),'onUpdate:modelValue':a[1]||(a[1]=e=>(0,c.isRef)(n)?n.value=e:null),categories:(0,c.unref)(s)},{content:(0,c.withCtx)(()=>[(0,c.createVNode)(va,{items:(0,c.unref)(d),'selected-item':(0,c.unref)(t).selectedBackground,'character-race':(0,c.unref)(t).character.race,'character-location':(0,c.unref)(t).character.startLocation,'character-identity':(0,c.unref)(t).character.identity,onSelect:f,'onUpdate:customDescription':V},null,8,['items','selected-item','character-race','character-location','character-identity'])]),_:1},8,['modelValue','categories'])]),(0,c.createCommentVNode)(' 已选信息面板 '),(0,c.createElementVNode)('section',Fs,[(0,c.createElementVNode)('div',Is,[(0,c.createElementVNode)('div',$s,[(0,c.createElementVNode)('div',Ls,[a[5]||(a[5]=(0,c.createElementVNode)('h3',{class:'summary-title'},'已选择',-1)),(0,c.createElementVNode)('div',qs,[(0,c.createElementVNode)('span',{class:(0,c.normalizeClass)(['points-value',{insufficient:(0,c.unref)(m)<0}])},(0,c.toDisplayString)((0,c.unref)(m)),3),a[4]||(a[4]=(0,c.createElementVNode)('span',{class:'points-separator'},'/',-1)),(0,c.createElementVNode)('span',Ts,(0,c.toDisplayString)((0,c.unref)(t).character.reincarnationPoints),1)])]),(0,c.unref)(t).selectedPartners.length>0||(0,c.unref)(t).selectedBackground?((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:0,class:'clear-btn',onClick:k},' 清空选择 ')):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',As,[(0,c.createCommentVNode)(' 伙伴摘要 '),(0,c.unref)(t).selectedPartners.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ms,[(0,c.createElementVNode)('div',Us,'伙伴列表 ('+(0,c.toDisplayString)((0,c.unref)(t).selectedPartners.length)+')',1),(0,c.createElementVNode)('div',Rs,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).selectedPartners,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:(0,c.normalizeClass)(['summary-item',{'is-custom':e.isCustom}]),onClick:t=>(e=>{e.isCustom&&(l.value?.fillFormByPartner(e),toastr.info(`已回填自定义伙伴「${e.name}」`))})(e)},[(0,c.createElementVNode)('span',js,[(0,c.createElementVNode)('span',Gs,(0,c.toDisplayString)(e.name),1),e.isCustom?((0,c.openBlock)(),(0,c.createElementBlock)('span',Os,[...a[6]||(a[6]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-pen-to-square','aria-hidden':'true'},null,-1)])])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('span',Ks,(0,c.toDisplayString)(e.cost)+' 点',1),(0,c.createElementVNode)('button',{class:'remove-btn',onClick:(0,c.withModifiers)(t=>p(e),['stop'])},[...a[7]||(a[7]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark','aria-hidden':'true'},null,-1)])],8,Hs)],10,zs))),128))])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 背景摘要 '),(0,c.unref)(t).selectedBackground?((0,c.openBlock)(),(0,c.createElementBlock)('div',Js,[a[8]||(a[8]=(0,c.createElementVNode)('div',{class:'summary-label'},'初始开局剧情',-1)),(0,c.createElementVNode)('div',Qs,[(0,c.createElementVNode)('div',Ws,[(0,c.createElementVNode)('span',Xs,(0,c.toDisplayString)((0,c.unref)(t).selectedBackground.name),1)])])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 空状态提示 '),0!==(0,c.unref)(t).selectedPartners.length||(0,c.unref)(t).selectedBackground?(0,c.createCommentVNode)('v-if',!0):((0,c.openBlock)(),(0,c.createElementBlock)('div',Ys,' 尚未选择任何内容 '))])])])]))}}),ei=(0,i.A)(Zs,[['__scopeId','data-v-2e7bfa8a']]),ti={class:'basic-info'},ai={class:'form-container'},li={class:'form-row'},oi={class:'form-field'},ni={class:'form-field'},ri={class:'form-row'},ci={class:'form-field'},si={class:'form-field'},ii={class:'level-input-group'},di={class:'level-indicator'},mi={class:'form-row'},ui={class:'form-field'},pi={class:'form-field'},vi={class:'form-row full-width'},fi={class:'form-field'},Vi={class:'attributes-panel'},ki={class:'panel-header'},Ni={class:'points-summary'},yi={class:'points-badge'},Ei={class:'points-hint'},gi={key:0,class:'points-badge'},bi={class:'panel-content'},hi={class:'attr-table-header'},Bi={key:0,class:'col-extra'},Ci={class:'col-name'},xi={class:'col-base'},wi={class:'col-tier'},Si={class:'tier-value'},Di={key:0,class:'col-extra'},_i={class:'col-result'},Pi={class:'final-value'},Fi={key:0,class:'status-message error'},Ii={key:1,class:'status-message success'},$i={key:2,class:'status-message info'},Li={key:0},qi={key:1,class:'sep'},Ti={key:2},Ai=(0,c.defineComponent)({__name:'index',setup(e){const t=L(),{character:l}=a(t),{addBasePoint:o,removeBasePoint:n,addAttributePoint:r,removeAttributePoint:s}=t,i=b,d=h,m=B,u=C,p=(0,c.computed)(()=>Object.keys(d.value)),v=(0,c.computed)(()=>Object.keys(m.value)),f=(0,c.computed)(()=>w(l.value.level)),V=(0,c.computed)(()=>l.value.reincarnationPoints-t.consumedPoints),k=(0,c.computed)(()=>{const e=l.value.level;return S(e)});return(e,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',ti,[(0,c.createElementVNode)('div',ai,[(0,c.createCommentVNode)(' 第一行：姓名和性别 '),(0,c.createElementVNode)('div',li,[(0,c.createElementVNode)('div',oi,[(0,c.createVNode)((0,c.unref)($l),{label:'姓名',required:''}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:(0,c.unref)(l).name,'onUpdate:modelValue':a[0]||(a[0]=e=>(0,c.unref)(l).name=e),placeholder:'请输入角色姓名'},null,8,['modelValue'])]),(0,c.createElementVNode)('div',ni,[(0,c.createVNode)((0,c.unref)($l),{label:'性别',required:''}),(0,c.createVNode)((0,c.unref)(no),{modelValue:(0,c.unref)(l).gender,'onUpdate:modelValue':a[1]||(a[1]=e=>(0,c.unref)(l).gender=e),options:(0,c.unref)(i)},null,8,['modelValue','options']),'自定义'===(0,c.unref)(l).gender?((0,c.openBlock)(),(0,c.createBlock)((0,c.unref)(Zt),{key:0,modelValue:(0,c.unref)(l).customGender,'onUpdate:modelValue':a[2]||(a[2]=e=>(0,c.unref)(l).customGender=e),rows:2,placeholder:'请输入自定义性别'},null,8,['modelValue'])):(0,c.createCommentVNode)('v-if',!0)])]),(0,c.createCommentVNode)(' 第二行：年龄和等级 '),(0,c.createElementVNode)('div',ri,[(0,c.createElementVNode)('div',ci,[(0,c.createVNode)((0,c.unref)($l),{label:'年龄'}),(0,c.createVNode)((0,c.unref)(Rl),{modelValue:(0,c.unref)(l).age,'onUpdate:modelValue':a[3]||(a[3]=e=>(0,c.unref)(l).age=e),min:1,max:1e4},null,8,['modelValue'])]),(0,c.createElementVNode)('div',si,[(0,c.createVNode)((0,c.unref)($l),{label:'等级',required:''}),(0,c.createElementVNode)('div',ii,[(0,c.createVNode)((0,c.unref)(Rl),{modelValue:(0,c.unref)(l).level,'onUpdate:modelValue':a[4]||(a[4]=e=>(0,c.unref)(l).level=e),min:(0,c.unref)(1),max:(0,c.unref)(10)},null,8,['modelValue','min','max']),(0,c.createElementVNode)('span',di,(0,c.toDisplayString)((0,c.unref)(k)),1)])])]),(0,c.createCommentVNode)(' 第三行：种族和身份 '),(0,c.createElementVNode)('div',mi,[(0,c.createElementVNode)('div',ui,[(0,c.createVNode)((0,c.unref)($l),{label:'种族',required:''}),(0,c.createVNode)((0,c.unref)(no),{modelValue:(0,c.unref)(l).race,'onUpdate:modelValue':a[5]||(a[5]=e=>(0,c.unref)(l).race=e),searchable:'','search-placeholder':'搜索种族...',options:(0,c.unref)(p).map(e=>({label:e+(0!==(0,c.unref)(d)[e]?` (${(0,c.unref)(d)[e]>0?'-':'+'}${Math.abs((0,c.unref)(d)[e])}点)`:''),value:e}))},null,8,['modelValue','options']),'自定义'===(0,c.unref)(l).race?((0,c.openBlock)(),(0,c.createBlock)((0,c.unref)(Zt),{key:0,modelValue:(0,c.unref)(l).customRace,'onUpdate:modelValue':a[6]||(a[6]=e=>(0,c.unref)(l).customRace=e),rows:2,placeholder:'请输入自定义种族'},null,8,['modelValue'])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',pi,[(0,c.createVNode)((0,c.unref)($l),{label:'身份',required:''}),(0,c.createVNode)((0,c.unref)(no),{modelValue:(0,c.unref)(l).identity,'onUpdate:modelValue':a[7]||(a[7]=e=>(0,c.unref)(l).identity=e),searchable:'','search-placeholder':'搜索身份...',options:(0,c.unref)(v).map(e=>({label:e+(0!==(0,c.unref)(m)[e]?` (${(0,c.unref)(m)[e]>0?'-':'+'}${Math.abs((0,c.unref)(m)[e])}点)`:''),value:e}))},null,8,['modelValue','options']),'自定义'===(0,c.unref)(l).identity?((0,c.openBlock)(),(0,c.createBlock)((0,c.unref)(Zt),{key:0,modelValue:(0,c.unref)(l).customIdentity,'onUpdate:modelValue':a[8]||(a[8]=e=>(0,c.unref)(l).customIdentity=e),rows:2,placeholder:'请输入自定义身份'},null,8,['modelValue'])):(0,c.createCommentVNode)('v-if',!0)])]),(0,c.createCommentVNode)(' 第四行：起始地点（使用级联选择器） '),(0,c.createElementVNode)('div',vi,[(0,c.createElementVNode)('div',fi,[(0,c.createVNode)((0,c.unref)($l),{label:'起始地点',required:''}),(0,c.createVNode)((0,c.unref)(ol),{modelValue:(0,c.unref)(l).startLocation,'onUpdate:modelValue':a[9]||(a[9]=e=>(0,c.unref)(l).startLocation=e),options:(0,c.unref)(u),placeholder:'请选择起始地点','search-placeholder':'搜索地点...'},null,8,['modelValue','options']),'自定义'===(0,c.unref)(l).startLocation?((0,c.openBlock)(),(0,c.createBlock)((0,c.unref)(Zt),{key:0,modelValue:(0,c.unref)(l).customStartLocation,'onUpdate:modelValue':a[10]||(a[10]=e=>(0,c.unref)(l).customStartLocation=e),rows:2,placeholder:'请输入自定义起始地点'},null,8,['modelValue'])):(0,c.createCommentVNode)('v-if',!0)])]),(0,c.createCommentVNode)(' 属性分配面板 '),(0,c.createElementVNode)('div',Vi,[(0,c.createElementVNode)('div',ki,[a[13]||(a[13]=(0,c.createElementVNode)('h3',null,'属性分配',-1)),(0,c.createElementVNode)('div',Ni,[(0,c.createElementVNode)('span',yi,[a[11]||(a[11]=(0,c.createTextVNode)(' 基础点: ',-1)),(0,c.createElementVNode)('strong',{class:(0,c.normalizeClass)({error:(0,c.unref)(t).remainingBP<0,success:0===(0,c.unref)(t).remainingBP})},(0,c.toDisplayString)((0,c.unref)(t).remainingBP),3),(0,c.createTextVNode)(' / '+(0,c.toDisplayString)((0,c.unref)(t).maxBP)+' ',1),(0,c.createElementVNode)('span',Ei,'（单项≤'+(0,c.toDisplayString)((0,c.unref)(6))+'）',1)]),(0,c.unref)(t).maxAP>0?((0,c.openBlock)(),(0,c.createElementBlock)('span',gi,[a[12]||(a[12]=(0,c.createTextVNode)(' 额外点: ',-1)),(0,c.createElementVNode)('strong',{class:(0,c.normalizeClass)({error:(0,c.unref)(t).remainingAP<0,success:0===(0,c.unref)(t).remainingAP})},(0,c.toDisplayString)((0,c.unref)(t).remainingAP),3),(0,c.createTextVNode)(' / '+(0,c.toDisplayString)((0,c.unref)(t).maxAP),1)])):(0,c.createCommentVNode)('v-if',!0)])]),(0,c.createElementVNode)('div',bi,[(0,c.createCommentVNode)(' 表头 '),(0,c.createElementVNode)('div',hi,[a[14]||(a[14]=(0,c.createElementVNode)('span',{class:'col-name'},'属性',-1)),a[15]||(a[15]=(0,c.createElementVNode)('span',{class:'col-base'},'基础点',-1)),a[16]||(a[16]=(0,c.createElementVNode)('span',{class:'col-tier'},'层级',-1)),(0,c.unref)(t).maxAP>0?((0,c.openBlock)(),(0,c.createElementBlock)('span',Bi,'额外点')):(0,c.createCommentVNode)('v-if',!0),a[17]||(a[17]=(0,c.createElementVNode)('span',{class:'col-result'},'总属性',-1))]),(0,c.createCommentVNode)(' 每个属性一行 '),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(x),e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e,class:'attr-row'},[(0,c.createElementVNode)('span',Ci,(0,c.toDisplayString)(e),1),(0,c.createCommentVNode)(' 基础点 stepper '),(0,c.createElementVNode)('div',xi,[a[18]||(a[18]=(0,c.createElementVNode)('span',{class:'mobile-label'},'基础点',-1)),(0,c.createVNode)((0,c.unref)(vo),{'model-value':(0,c.unref)(l).basePoints[e],min:0,max:(0,c.unref)(6),'disable-increment':(0,c.unref)(t).remainingBP<=0||(0,c.unref)(l).basePoints[e]>=(0,c.unref)(6),onIncrement:t=>(0,c.unref)(o)(e),onDecrement:t=>(0,c.unref)(n)(e)},null,8,['model-value','max','disable-increment','onIncrement','onDecrement'])]),(0,c.createCommentVNode)(' 层级固定值 '),(0,c.createElementVNode)('div',wi,[a[19]||(a[19]=(0,c.createElementVNode)('span',{class:'mobile-label'},'层级',-1)),(0,c.createElementVNode)('span',Si,(0,c.toDisplayString)((0,c.unref)(f)),1)]),(0,c.createCommentVNode)(' 额外点 stepper '),(0,c.unref)(t).maxAP>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Di,[a[20]||(a[20]=(0,c.createElementVNode)('span',{class:'mobile-label'},'额外点',-1)),(0,c.createVNode)((0,c.unref)(vo),{'model-value':(0,c.unref)(l).attributePoints[e],min:0,max:(0,c.unref)(t).maxAP,'disable-increment':(0,c.unref)(t).remainingAP<=0,onIncrement:t=>(0,c.unref)(r)(e),onDecrement:t=>(0,c.unref)(s)(e)},null,8,['model-value','max','disable-increment','onIncrement','onDecrement'])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 最终值 '),(0,c.createElementVNode)('div',_i,[a[21]||(a[21]=(0,c.createElementVNode)('span',{class:'mobile-label'},'总属性',-1)),(0,c.createElementVNode)('span',Pi,(0,c.toDisplayString)((0,c.unref)(t).finalAttributes[e]),1)])]))),128)),(0,c.createCommentVNode)(' 状态提示 '),(0,c.unref)(V)<0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Fi,' ⚠️ 转生点数不足！ ')):0===(0,c.unref)(t).remainingBP&&0===(0,c.unref)(t).remainingAP?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ii,' ✓ 属性点已全部分配 ')):(0,c.unref)(t).remainingBP>0||(0,c.unref)(t).remainingAP>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',$i,[(0,c.unref)(t).remainingBP>0?((0,c.openBlock)(),(0,c.createElementBlock)('span',Li,'基础点剩余 '+(0,c.toDisplayString)((0,c.unref)(t).remainingBP),1)):(0,c.createCommentVNode)('v-if',!0),(0,c.unref)(t).remainingBP>0&&(0,c.unref)(t).remainingAP>0?((0,c.openBlock)(),(0,c.createElementBlock)('span',qi,'｜')):(0,c.createCommentVNode)('v-if',!0),(0,c.unref)(t).remainingAP>0?((0,c.openBlock)(),(0,c.createElementBlock)('span',Ti,'额外点剩余 '+(0,c.toDisplayString)((0,c.unref)(t).remainingAP),1)):(0,c.createCommentVNode)('v-if',!0)])):(0,c.createCommentVNode)('v-if',!0)])])])]))}}),Mi=(0,i.A)(Ai,[['__scopeId','data-v-1d72dcf1']]),Ui={class:'confirm-page'},Ri={class:'confirm-panel'},zi={class:'panel-content'},ji={class:'doc-section points-section'},Gi={class:'points-grid'},Oi={class:'point-item'},Ki={class:'point-value gold'},Hi={class:'point-item'},Ji={class:'point-value'},Qi={class:'point-item'},Wi={class:'point-item destiny'},Xi={class:'point-value purple'},Yi={class:'doc-section'},Zi={class:'doc-text'},ed={class:'doc-section'},td={class:'doc-text attributes'},ad={class:'attr-detail'},ld={class:'doc-section'},od={class:'section-title'},nd={key:0,class:'doc-text'},rd={class:'item-title'},cd={class:'item-cost'},sd={class:'item-meta'},id={key:0},dd={key:0,class:'item-desc'},md={key:1,class:'item-desc'},ud={key:2,class:'item-flavor'},pd={key:1,class:'empty-text'},vd={class:'doc-section'},fd={class:'section-title'},Vd={key:0,class:'doc-text'},kd={class:'item-title'},Nd={key:0,class:'item-quantity'},yd={class:'item-cost'},Ed={class:'item-meta'},gd={key:0},bd={key:0,class:'item-desc'},hd={key:1,class:'item-desc'},Bd={key:2,class:'item-flavor'},Cd={key:1,class:'empty-text'},xd={class:'doc-section'},wd={class:'section-title'},Sd={key:0,class:'doc-text'},Dd={class:'item-title'},_d={class:'item-cost'},Pd={class:'item-meta'},Fd={key:0},Id={key:1},$d={key:0,class:'item-desc'},Ld={key:1,class:'item-desc'},qd={key:2,class:'item-flavor'},Td={key:1,class:'empty-text'},Ad={class:'doc-section'},Md={class:'section-title'},Ud={key:0,class:'doc-text'},Rd={class:'item-title'},zd={class:'item-cost'},jd={class:'item-meta'},Gd={key:0},Od={key:1,class:'sub-list'},Kd={key:0,class:'sub-item'},Hd={key:0,class:'sub-item'},Jd={class:'sub-item'},Qd={key:1,class:'sub-item'},Wd={class:'sub-item'},Xd={key:2,class:'sub-item'},Yd={class:'sub-item'},Zd={key:3,class:'sub-item'},em={key:4,class:'sub-item'},tm={key:0,class:'sub-item'},am={key:1,class:'sub-item'},lm={key:2,class:'item-flavor'},om={key:3,class:'sub-list'},nm={key:4,class:'sub-list'},rm={key:1,class:'empty-text'},cm={class:'doc-section'},sm={key:0,class:'doc-text'},im={class:'item-title'},dm={key:0,class:'item-meta'},mm={key:0},um={key:1},pm={key:2},vm={key:1,class:'background-desc'},fm={key:2,class:'background-desc'},Vm={key:1,class:'empty-text'},km={key:0,class:'final-notice'},Nm={key:0,class:'notice warning'},ym={key:1,class:'notice info'},Em=(0,c.defineComponent)({__name:'index',setup(e){const t=L(),a=q(),l=(0,c.computed)(()=>t.consumedPoints),o=(0,c.computed)(()=>t.character.reincarnationPoints-l.value),n=(0,c.computed)(()=>'自定义'===t.character.gender?t.character.customGender||'自定义':t.character.gender),r=(0,c.computed)(()=>'自定义'===t.character.race?t.character.customRace||'自定义':t.character.race),s=(0,c.computed)(()=>'自定义'===t.character.identity?t.character.customIdentity||'自定义':t.character.identity),i=(0,c.computed)(()=>'自定义'===t.character.startLocation?t.character.customStartLocation||'自定义':t.character.startLocation),d={common:'#9e9e9e',uncommon:'#4caf50',rare:'#2196f3',epic:'#9c27b0',legendary:'#ff9800',mythic:'#e91e63',only:'#ff0000'},m=e=>Object.entries(e||{}).map(([e,t])=>({name:e,effects:Object.entries(t||{}).map(([e,t])=>({key:e,value:t}))})),u=e=>{const t=e.stairway;if(!t?.isOpen)return{isOpen:!1,isSimple:!1,text:'',elements:[],powers:[],laws:[],godlyRank:'',godKingdom:void 0};const a=m(t.elements),l=m(t.powers),o=m(t.laws),n=e.isCustom;return{isOpen:!0,isSimple:n,text:n&&t.elements?.custom?.desc||'',elements:a,powers:l,laws:o,godlyRank:t.godlyRank||'',godKingdom:t.godKingdom}};return(e,m)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Ui,[(0,c.createElementVNode)('div',Ri,[(0,c.createCommentVNode)(' 标题 '),m[31]||(m[31]=(0,c.createElementVNode)('div',{class:'panel-header'},[(0,c.createElementVNode)('h2',{class:'panel-title'},'信息确认'),(0,c.createElementVNode)('p',{class:'panel-subtitle'},'非自定义数据（除了装备）会直接写入 MVU 变量中，不会发送给 AI')],-1)),(0,c.createCommentVNode)(' 文档内容 '),(0,c.createElementVNode)('div',zi,[(0,c.createCommentVNode)(' 点数统计 '),(0,c.createElementVNode)('section',ji,[(0,c.createElementVNode)('div',Gi,[(0,c.createElementVNode)('div',Oi,[m[0]||(m[0]=(0,c.createElementVNode)('span',{class:'point-label'},'转生点数',-1)),(0,c.createElementVNode)('span',Ki,(0,c.toDisplayString)((0,c.unref)(t).character.reincarnationPoints),1)]),(0,c.createElementVNode)('div',Hi,[m[1]||(m[1]=(0,c.createElementVNode)('span',{class:'point-label'},'已消耗',-1)),(0,c.createElementVNode)('span',Ji,(0,c.toDisplayString)(l.value),1)]),(0,c.createElementVNode)('div',Qi,[m[2]||(m[2]=(0,c.createElementVNode)('span',{class:'point-label'},'剩余',-1)),(0,c.createElementVNode)('span',{class:(0,c.normalizeClass)(['point-value',{negative:o.value<0,positive:o.value>=0}])},(0,c.toDisplayString)(o.value),3)]),(0,c.createElementVNode)('div',Wi,[m[3]||(m[3]=(0,c.createElementVNode)('span',{class:'point-label'},'命运点数',-1)),(0,c.createElementVNode)('span',Xi,(0,c.toDisplayString)((0,c.unref)(t).character.destinyPoints),1)])])]),(0,c.createCommentVNode)(' 基本信息 '),(0,c.createElementVNode)('section',Yi,[m[12]||(m[12]=(0,c.createElementVNode)('h3',{class:'section-title'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-clipboard-list','aria-hidden':'true'}),(0,c.createElementVNode)('span',null,'基本信息')],-1)),(0,c.createElementVNode)('div',Zi,[(0,c.createElementVNode)('p',null,[m[4]||(m[4]=(0,c.createElementVNode)('strong',null,'姓名：',-1)),(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t).character.name||'（未设置）'),1)]),(0,c.createElementVNode)('p',null,[m[5]||(m[5]=(0,c.createElementVNode)('strong',null,'性别：',-1)),(0,c.createTextVNode)((0,c.toDisplayString)(n.value),1)]),(0,c.createElementVNode)('p',null,[m[6]||(m[6]=(0,c.createElementVNode)('strong',null,'年龄：',-1)),(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t).character.age)+' 岁',1)]),(0,c.createElementVNode)('p',null,[m[7]||(m[7]=(0,c.createElementVNode)('strong',null,'种族：',-1)),(0,c.createTextVNode)((0,c.toDisplayString)(r.value),1)]),(0,c.createElementVNode)('p',null,[m[8]||(m[8]=(0,c.createElementVNode)('strong',null,'身份：',-1)),(0,c.createTextVNode)((0,c.toDisplayString)(s.value),1)]),(0,c.createElementVNode)('p',null,[m[9]||(m[9]=(0,c.createElementVNode)('strong',null,'出生地：',-1)),(0,c.createTextVNode)((0,c.toDisplayString)(i.value),1)]),(0,c.createElementVNode)('p',null,[m[10]||(m[10]=(0,c.createElementVNode)('strong',null,'等级：',-1)),(0,c.createTextVNode)('Lv.'+(0,c.toDisplayString)((0,c.unref)(t).character.level),1)]),(0,c.createElementVNode)('p',null,[m[11]||(m[11]=(0,c.createElementVNode)('strong',null,'金钱：',-1)),(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t).character.money)+' G',1)])])]),(0,c.createCommentVNode)(' 属性 '),(0,c.createElementVNode)('section',ed,[m[13]||(m[13]=(0,c.createElementVNode)('h3',{class:'section-title'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-shield-halved','aria-hidden':'true'}),(0,c.createElementVNode)('span',null,'角色属性')],-1)),(0,c.createElementVNode)('div',td,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).finalAttributes,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('p',{key:t},[(0,c.createElementVNode)('strong',null,(0,c.toDisplayString)(t)+'：',1),(0,c.createElementVNode)('span',ad,(0,c.toDisplayString)(e),1)]))),128))])]),(0,c.createCommentVNode)(' 装备 '),(0,c.createElementVNode)('section',ld,[(0,c.createElementVNode)('h3',od,[m[14]||(m[14]=(0,c.createElementVNode)('i',{class:'fa-solid fa-shield-halved','aria-hidden':'true'},null,-1)),(0,c.createElementVNode)('span',null,'装备 ('+(0,c.toDisplayString)((0,c.unref)(t).selectedEquipments.length)+')',1)]),(0,c.unref)(t).selectedEquipments.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',nd,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).selectedEquipments,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:'item-entry'},[(0,c.createElementVNode)('p',rd,[(0,c.createElementVNode)('strong',null,(0,c.toDisplayString)(t+1)+'. ',1),(0,c.createElementVNode)('span',{style:(0,c.normalizeStyle)({color:d[e.rarity]})},(0,c.toDisplayString)(e.name),5),(0,c.createElementVNode)('span',cd,'['+(0,c.toDisplayString)(e.cost)+' 点]',1)]),(0,c.createElementVNode)('p',sd,[(0,c.createTextVNode)(' 类型：'+(0,c.toDisplayString)(e.type)+' ',1),e.tag&&e.tag.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('span',id,' | 标签：'+(0,c.toDisplayString)(e.tag.join('、')),1)):(0,c.createCommentVNode)('v-if',!0)]),Object.keys(e.effect||{}).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('p',dd,[m[15]||(m[15]=(0,c.createTextVNode)(' 效果： ',-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.effect,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:t,class:'effect-inline'},(0,c.toDisplayString)(t)+'：'+(0,c.toDisplayString)(e),1))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('p',md,'效果：无')),e.description?((0,c.openBlock)(),(0,c.createElementBlock)('p',ud,(0,c.toDisplayString)(e.description),1)):(0,c.createCommentVNode)('v-if',!0)]))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('p',pd,'未选择装备'))]),(0,c.createCommentVNode)(' 道具 '),(0,c.createElementVNode)('section',vd,[(0,c.createElementVNode)('h3',fd,[m[16]||(m[16]=(0,c.createElementVNode)('i',{class:'fa-solid fa-box-open','aria-hidden':'true'},null,-1)),(0,c.createElementVNode)('span',null,'道具 ('+(0,c.toDisplayString)((0,c.unref)(t).selectedItems.length)+')',1)]),(0,c.unref)(t).selectedItems.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Vd,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).selectedItems,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:'item-entry'},[(0,c.createElementVNode)('p',kd,[(0,c.createElementVNode)('strong',null,(0,c.toDisplayString)(t+1)+'. ',1),(0,c.createElementVNode)('span',{style:(0,c.normalizeStyle)({color:d[e.rarity]})},(0,c.toDisplayString)(e.name),5),e.quantity?((0,c.openBlock)(),(0,c.createElementBlock)('span',Nd,'× '+(0,c.toDisplayString)(e.quantity),1)):(0,c.createCommentVNode)('v-if',!0),(0,c.createElementVNode)('span',yd,'['+(0,c.toDisplayString)(e.cost)+' 点]',1)]),(0,c.createElementVNode)('p',Ed,[(0,c.createTextVNode)(' 类型：'+(0,c.toDisplayString)(e.type)+' ',1),e.tag&&e.tag.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('span',gd,' | 标签：'+(0,c.toDisplayString)(e.tag.join('、')),1)):(0,c.createCommentVNode)('v-if',!0)]),Object.keys(e.effect||{}).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('p',bd,[m[17]||(m[17]=(0,c.createTextVNode)(' 效果： ',-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.effect,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:t,class:'effect-inline'},(0,c.toDisplayString)(t)+'：'+(0,c.toDisplayString)(e),1))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('p',hd,'效果：无')),e.description?((0,c.openBlock)(),(0,c.createElementBlock)('p',Bd,(0,c.toDisplayString)(e.description),1)):(0,c.createCommentVNode)('v-if',!0)]))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('p',Cd,'未选择道具'))]),(0,c.createCommentVNode)(' 技能 '),(0,c.createElementVNode)('section',xd,[(0,c.createElementVNode)('h3',wd,[m[18]||(m[18]=(0,c.createElementVNode)('i',{class:'fa-solid fa-wand-magic','aria-hidden':'true'},null,-1)),(0,c.createElementVNode)('span',null,'技能 ('+(0,c.toDisplayString)((0,c.unref)(t).selectedSkills.length)+')',1)]),(0,c.unref)(t).selectedSkills.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Sd,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).selectedSkills,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:'item-entry'},[(0,c.createElementVNode)('p',Dd,[(0,c.createElementVNode)('strong',null,(0,c.toDisplayString)(t+1)+'. ',1),(0,c.createElementVNode)('span',{style:(0,c.normalizeStyle)({color:d[e.rarity]})},(0,c.toDisplayString)(e.name),5),(0,c.createElementVNode)('span',_d,'['+(0,c.toDisplayString)(e.cost)+' 点]',1)]),(0,c.createElementVNode)('p',Pd,[(0,c.createTextVNode)(' 类型：'+(0,c.toDisplayString)(e.type)+' ',1),e.tag&&e.tag.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('span',Fd,' | 标签：'+(0,c.toDisplayString)(e.tag.join('、')),1)):(0,c.createCommentVNode)('v-if',!0),e.consume?((0,c.openBlock)(),(0,c.createElementBlock)('span',Id,' | 消耗：'+(0,c.toDisplayString)(e.consume),1)):(0,c.createCommentVNode)('v-if',!0)]),Object.keys(e.effect||{}).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('p',$d,[m[19]||(m[19]=(0,c.createTextVNode)(' 效果： ',-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.effect,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:t,class:'effect-inline'},(0,c.toDisplayString)(t)+'：'+(0,c.toDisplayString)(e),1))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('p',Ld,'效果：无')),e.description?((0,c.openBlock)(),(0,c.createElementBlock)('p',qd,(0,c.toDisplayString)(e.description),1)):(0,c.createCommentVNode)('v-if',!0)]))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('p',Td,'未选择技能'))]),(0,c.createCommentVNode)(' 伙伴列表 '),(0,c.createElementVNode)('section',Ad,[(0,c.createElementVNode)('h3',Md,[m[20]||(m[20]=(0,c.createElementVNode)('i',{class:'fa-solid fa-user-astronaut','aria-hidden':'true'},null,-1)),(0,c.createElementVNode)('span',null,'伙伴列表 ('+(0,c.toDisplayString)((0,c.unref)(t).selectedPartners.length)+')',1)]),(0,c.unref)(t).selectedPartners.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ud,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).selectedPartners,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:'destined-entry'},[(0,c.createElementVNode)('p',Rd,[(0,c.createElementVNode)('strong',null,(0,c.toDisplayString)(t+1)+'. '+(0,c.toDisplayString)(e.name),1),(0,c.createElementVNode)('span',zd,'['+(0,c.toDisplayString)(e.cost)+' 点]',1)]),(0,c.createElementVNode)('p',jd,(0,c.toDisplayString)(e.race)+' | '+(0,c.toDisplayString)(e.identity.join('、'))+' | Lv.'+(0,c.toDisplayString)(e.level)+' | '+(0,c.toDisplayString)(e.lifeLevel),1),e.backgroundInfo?((0,c.openBlock)(),(0,c.createElementBlock)('p',Gd,(0,c.toDisplayString)(e.backgroundInfo),1)):(0,c.createCommentVNode)('v-if',!0),u(e).isOpen?((0,c.openBlock)(),(0,c.createElementBlock)('div',Od,[m[25]||(m[25]=(0,c.createElementVNode)('p',null,[(0,c.createElementVNode)('strong',null,'登神长阶：')],-1)),u(e).isSimple?((0,c.openBlock)(),(0,c.createElementBlock)('p',Kd,' • '+(0,c.toDisplayString)(u(e).text),1)):((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,{key:1},[u(e).elements.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Hd,[m[21]||(m[21]=(0,c.createElementVNode)('p',null,[(0,c.createElementVNode)('strong',null,'要素：')],-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(u(e).elements,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:`element-${e.name}`,class:'sub-item'},[(0,c.createElementVNode)('p',Jd,'• '+(0,c.toDisplayString)(e.name),1),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.effects,t=>((0,c.openBlock)(),(0,c.createElementBlock)('p',{key:`element-${e.name}-${t.key}`,class:'sub-item'},' • '+(0,c.toDisplayString)(t.key)+'：'+(0,c.toDisplayString)(t.value),1))),128))]))),128))])):(0,c.createCommentVNode)('v-if',!0),u(e).powers.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Qd,[m[22]||(m[22]=(0,c.createElementVNode)('p',null,[(0,c.createElementVNode)('strong',null,'权能：')],-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(u(e).powers,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:`power-${e.name}`,class:'sub-item'},[(0,c.createElementVNode)('p',Wd,'• '+(0,c.toDisplayString)(e.name),1),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.effects,t=>((0,c.openBlock)(),(0,c.createElementBlock)('p',{key:`power-${e.name}-${t.key}`,class:'sub-item'},' • '+(0,c.toDisplayString)(t.key)+'：'+(0,c.toDisplayString)(t.value),1))),128))]))),128))])):(0,c.createCommentVNode)('v-if',!0),u(e).laws.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Xd,[m[23]||(m[23]=(0,c.createElementVNode)('p',null,[(0,c.createElementVNode)('strong',null,'法则：')],-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(u(e).laws,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:`law-${e.name}`,class:'sub-item'},[(0,c.createElementVNode)('p',Yd,'• '+(0,c.toDisplayString)(e.name),1),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.effects,t=>((0,c.openBlock)(),(0,c.createElementBlock)('p',{key:`law-${e.name}-${t.key}`,class:'sub-item'},' • '+(0,c.toDisplayString)(t.key)+'：'+(0,c.toDisplayString)(t.value),1))),128))]))),128))])):(0,c.createCommentVNode)('v-if',!0),u(e).godlyRank?((0,c.openBlock)(),(0,c.createElementBlock)('p',Zd,' • 神位：'+(0,c.toDisplayString)(u(e).godlyRank),1)):(0,c.createCommentVNode)('v-if',!0),u(e).godKingdom?.name||u(e).godKingdom?.description?((0,c.openBlock)(),(0,c.createElementBlock)('div',em,[m[24]||(m[24]=(0,c.createElementVNode)('p',null,[(0,c.createElementVNode)('strong',null,'神国：')],-1)),u(e).godKingdom?.name?((0,c.openBlock)(),(0,c.createElementBlock)('p',tm,' • 名称：'+(0,c.toDisplayString)(u(e).godKingdom?.name),1)):(0,c.createCommentVNode)('v-if',!0),u(e).godKingdom?.description?((0,c.openBlock)(),(0,c.createElementBlock)('p',am,' • 描述：'+(0,c.toDisplayString)(u(e).godKingdom?.description),1)):(0,c.createCommentVNode)('v-if',!0)])):(0,c.createCommentVNode)('v-if',!0)],64))])):(0,c.createCommentVNode)('v-if',!0),e.comment?((0,c.openBlock)(),(0,c.createElementBlock)('p',lm,(0,c.toDisplayString)(e.comment),1)):(0,c.createCommentVNode)('v-if',!0),e.equip&&e.equip.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',om,[m[26]||(m[26]=(0,c.createElementVNode)('p',null,[(0,c.createElementVNode)('strong',null,'装备：')],-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.equip,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('p',{key:t,class:'sub-item'},' • '+(0,c.toDisplayString)(e.name||e),1))),128))])):(0,c.createCommentVNode)('v-if',!0),e.skills&&e.skills.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',nm,[m[27]||(m[27]=(0,c.createElementVNode)('p',null,[(0,c.createElementVNode)('strong',null,'技能：')],-1)),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.skills,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('p',{key:t,class:'sub-item'},' • '+(0,c.toDisplayString)(e.name),1))),128))])):(0,c.createCommentVNode)('v-if',!0)]))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('p',rm,'未选择伙伴'))]),(0,c.createCommentVNode)(' 初始开局 '),(0,c.createElementVNode)('section',cm,[m[28]||(m[28]=(0,c.createElementVNode)('h3',{class:'section-title'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-book-open','aria-hidden':'true'}),(0,c.createElementVNode)('span',null,'初始开局剧情')],-1)),(0,c.unref)(t).selectedBackground?((0,c.openBlock)(),(0,c.createElementBlock)('div',sm,[(0,c.createElementVNode)('p',im,[(0,c.createElementVNode)('strong',null,(0,c.toDisplayString)((0,c.unref)(t).selectedBackground.name),1)]),(0,c.unref)(t).selectedBackground.race||(0,c.unref)(t).selectedBackground.location?((0,c.openBlock)(),(0,c.createElementBlock)('p',dm,[(0,c.unref)(t).selectedBackground.race?((0,c.openBlock)(),(0,c.createElementBlock)('span',mm,'种族：'+(0,c.toDisplayString)((0,c.unref)(t).selectedBackground.race),1)):(0,c.createCommentVNode)('v-if',!0),(0,c.unref)(t).selectedBackground.race&&(0,c.unref)(t).selectedBackground.location?((0,c.openBlock)(),(0,c.createElementBlock)('span',um,' | ')):(0,c.createCommentVNode)('v-if',!0),(0,c.unref)(t).selectedBackground.location?((0,c.openBlock)(),(0,c.createElementBlock)('span',pm,'地点：'+(0,c.toDisplayString)((0,c.unref)(t).selectedBackground.location),1)):(0,c.createCommentVNode)('v-if',!0)])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 自定义开局显示用户输入的内容，否则显示预设描述 '),'【自定义开局】'===(0,c.unref)(t).selectedBackground.name&&(0,c.unref)(a).customBackgroundDescription?((0,c.openBlock)(),(0,c.createElementBlock)('p',vm,(0,c.toDisplayString)((0,c.unref)(a).customBackgroundDescription),1)):((0,c.openBlock)(),(0,c.createElementBlock)('p',fm,(0,c.toDisplayString)((0,c.unref)(t).selectedBackground.description),1))])):((0,c.openBlock)(),(0,c.createElementBlock)('p',Vm,'未选择初始开局剧情'))]),(0,c.createCommentVNode)(' 提示信息 '),0!==o.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',km,[o.value<0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Nm,[m[29]||(m[29]=(0,c.createElementVNode)('i',{class:'fa-solid fa-triangle-exclamation','aria-hidden':'true'},null,-1)),(0,c.createElementVNode)('span',null,'警告：转生点数不足 '+(0,c.toDisplayString)(Math.abs(o.value))+' 点，请返回调整',1)])):((0,c.openBlock)(),(0,c.createElementBlock)('div',ym,[m[30]||(m[30]=(0,c.createElementVNode)('i',{class:'fa-solid fa-circle-info','aria-hidden':'true'},null,-1)),(0,c.createElementVNode)('span',null,'提示：还有 '+(0,c.toDisplayString)(o.value)+' 点转生点数未使用',1)]))])):(0,c.createCommentVNode)('v-if',!0)])])]))}}),gm=(0,i.A)(Em,[['__scopeId','data-v-22222b1f']]),bm={};let hm=null;!async function(){const e=await async function(){return y('equipments.json','装备')}(),t=E(bm,e);hm=t}();const Bm={};let Cm=null;!async function(){const e=await async function(){return y('items.json','道具')}();Cm=E(Bm,e)}();const xm={class:'category-tabs'},wm=['onClick'],Sm={class:'tab-icon','aria-hidden':'true'},Dm={class:'tab-label'},_m=(0,c.defineComponent)({__name:'CategoryTabs',props:{modelValue:{}},emits:['update:modelValue'],setup(e,{emit:t}){const a=t,l=[{key:'equipment',label:'装备',icon:'fa-solid fa-shield-halved'},{key:'item',label:'道具',icon:'fa-solid fa-box-open'},{key:'skill',label:'技能',icon:'fa-solid fa-wand-magic'}];return(t,o)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',xm,[((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(l,t=>(0,c.createElementVNode)('button',{key:t.key,class:(0,c.normalizeClass)(['tab-button',{active:e.modelValue===t.key}]),onClick:e=>{return l=t.key,void a('update:modelValue',l);var l}},[(0,c.createElementVNode)('span',Sm,[(0,c.createElementVNode)('i',{class:(0,c.normalizeClass)(t.icon)},null,2)]),(0,c.createElementVNode)('span',Dm,(0,c.toDisplayString)(t.label),1)],10,wm)),64))]))}}),Pm=(0,i.A)(_m,[['__scopeId','data-v-53e67b8a']]),Fm={class:'form-body'},Im={class:'form-row'},$m={class:'category-buttons'},Lm=['disabled','onClick'],qm={class:'form-row'},Tm={class:'form-row'},Am={class:'form-row'},Mm={class:'rarity-buttons'},Um=['onClick'],Rm={class:'cost-info'},zm={class:'cost-value'},jm={class:'cost-range'},Gm={class:'form-row'},Om={key:0,class:'form-row'},Km={key:1,class:'form-row'},Hm={class:'form-row'},Jm={class:'form-row'},Qm={class:'form-actions'},Wm=['disabled'],Xm=(0,c.defineComponent)({__name:'CustomItemForm',emits:['add'],setup(e,{expose:t,emit:a}){const l=a,o=q(),n=(0,c.ref)(!1),r=(0,c.ref)(!1),s=(0,c.ref)(!1),i=(0,c.computed)(()=>o.editingCustomItemName),d=(0,c.computed)(()=>''!==i.value.trim()),m=()=>{o.updateEditingCustomItemName(''),o.resetCustomItemForm()},u=(0,c.computed)({get:()=>o.customItemForm.categoryType,set:e=>o.updateCustomItemForm('categoryType',e)}),v=(0,c.computed)({get:()=>o.customItemForm.customItemType,set:e=>o.updateCustomItemForm('customItemType',e)}),f=(0,c.computed)({get:()=>o.customItemForm.itemName,set:e=>o.updateCustomItemForm('itemName',e)}),k=(0,c.computed)({get:()=>o.customItemForm.itemRarity,set:e=>o.updateCustomItemForm('itemRarity',e)}),N=(0,c.computed)({get:()=>o.customItemForm.itemTag,set:e=>o.updateCustomItemForm('itemTag',e)}),y=(0,c.computed)({get:()=>o.customItemForm.itemEffect,set:e=>o.updateCustomItemForm('itemEffect',e)}),E=(0,c.computed)({get:()=>o.customItemForm.itemDescription,set:e=>o.updateCustomItemForm('itemDescription',e)}),g=(0,c.computed)({get:()=>o.customItemForm.itemConsume,set:e=>o.updateCustomItemForm('itemConsume',e)}),b=(0,c.computed)({get:()=>o.customItemForm.itemQuantity,set:e=>o.updateCustomItemForm('itemQuantity',e)}),h=p,B=V,C=(0,c.computed)(()=>{const e=.5+.5*Math.random();return function(e,t=.5){const a=fo[e],l=a.min+(a.max-a.min)*t;return Math.round(l)}(k.value,e)}),x=(0,c.computed)(()=>function(e){const t=fo[e];return`${t.min}-${t.max}`}(k.value)),w=(0,c.computed)(()=>''!==f.value.trim()&&''!==v.value.trim()&&Object.keys(y.value||{}).length>0),S=()=>{o.resetCustomItemForm()};t({fillFormByItem:(e,t)=>{o.setCustomItemForm({categoryType:t,customItemType:e.type||'',itemName:e.name||'',itemRarity:e.rarity,itemTag:e.tag?[...e.tag]:[],itemEffect:e.effect?{...e.effect}:{},itemDescription:e.description||'',itemConsume:'skill'===t&&e.consume||'',itemQuantity:'item'===t&&e.quantity||1}),o.updateEditingCustomItemName(e.name||''),n.value=!0}});const D=()=>{r.value=!0},P=()=>{r.value=!1,S()},F=()=>{r.value=!1},I=()=>{w.value&&(s.value=!0)},L=()=>{s.value=!1},T=()=>{s.value=!1;const e={name:f.value.trim(),cost:C.value,type:v.value.trim(),tag:N.value,rarity:k.value,effect:y.value,description:E.value.trim()||'自定义物品',isCustom:!0};let t;t='skill'===u.value?{...e,consume:g.value.trim()||'',isCustom:!0}:'item'===u.value?{...e,quantity:b.value,isCustom:!0}:e,l('add',t,u.value,i.value.trim()),S()};return(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['custom-item-form',{expanded:n.value}])},[(0,c.createElementVNode)('div',{class:'form-header',onClick:t[0]||(t[0]=e=>n.value=!n.value)},[t[8]||(t[8]=(0,c.createElementVNode)('div',{class:'header-left'},[(0,c.createElementVNode)('h3',{class:'form-title'},'✨ 自定义'),(0,c.createElementVNode)('div',{class:'form-desc'},'创建您的专属物品、装备或技能')],-1)),(0,c.createElementVNode)('div',{class:(0,c.normalizeClass)(['toggle-icon',{rotated:n.value}])},'▼',2)]),(0,c.withDirectives)((0,c.createElementVNode)('div',Fm,[(0,c.createCommentVNode)(' 大分类选择 '),(0,c.createElementVNode)('div',Im,[t[9]||(t[9]=(0,c.createElementVNode)('label',{class:'form-label'},'添加到分类',-1)),(0,c.createElementVNode)('div',$m,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(B),e=>((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:e.value,class:(0,c.normalizeClass)(['category-btn',{active:u.value===e.value,disabled:d.value}]),disabled:d.value,onClick:t=>u.value=e.value},(0,c.toDisplayString)(e.label),11,Lm))),128))])]),(0,c.createCommentVNode)(' 名称 '),(0,c.createElementVNode)('div',qm,[(0,c.createVNode)((0,c.unref)($l),{label:'名称',required:''}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:f.value,'onUpdate:modelValue':t[1]||(t[1]=e=>f.value=e),placeholder:'请输入物品名称',maxlength:50},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 类型 '),(0,c.createElementVNode)('div',Tm,[(0,c.createVNode)((0,c.unref)($l),{label:'类型',required:''}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:v.value,'onUpdate:modelValue':t[2]||(t[2]=e=>v.value=e),placeholder:'例如：武器、防具、消耗品、主动、被动等',maxlength:20},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 品质 '),(0,c.createElementVNode)('div',Am,[(0,c.createVNode)((0,c.unref)($l),{label:'品质',required:''}),(0,c.createElementVNode)('div',Mm,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(h),e=>((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:e.value,class:(0,c.normalizeClass)(['rarity-btn',{active:k.value===e.value}]),style:(0,c.normalizeStyle)({'--rarity-color':e.color}),onClick:t=>k.value=e.value},(0,c.toDisplayString)(e.label),15,Um))),128))]),(0,c.createElementVNode)('div',Rm,[t[10]||(t[10]=(0,c.createElementVNode)('span',{class:'cost-label'},'消耗点数：',-1)),(0,c.createElementVNode)('span',zm,(0,c.toDisplayString)(C.value),1),(0,c.createElementVNode)('span',jm,'（范围：'+(0,c.toDisplayString)(x.value)+'）',1)])]),(0,c.createCommentVNode)(' 标签 '),(0,c.createElementVNode)('div',Gm,[(0,c.createVNode)((0,c.unref)($l),{label:'标签'}),(0,c.createVNode)((0,c.unref)(Ra),{modelValue:N.value,'onUpdate:modelValue':t[3]||(t[3]=e=>N.value=e),placeholder:'输入标签后按回车添加或保存','add-button-text':'添加标签','empty-text':'暂无标签，点击下方按钮添加'},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 数量（仅道具分类） '),'item'===u.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',Om,[(0,c.createVNode)((0,c.unref)($l),{label:'数量'}),(0,c.createVNode)((0,c.unref)(Rl),{modelValue:b.value,'onUpdate:modelValue':t[4]||(t[4]=e=>b.value=e),min:1,max:99,placeholder:'请输入物品数量'},null,8,['modelValue'])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 消耗（仅技能分类） '),'skill'===u.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',Km,[(0,c.createVNode)((0,c.unref)($l),{label:'消耗'}),(0,c.createVNode)((0,c.unref)(sl),{modelValue:g.value,'onUpdate:modelValue':t[5]||(t[5]=e=>g.value=e),placeholder:'例如：[动作: 50 SP]'},null,8,['modelValue'])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 效果 '),(0,c.createElementVNode)('div',Hm,[(0,c.createVNode)((0,c.unref)($l),{label:'效果',required:''}),(0,c.createVNode)((0,c.unref)(_l),{modelValue:y.value,'onUpdate:modelValue':t[6]||(t[6]=e=>y.value=e),'placeholder-key':'效果名','placeholder-value':'效果内容','add-button-text':'添加效果','empty-text':'暂无效果条目，点击下方按钮添加'},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 描述 '),(0,c.createElementVNode)('div',Jm,[(0,c.createVNode)((0,c.unref)($l),{label:'描述'}),(0,c.createVNode)((0,c.unref)(Zt),{modelValue:E.value,'onUpdate:modelValue':t[7]||(t[7]=e=>E.value=e),placeholder:'请描述物品的背景故事...',rows:2},null,8,['modelValue'])]),(0,c.createCommentVNode)(' 操作按钮 '),(0,c.createElementVNode)('div',Qm,[(0,c.createElementVNode)('button',{class:'btn-reset',onClick:D},'清空'),d.value?((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:0,class:'btn-cancel',onClick:m},'取消编辑')):(0,c.createCommentVNode)('v-if',!0),(0,c.createElementVNode)('button',{class:'btn-submit',disabled:!w.value,onClick:I},(0,c.toDisplayString)(d.value?'确认修改':'添加到已选项目'),9,Wm)])],512),[[c.vShow,n.value]]),(0,c.createCommentVNode)(' 清空确认弹窗 '),(0,c.createVNode)(ga,{visible:r.value,title:'确认清空',message:'确定要清空所有已填写的内容吗？此操作不可撤销。','confirm-text':'确认清空','cancel-text':'取消',type:'danger',onConfirm:P,onCancel:F},null,8,['visible']),(0,c.createCommentVNode)(' 添加/修改确认弹窗 '),(0,c.createVNode)(ga,{visible:s.value,title:d.value?'确认修改':'确认添加',message:d.value?`确定要将「${i.value}」更新为「${f.value}」吗？`:`确定要将「${f.value}」添加到已选项目吗？`,'confirm-text':d.value?'确认修改':'确认添加','cancel-text':'取消',type:'info',onConfirm:T,onCancel:L},null,8,['visible','title','message','confirm-text'])],2))}}),Ym=(0,i.A)(Xm,[['__scopeId','data-v-59c411bc']]),Zm={class:'card-header'},eu={class:'item-name'},tu={class:'card-body'},au={class:'item-info'},lu={class:'info-value'},ou={key:0,class:'item-info'},nu={class:'tag-list'},ru={key:1,class:'item-info'},cu={class:'info-value quantity'},su={key:2,class:'item-info'},iu={class:'info-value consume'},du={key:3,class:'item-effect'},mu={class:'effect-grid'},uu={class:'effect-key'},pu={class:'effect-value'},vu={class:'item-description'},fu={class:'card-footer'},Vu={class:'item-cost'},ku={class:'cost-value'},Nu={key:0,class:'selected-badge'},yu=(0,c.defineComponent)({__name:'ItemCard',props:{item:{},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:['select','deselect'],setup(e,{emit:t}){const a=e,l=t,o={only:'#ff6f00',common:'#9e9e9e',uncommon:'#388e3c',rare:'#193c96',epic:'#9c27b0',legendary:'#9e7121',mythic:'#d32f2f'},n={only:'唯一',common:'普通',uncommon:'优良',rare:'稀有',epic:'史诗',legendary:'传说',mythic:'神话'},r=()=>{a.disabled||(a.selected?l('deselect',a.item):l('select',a.item))},s=e=>'consume'in e;return(t,a)=>{return(0,c.openBlock)(),(0,c.createElementBlock)('div',{class:(0,c.normalizeClass)(['item-card',{'is-selected':e.selected,'is-disabled':e.disabled}]),style:(0,c.normalizeStyle)({'--rarity-color':o[e.item.rarity]}),onClick:r},[(0,c.createCommentVNode)(' 卡片头部 '),(0,c.createElementVNode)('div',Zm,[(0,c.createElementVNode)('div',eu,(0,c.toDisplayString)(e.item.name),1),(0,c.createElementVNode)('div',{class:'item-rarity',style:(0,c.normalizeStyle)({color:o[e.item.rarity]})},(0,c.toDisplayString)(n[e.item.rarity]),5)]),(0,c.createCommentVNode)(' 卡片内容 '),(0,c.createElementVNode)('div',tu,[(0,c.createElementVNode)('div',au,[a[0]||(a[0]=(0,c.createElementVNode)('span',{class:'info-label'},'类型:',-1)),(0,c.createElementVNode)('span',lu,(0,c.toDisplayString)(e.item.type),1)]),'tag'in e.item&&e.item.tag&&e.item.tag.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',ou,[a[1]||(a[1]=(0,c.createElementVNode)('span',{class:'info-label'},'标签:',-1)),(0,c.createElementVNode)('div',nu,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.item.tag,e=>((0,c.openBlock)(),(0,c.createElementBlock)('span',{key:e,class:'tag-chip'},(0,c.toDisplayString)(e),1))),128))])])):(0,c.createCommentVNode)('v-if',!0),(i=e.item,'quantity'in i&&e.item.quantity?((0,c.openBlock)(),(0,c.createElementBlock)('div',ru,[a[2]||(a[2]=(0,c.createElementVNode)('span',{class:'info-label'},'数量:',-1)),(0,c.createElementVNode)('span',cu,(0,c.toDisplayString)(e.item.quantity),1)])):(0,c.createCommentVNode)('v-if',!0)),s(e.item)&&e.item.consume?((0,c.openBlock)(),(0,c.createElementBlock)('div',su,[a[3]||(a[3]=(0,c.createElementVNode)('span',{class:'info-label'},'消耗:',-1)),(0,c.createElementVNode)('span',iu,(0,c.toDisplayString)(e.item.consume),1)])):(0,c.createCommentVNode)('v-if',!0),'effect'in e.item&&Object.keys(e.item.effect||{}).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',du,[a[4]||(a[4]=(0,c.createElementVNode)('div',{class:'effect-label'},'效果:',-1)),(0,c.createElementVNode)('div',mu,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((l=e.item.effect,l?Object.entries(l):[]),([e,t],a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:`${e}-${a}`,class:'effect-row'},[(0,c.createElementVNode)('span',uu,(0,c.toDisplayString)(e),1),(0,c.createElementVNode)('span',pu,(0,c.toDisplayString)(t),1)]))),128))])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createElementVNode)('div',vu,(0,c.toDisplayString)(e.item.description),1)]),(0,c.createCommentVNode)(' 卡片底部 '),(0,c.createElementVNode)('div',fu,[(0,c.createElementVNode)('div',Vu,[a[5]||(a[5]=(0,c.createElementVNode)('span',{class:'cost-label'},'消耗点数:',-1)),(0,c.createElementVNode)('span',ku,(0,c.toDisplayString)(e.item.cost),1)]),e.selected?((0,c.openBlock)(),(0,c.createElementBlock)('div',Nu,'✓ 已选择')):(0,c.createCommentVNode)('v-if',!0)])],6);var l,i}}}),Eu=(0,i.A)(yu,[['__scopeId','data-v-6ed91820']]),gu={class:'item-list'},bu={key:0,class:'empty-state'},hu={key:1,class:'item-grid'},Bu=(0,c.defineComponent)({__name:'ItemList',props:{items:{},selectedItems:{}},emits:['select','deselect'],setup(e,{emit:t}){const a=e,l=t,{availablePoints:o}=st(),{isSelected:n,isDisabled:r}=We(()=>a.selectedItems,()=>o.value),s=e=>{l('select',e)},i=e=>{l('deselect',e)};return(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',gu,[0===e.items.length?((0,c.openBlock)(),(0,c.createElementBlock)('div',bu,[...a[0]||(a[0]=[(0,c.createElementVNode)('div',{class:'empty-icon'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-box-open','aria-hidden':'true'})],-1),(0,c.createElementVNode)('div',{class:'empty-text'},'该分类下暂无物品',-1)])])):((0,c.openBlock)(),(0,c.createElementBlock)('div',hu,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.items,e=>((0,c.openBlock)(),(0,c.createBlock)(Eu,{key:e.name,item:e,selected:(0,c.unref)(n)(e),disabled:(0,c.unref)(r)(e),onSelect:s,onDeselect:i},null,8,['item','selected','disabled']))),128))]))]))}}),Cu=(0,i.A)(Bu,[['__scopeId','data-v-0cb1e7b4']]),xu=(0,c.defineComponent)({__name:'MoneyExchangeCard',setup(e){const t=L(),a=(0,c.ref)(0),l=(0,c.computed)(()=>{const e=Math.ceil(t.character.money/100);return Math.max(0,t.character.reincarnationPoints-(t.consumedPoints-e))}),o=()=>{if(a.value<=0||a.value>l.value)return;const e=100*Math.max(0,Math.round(a.value));t.updateCharacterField('money',e),a.value=0},n=()=>{l.value<=0||(t.updateCharacterField('money',100*l.value),a.value=0)},r=()=>{t.updateCharacterField('money',0),a.value=0};return(e,s)=>((0,c.openBlock)(),(0,c.createBlock)(Jr,{modelValue:(0,c.unref)(a),'onUpdate:modelValue':s[0]||(s[0]=e=>(0,c.isRef)(a)?a.value=e:null),title:'金钱兑换','rate-text':'(1转生点 = 100 G)','icon-class':'fa-solid fa-coins','current-label':'当前：','current-value':(0,c.unref)(t).character.money,'current-unit':'G','gain-unit':'G','gain-per-point':100,'max-exchangeable':(0,c.unref)(l),theme:'gold','exchange-all-title':'将所有剩余转生点数兑换为金钱','reset-title':'重置已兑换的金钱','reset-disabled':(0,c.unref)(t).character.money<=0,onExchange:o,onExchangeAll:n,onReset:r},null,8,['modelValue','current-value','max-exchangeable','reset-disabled']))}}),wu={class:'rarity-filter'},Su={class:'filter-buttons'},Du=['onClick'],_u=(0,c.defineComponent)({__name:'RarityFilter',props:{modelValue:{}},emits:['update:modelValue'],setup(e,{emit:t}){const a=t,l=[{value:'all',label:'全部',color:'#666'},...p.slice().reverse()];return(t,o)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',wu,[o[0]||(o[0]=(0,c.createElementVNode)('div',{class:'filter-label'},'品质筛选：',-1)),(0,c.createElementVNode)('div',Su,[((0,c.openBlock)(),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(l,t=>(0,c.createElementVNode)('button',{key:t.value,class:(0,c.normalizeClass)(['filter-btn',{active:e.modelValue===t.value}]),style:(0,c.normalizeStyle)({'--rarity-color':t.color}),onClick:e=>{return l=t.value,void a('update:modelValue',l);var l}},(0,c.toDisplayString)(t.label),15,Du)),64))])]))}}),Pu=(0,i.A)(_u,[['__scopeId','data-v-4102fea8']]),Fu={class:'selected-panel'},Iu={class:'panel-header'},$u={class:'header-top'},Lu={class:'count-badge'},qu={class:'points-info'},Tu={class:'points-total'},Au={class:'points-consumed'},Mu={class:'panel-body'},Uu={key:0,class:'section'},Ru={class:'section-title'},zu={class:'count'},ju={class:'item-list'},Gu=['onClick'],Ou={class:'item-info'},Ku={class:'item-name'},Hu={class:'name-text'},Ju={key:0,class:'custom-tag'},Qu={class:'item-cost'},Wu=['onClick'],Xu={key:1,class:'section'},Yu={class:'section-title'},Zu={class:'count'},ep={class:'item-list'},tp=['onClick'],ap={class:'item-info'},lp={class:'item-name'},op={class:'name-text'},np={key:0,class:'item-quantity'},rp={key:1,class:'custom-tag'},cp={class:'item-cost'},sp=['onClick'],ip={key:2,class:'section'},dp={class:'section-title'},mp={class:'count'},up={class:'item-list'},pp=['onClick'],vp={class:'item-info'},fp={class:'item-name'},Vp={class:'name-text'},kp={key:0,class:'custom-tag'},Np={class:'item-cost'},yp=['onClick'],Ep={key:3,class:'empty-state'},gp={class:'panel-footer'},bp={class:'total-info'},hp={class:'value'},Bp=(0,c.defineComponent)({__name:'SelectedPanel',props:{equipments:{},items:{},skills:{}},emits:['remove','edit-custom','clear'],setup(e,{emit:t}){const a=e,l=t,{availablePoints:o,totalPoints:n,consumedPoints:r}=st(),s=(e,t)=>{l('remove',e,t)},i=(e,t)=>{l('edit-custom',e,t)},d=()=>{l('clear')},m=(0,c.computed)(()=>a.equipments.length+a.items.length+a.skills.length),u=(0,c.computed)(()=>_.sum([_.sumBy(a.equipments,'cost'),_.sumBy(a.items,'cost'),_.sumBy(a.skills,'cost')]));return(t,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Fu,[(0,c.createElementVNode)('div',Iu,[(0,c.createElementVNode)('div',$u,[a[0]||(a[0]=(0,c.createElementVNode)('h3',{class:'title'},'已选项目',-1)),(0,c.createElementVNode)('div',Lu,(0,c.toDisplayString)((0,c.unref)(m)),1)]),(0,c.createElementVNode)('div',qu,[a[1]||(a[1]=(0,c.createElementVNode)('span',{class:'points-label'},'转生点数：',-1)),(0,c.createElementVNode)('span',{class:(0,c.normalizeClass)(['points-value',{negative:(0,c.unref)(o)<0}])},(0,c.toDisplayString)((0,c.unref)(o)),3),(0,c.createElementVNode)('span',Tu,'/ '+(0,c.toDisplayString)((0,c.unref)(n)),1),(0,c.createElementVNode)('span',Au,'（已消耗：'+(0,c.toDisplayString)((0,c.unref)(r))+'）',1)])]),(0,c.createElementVNode)('div',Mu,[(0,c.createCommentVNode)(' 装备列表 '),e.equipments.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Uu,[(0,c.createElementVNode)('div',Ru,[a[2]||(a[2]=(0,c.createElementVNode)('span',{class:'section-label'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-shield-halved','aria-hidden':'true'}),(0,c.createElementVNode)('span',null,'装备')],-1)),(0,c.createElementVNode)('span',zu,'('+(0,c.toDisplayString)(e.equipments.length)+')',1)]),(0,c.createElementVNode)('div',ju,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.equipments,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:(0,c.normalizeClass)(['selected-item',{'is-custom':e.isCustom}]),onClick:t=>e.isCustom&&i(e,'equipment')},[(0,c.createElementVNode)('div',Ou,[(0,c.createElementVNode)('div',Ku,[(0,c.createElementVNode)('span',Hu,(0,c.toDisplayString)(e.name),1),e.isCustom?((0,c.openBlock)(),(0,c.createElementBlock)('span',Ju,[...a[3]||(a[3]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-pen-to-square','aria-hidden':'true'},null,-1)])])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',Qu,(0,c.toDisplayString)(e.cost)+' 点',1)]),(0,c.createElementVNode)('button',{class:'remove-btn',onClick:(0,c.withModifiers)(t=>s(e,'equipment'),['stop'])},[...a[4]||(a[4]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark','aria-hidden':'true'},null,-1)])],8,Wu)],10,Gu))),128))])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 道具列表 '),e.items.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Xu,[(0,c.createElementVNode)('div',Yu,[a[5]||(a[5]=(0,c.createElementVNode)('span',{class:'section-label'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-box-open','aria-hidden':'true'}),(0,c.createElementVNode)('span',null,'道具')],-1)),(0,c.createElementVNode)('span',Zu,'('+(0,c.toDisplayString)(e.items.length)+')',1)]),(0,c.createElementVNode)('div',ep,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.items,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:(0,c.normalizeClass)(['selected-item',{'is-custom':e.isCustom}]),onClick:t=>e.isCustom&&i(e,'item')},[(0,c.createElementVNode)('div',ap,[(0,c.createElementVNode)('div',lp,[(0,c.createElementVNode)('span',op,(0,c.toDisplayString)(e.name),1),e.quantity?((0,c.openBlock)(),(0,c.createElementBlock)('span',np,'× '+(0,c.toDisplayString)(e.quantity),1)):(0,c.createCommentVNode)('v-if',!0),e.isCustom?((0,c.openBlock)(),(0,c.createElementBlock)('span',rp,[...a[6]||(a[6]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-pen-to-square','aria-hidden':'true'},null,-1)])])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',cp,(0,c.toDisplayString)(e.cost)+' 点',1)]),(0,c.createElementVNode)('button',{class:'remove-btn',onClick:(0,c.withModifiers)(t=>s(e,'item'),['stop'])},[...a[7]||(a[7]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark','aria-hidden':'true'},null,-1)])],8,sp)],10,tp))),128))])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 技能列表 '),e.skills.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',ip,[(0,c.createElementVNode)('div',dp,[a[8]||(a[8]=(0,c.createElementVNode)('span',{class:'section-label'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-wand-magic','aria-hidden':'true'}),(0,c.createElementVNode)('span',null,'技能')],-1)),(0,c.createElementVNode)('span',mp,'('+(0,c.toDisplayString)(e.skills.length)+')',1)]),(0,c.createElementVNode)('div',up,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(e.skills,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:(0,c.normalizeClass)(['selected-item',{'is-custom':e.isCustom}]),onClick:t=>e.isCustom&&i(e,'skill')},[(0,c.createElementVNode)('div',vp,[(0,c.createElementVNode)('div',fp,[(0,c.createElementVNode)('span',Vp,(0,c.toDisplayString)(e.name),1),e.isCustom?((0,c.openBlock)(),(0,c.createElementBlock)('span',kp,[...a[9]||(a[9]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-pen-to-square','aria-hidden':'true'},null,-1)])])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',Np,(0,c.toDisplayString)(e.cost)+' 点',1)]),(0,c.createElementVNode)('button',{class:'remove-btn',onClick:(0,c.withModifiers)(t=>s(e,'skill'),['stop'])},[...a[10]||(a[10]=[(0,c.createElementVNode)('i',{class:'fa-solid fa-xmark','aria-hidden':'true'},null,-1)])],8,yp)],10,pp))),128))])])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 空状态 '),0===(0,c.unref)(m)?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ep,[...a[11]||(a[11]=[(0,c.createElementVNode)('div',{class:'empty-icon'},[(0,c.createElementVNode)('i',{class:'fa-solid fa-bullseye','aria-hidden':'true'})],-1),(0,c.createElementVNode)('div',{class:'empty-text'},'还没有选择任何物品',-1)])])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',gp,[(0,c.createElementVNode)('div',bp,[a[12]||(a[12]=(0,c.createElementVNode)('span',{class:'label'},'总消耗：',-1)),(0,c.createElementVNode)('span',hp,(0,c.toDisplayString)((0,c.unref)(u))+' 点',1)]),(0,c.unref)(m)>0?((0,c.openBlock)(),(0,c.createElementBlock)('button',{key:0,class:'clear-btn',onClick:d},'清空全部')):(0,c.createCommentVNode)('v-if',!0)])]))}}),Cp=(0,i.A)(Bp,[['__scopeId','data-v-68795a6e']]),xp={class:'selections'},wp={class:'selections-container'},Sp={class:'selection-area'},Dp={class:'custom-area'},_p={class:'summary-area'},Pp=(0,c.defineComponent)({__name:'index',setup(e){const t=L(),a=q(),l=(0,c.ref)(null),o=(0,c.ref)('equipment'),n=(0,c.ref)(''),r=(0,c.ref)('all'),s=e=>e,i=(0,c.computed)(()=>hm||bm),d=(0,c.computed)(()=>Cm||Bm),m=(0,c.computed)(()=>F()),u=(0,c.computed)(()=>'自定义'===t.character.race?t.character.customRace:t.character.race),p=(0,c.computed)(()=>Object.keys(h.value).filter(e=>'自定义'!==e)),v=(0,c.computed)(()=>{switch(o.value){case'equipment':return Object.keys(i.value);case'item':return Object.keys(d.value);case'skill':return V.value;default:return[]}}),f=e=>'skill'!==o.value||(!p.value.includes(e)||u.value===e),V=(0,c.computed)(()=>{if('skill'!==o.value)return[];const e=Object.keys(m.value),[t,a]=_.partition(e,f);return[...t,...a]});(0,c.watch)(o,()=>{n.value=v.value[0]||'',r.value='all'}),(0,c.onMounted)(()=>{n.value=v.value[0]||''}),(0,c.watch)(()=>[t.character.race,t.character.customRace],()=>{if('skill'===o.value&&!f(n.value)){const e=_.find(v.value,f)||'';n.value=e}},{deep:!0});const k=(0,c.computed)(()=>{let e=[];switch(o.value){case'equipment':e=i.value[n.value]||[];break;case'item':e=d.value[n.value]||[];break;case'skill':e=m.value[n.value]||[]}return'all'!==r.value?e.filter(e=>e.rarity===r.value):e}),N=(0,c.computed)(()=>{switch(o.value){case'equipment':return t.selectedEquipments;case'item':return t.selectedItems;case'skill':return t.selectedSkills;default:return[]}}),y=e=>{switch(o.value){case'equipment':t.addEquipment(e);break;case'item':t.addItem(e);break;case'skill':t.addSkill(e)}},E=e=>{switch(o.value){case'equipment':t.removeEquipment(e);break;case'item':t.removeItem(e);break;case'skill':t.removeSkill(e)}},g=(e,a)=>{switch(a){case'equipment':t.removeEquipment(e);break;case'item':t.removeItem(e);break;case'skill':t.removeSkill(e)}},b=()=>{t.clearSelections()},B=(e,l,o)=>{const n=o?.trim();switch(l){case'equipment':n?t.replaceEquipmentByName(e,n):t.addEquipment(e);break;case'item':n?t.replaceItemByName(e,n):t.addItem(e);break;case'skill':n?t.replaceSkillByName(e,n):t.addSkill(e)}a.updateEditingCustomItemName('')},C=(e,t)=>{l.value?.fillFormByItem(e,t),toastr.info(`已回填自定义${'equipment'===t?'装备':'item'===t?'道具':'技能'}「${e.name}」`)};return(e,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',xp,[(0,c.createElementVNode)('div',wp,[(0,c.createCommentVNode)(' 上半部分：选择区域 '),(0,c.createElementVNode)('div',Sp,[(0,c.createCommentVNode)(' 大分类标签 '),(0,c.createVNode)(Pm,{modelValue:(0,c.unref)(o),'onUpdate:modelValue':a[0]||(a[0]=e=>(0,c.isRef)(o)?o.value=e:null)},null,8,['modelValue']),(0,c.createCommentVNode)(' 选择主体区域 - 使用通用布局组件 '),(0,c.createVNode)(jt,{modelValue:(0,c.unref)(n),'onUpdate:modelValue':a[2]||(a[2]=e=>(0,c.isRef)(n)?n.value=e:null),categories:(0,c.unref)(v),'disabled-categories':'skill'!==o.value?[]:p.value.filter(e=>e!==u.value),'category-name-formatter':s},{filter:(0,c.withCtx)(()=>[(0,c.createVNode)(Pu,{modelValue:(0,c.unref)(r),'onUpdate:modelValue':a[1]||(a[1]=e=>(0,c.isRef)(r)?r.value=e:null)},null,8,['modelValue'])]),content:(0,c.withCtx)(()=>[(0,c.createVNode)(Cu,{items:(0,c.unref)(k),'selected-items':(0,c.unref)(N),onSelect:y,onDeselect:E},null,8,['items','selected-items'])]),_:1},8,['modelValue','categories','disabled-categories'])]),(0,c.createCommentVNode)(' 自定义物品区域 '),(0,c.createElementVNode)('div',Dp,[(0,c.createVNode)(xu),(0,c.createVNode)(Ym,{ref_key:'customItemFormRef',ref:l,onAdd:B},null,512)]),(0,c.createCommentVNode)(' 下半部分：已选面板 '),(0,c.createElementVNode)('div',_p,[(0,c.createVNode)(Cp,{equipments:(0,c.unref)(t).selectedEquipments,items:(0,c.unref)(t).selectedItems,skills:(0,c.unref)(t).selectedSkills,onRemove:g,onEditCustom:C,onClear:b},null,8,['equipments','items','skills'])])])]))}}),Fp=(0,i.A)(Pp,[['__scopeId','data-v-5acd2d02']]),Ip=[{path:lt,name:Ye,component:Lt,redirect:ot,children:[{path:'basic',name:Ze,component:Mi,meta:{title:Xe[0].title,step:1}},{path:'selections',name:et,component:Fp,meta:{title:Xe[1].title,step:2}},{path:'background',name:tt,component:ei,meta:{title:Xe[2].title,step:3}},{path:'confirm',name:at,component:gm,meta:{title:Xe[3].title,step:4}}]}],$p=(0,u.createRouter)({history:(0,u.createMemoryHistory)(),routes:Ip}),Lp=(0,c.createApp)(m);$(()=>{Lp.use(Ge),Lp.use($p),Lp.mount('#app')});</script><style>*{margin:0;padding:0;box-sizing:border-box}:root{--primary-bg:#f5efe6;--card-bg:rgba(240,230,210,0.95);--input-bg:#fff9f0;--border-color:#d4c4b0;--border-color-strong:#8b7355;--text-color:#3a3a3a;--text-light:#666666;--title-color:#5c4033;--accent-color:#d4af37;--error-color:#d32f2f;--success-color:#388e3c;--button-bg:#c6b8a5;--button-hover:#b0a295;--points-color:#5c4033;--border-color-light:#e0d5c7;--font-title:'Cinzel',serif;--font-body:'Segoe UI','Microsoft YaHei',sans-serif;--font-mono:'Monaco','Menlo',monospace;--spacing-xs:4px;--spacing-sm:8px;--spacing-md:12px;--spacing-lg:16px;--spacing-xl:24px;--spacing-2xl:32px;--radius-sm:2px;--radius-md:4px;--radius-lg:8px;--shadow-sm:0 1px 3px rgba(0,0,0,0.1);--shadow-md:0 2px 8px rgba(0,0,0,0.12);--shadow-lg:0 4px 16px rgba(0,0,0,0.15);--transition-fast:0.15s ease-in-out;--transition-normal:0.3s ease-in-out}body{font-family:var(--font-body);color:var(--text-color);line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1,h2,h3,h4,h5,h6{font-family:var(--font-title);font-weight:700;color:var(--title-color);line-height:1.4}h1{font-size:1.88rem;letter-spacing:1px}h2{font-size:1.5rem}h3{font-size:1.25rem}@media (max-width:768px){h1{font-size:1.5rem}h2{font-size:1.25rem}h3{font-size:1.1rem}}
.creator-app[data-v-15ec88ba]{background-color:#f5efe6}
.modal-overlay[data-v-ca6d08a0]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:9999;backdrop-filter:blur(2px)}.modal-container[data-v-ca6d08a0]{background:var(--card-bg);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);border:1px solid var(--border-color);width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;overflow:hidden}.modal-header[data-v-ca6d08a0]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color);background:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,rgba(212,175,55,0.05) 100%)}.modal-header .modal-title[data-v-ca6d08a0]{margin:0;font-size:1.3rem;color:var(--title-color);font-weight:700;font-family:var(--font-title)}.modal-header .close-button[data-v-ca6d08a0]{background:none;border:none;font-size:1.2rem;cursor:pointer;color:var(--text-light);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--radius-sm);transition:var(--transition-fast)}.modal-header .close-button[data-v-ca6d08a0]:hover{background:var(--border-color-light);color:var(--error-color)}.modal-content[data-v-ca6d08a0]{flex:1;overflow-y:auto;padding:var(--spacing-lg)}.section-title[data-v-ca6d08a0]{font-size:1rem;color:var(--title-color);margin:0 0 var(--spacing-md) 0;font-weight:600;display:flex;align-items:center;gap:var(--spacing-sm)}.section-title i[data-v-ca6d08a0]{color:var(--accent-color)}.save-section[data-v-ca6d08a0]{margin-bottom:var(--spacing-xl);padding-bottom:var(--spacing-lg);border-bottom:1px dashed var(--border-color)}.save-row[data-v-ca6d08a0]{display:flex;gap:var(--spacing-sm)}.save-row .preset-input[data-v-ca6d08a0]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.95rem;background:var(--input-bg);color:var(--text-color);transition:var(--transition-fast)}.save-row .preset-input[data-v-ca6d08a0]:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 2px rgba(212,175,55,.2)}.save-row .preset-input[data-v-ca6d08a0]::placeholder{color:var(--text-light)}.import-section[data-v-ca6d08a0]{margin-bottom:var(--spacing-xl);padding-bottom:var(--spacing-lg);border-bottom:1px dashed var(--border-color)}.import-row[data-v-ca6d08a0]{display:flex;align-items:center;gap:var(--spacing-md)}.import-row .import-hint[data-v-ca6d08a0]{font-size:.85rem;color:var(--text-light);font-style:italic}.list-header[data-v-ca6d08a0]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.list-header .section-title[data-v-ca6d08a0]{margin-bottom:0}.action-button[data-v-ca6d08a0]{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.9rem;font-weight:600;cursor:pointer;transition:var(--transition-fast);white-space:nowrap}.action-button i[data-v-ca6d08a0]{font-size:.85rem}.action-button.save-button[data-v-ca6d08a0]{background:linear-gradient(135deg,var(--accent-color) 0%,#b8941f 100%);color:#fff;border-color:var(--accent-color)}.action-button.save-button[data-v-ca6d08a0]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.action-button.save-button.confirm[data-v-ca6d08a0]{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);border-color:#ff9800;animation:pulse-ca6d08a0 1s infinite}.action-button.load-button[data-v-ca6d08a0]{background:linear-gradient(135deg,var(--success-color) 0%,#2e7d32 100%);color:#fff;border-color:var(--success-color)}.action-button.load-button[data-v-ca6d08a0]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.action-button.export-button[data-v-ca6d08a0]{background:linear-gradient(135deg,#5c6bc0 0%,#3949ab 100%);color:#fff;border-color:#5c6bc0}.action-button.export-button[data-v-ca6d08a0]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.action-button.export-all-button[data-v-ca6d08a0]{background:linear-gradient(135deg,#5c6bc0 0%,#3949ab 100%);color:#fff;border-color:#5c6bc0;padding:var(--spacing-xs) var(--spacing-md);font-size:.85rem}.action-button.export-all-button[data-v-ca6d08a0]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.action-button.import-button[data-v-ca6d08a0]{background:linear-gradient(135deg,#26a69a 0%,#00897b 100%);color:#fff;border-color:#26a69a}.action-button.import-button[data-v-ca6d08a0]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.action-button.delete-button[data-v-ca6d08a0]{background:var(--card-bg);color:var(--error-color);border-color:var(--error-color)}.action-button.delete-button[data-v-ca6d08a0]:hover{background:var(--error-color);color:#fff}.action-button.confirm-delete[data-v-ca6d08a0]{background:var(--error-color);color:#fff;border-color:var(--error-color);animation:pulse-ca6d08a0 1s infinite}.action-button.cancel-button[data-v-ca6d08a0]{background:var(--card-bg);color:var(--text-color);border-color:var(--border-color)}.action-button.cancel-button[data-v-ca6d08a0]:hover{background:var(--button-bg)}.action-button.batch-button[data-v-ca6d08a0]{background:var(--card-bg);color:var(--text-color);border-color:var(--border-color);font-size:.85rem;padding:var(--spacing-xs) var(--spacing-md)}.action-button.batch-button[data-v-ca6d08a0]:hover{background:var(--button-bg);border-color:var(--accent-color)}@keyframes pulse-ca6d08a0{0%,100%{opacity:1}50%{opacity:.7}}.empty-state[data-v-ca6d08a0]{text-align:center;padding:var(--spacing-xl);color:var(--text-light)}.empty-state .empty-icon[data-v-ca6d08a0]{font-size:2.5rem;margin-bottom:var(--spacing-md);opacity:.5}.empty-state p[data-v-ca6d08a0]{margin:0 0 var(--spacing-xs) 0}.empty-state .hint[data-v-ca6d08a0]{font-size:.85rem;font-style:italic}.preset-list[data-v-ca6d08a0]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.preset-item[data-v-ca6d08a0]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);transition:var(--transition-fast)}.preset-item[data-v-ca6d08a0]:hover{border-color:var(--accent-color);box-shadow:var(--shadow-sm)}.preset-item.delete-pending[data-v-ca6d08a0]{border-color:var(--error-color);background:rgba(211,47,47,.05)}.preset-main[data-v-ca6d08a0]{flex:1;min-width:0}.preset-info[data-v-ca6d08a0]{display:flex;align-items:baseline;gap:var(--spacing-sm);margin-bottom:var(--spacing-xs)}.preset-info .preset-name[data-v-ca6d08a0]{font-weight:600;color:var(--title-color);font-size:1rem}.preset-info .preset-time[data-v-ca6d08a0]{font-size:.8rem;color:var(--text-light);font-family:var(--font-mono)}.preset-meta[data-v-ca6d08a0]{display:flex;flex-wrap:wrap;gap:var(--spacing-sm)}.preset-meta .meta-item[data-v-ca6d08a0]{font-size:.85rem;color:var(--text-light)}.preset-meta .meta-item i[data-v-ca6d08a0]{margin-right:2px;color:var(--accent-color);opacity:.7}.preset-actions[data-v-ca6d08a0]{display:flex;gap:var(--spacing-xs);margin-left:var(--spacing-md)}.modal-footer[data-v-ca6d08a0]{padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--border-color);display:flex;justify-content:flex-end}.modal-footer .footer-button[data-v-ca6d08a0]{padding:var(--spacing-sm) var(--spacing-xl);background:var(--button-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.95rem;font-weight:600;cursor:pointer;transition:var(--transition-fast);color:var(--title-color)}.modal-footer .footer-button[data-v-ca6d08a0]:hover{background:var(--button-hover)}.conflict-overlay[data-v-ca6d08a0]{z-index:10000}.conflict-container[data-v-ca6d08a0]{max-width:550px}.conflict-description[data-v-ca6d08a0]{margin:0 0 var(--spacing-md) 0;font-size:.95rem;color:var(--text-color)}.batch-actions[data-v-ca6d08a0]{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-lg);padding-bottom:var(--spacing-md);border-bottom:1px dashed var(--border-color)}.conflict-list[data-v-ca6d08a0]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.conflict-item[data-v-ca6d08a0]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md)}.conflict-info[data-v-ca6d08a0]{display:flex;flex-direction:column;gap:2px;min-width:0;flex:1}.conflict-info .conflict-name[data-v-ca6d08a0]{font-weight:600;color:var(--title-color);font-size:.95rem}.conflict-info .conflict-detail[data-v-ca6d08a0]{font-size:.8rem;color:var(--text-light)}.conflict-info .conflict-detail i[data-v-ca6d08a0]{margin-right:2px}.conflict-options[data-v-ca6d08a0]{display:flex;gap:var(--spacing-sm);margin-left:var(--spacing-md)}.conflict-option[data-v-ca6d08a0]{display:flex;align-items:center;gap:4px;cursor:pointer;font-size:.85rem}.conflict-option input[type=radio][data-v-ca6d08a0]{margin:0;cursor:pointer}.conflict-option .option-label[data-v-ca6d08a0]{font-weight:500}.conflict-option .option-label.overwrite-label[data-v-ca6d08a0]{color:#ff9800}.conflict-option .option-label.rename-label[data-v-ca6d08a0]{color:#5c6bc0}.conflict-option .option-label.skip-label[data-v-ca6d08a0]{color:var(--text-light)}.no-conflict-hint[data-v-ca6d08a0]{margin:var(--spacing-md) 0 0 0;font-size:.9rem;color:var(--success-color)}.no-conflict-hint i[data-v-ca6d08a0]{margin-right:var(--spacing-xs)}.conflict-footer[data-v-ca6d08a0]{gap:var(--spacing-sm)}.conflict-footer .cancel-footer[data-v-ca6d08a0]{background:var(--card-bg);color:var(--text-color);border-color:var(--border-color)}.conflict-footer .cancel-footer[data-v-ca6d08a0]:hover{background:var(--button-bg)}.conflict-footer .confirm-footer[data-v-ca6d08a0]{background:linear-gradient(135deg,var(--success-color) 0%,#2e7d32 100%);color:#fff;border-color:var(--success-color)}.conflict-footer .confirm-footer[data-v-ca6d08a0]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}@media (max-width:600px){.modal-container[data-v-ca6d08a0]{width:95%;max-height:90vh}.save-row[data-v-ca6d08a0]{flex-direction:column}.import-row[data-v-ca6d08a0]{flex-direction:column;align-items:stretch}.import-row .import-hint[data-v-ca6d08a0]{text-align:center}.list-header[data-v-ca6d08a0]{flex-direction:column;align-items:stretch;gap:var(--spacing-sm)}.preset-item[data-v-ca6d08a0]{flex-direction:column;align-items:stretch;gap:var(--spacing-sm,8px)}.preset-actions[data-v-ca6d08a0]{margin-left:0;justify-content:flex-end}.batch-actions[data-v-ca6d08a0]{flex-wrap:wrap}.conflict-item[data-v-ca6d08a0]{flex-direction:column;align-items:stretch;gap:var(--spacing-sm)}.conflict-options[data-v-ca6d08a0]{margin-left:0;justify-content:flex-start}}
.content-area[data-v-422e4092]{margin:var(--spacing-md) 0;padding:var(--spacing-md);background:var(--card-bg);border-radius:var(--radius-lg);border:1px solid var(--border-color);box-shadow:var(--shadow-md);position:relative;overflow:hidden;min-height:400px}.slide-left-enter-active[data-v-422e4092],.slide-left-leave-active[data-v-422e4092]{transition:all .3s ease-out}.slide-left-enter-from[data-v-422e4092]{opacity:0;transform:translateX(30px)}.slide-left-leave-to[data-v-422e4092]{opacity:0;transform:translateX(-30px)}.slide-right-enter-active[data-v-422e4092],.slide-right-leave-active[data-v-422e4092]{transition:all .3s ease-out}.slide-right-enter-from[data-v-422e4092]{opacity:0;transform:translateX(-30px)}.slide-right-leave-to[data-v-422e4092]{opacity:0;transform:translateX(30px)}
.header-controls[data-v-25795810]{display:flex;justify-content:center;align-items:center;gap:var(--spacing-lg);margin-bottom:var(--spacing-lg);flex-wrap:wrap}.points-display[data-v-25795810]{display:flex;align-items:baseline;gap:var(--spacing-sm);font-size:1.1rem;font-weight:600}.points-display .points-label[data-v-25795810]{color:var(--text-color)}.points-display .points-value[data-v-25795810]{font-size:1.5rem;font-weight:700;color:var(--accent-color);transition:var(--transition-normal)}.points-display .points-value.negative[data-v-25795810]{color:var(--error-color);animation:shake-25795810 .3s ease-in-out}.points-display .points-total[data-v-25795810]{color:var(--text-light);font-size:1rem}.control-buttons[data-v-25795810]{display:flex;gap:var(--spacing-sm)}.control-button[data-v-25795810]{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-xs) var(--spacing-md);border:none;border-radius:var(--radius-md);font-size:.9rem;font-weight:600;cursor:pointer;transition:var(--transition-normal);box-shadow:var(--shadow-sm)}.control-button[data-v-25795810]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.control-button[data-v-25795810]:active:not(:disabled){transform:translateY(0);box-shadow:var(--shadow-sm)}.roll-button[data-v-25795810]{background:linear-gradient(135deg,var(--accent-color) 0%,#b8941f 100%);color:#fff}.roll-button[data-v-25795810]:hover{background:linear-gradient(135deg,#e0c04a 0%,#d4af37 100%)}.roll-button[data-v-25795810]:disabled{opacity:.5;cursor:not-allowed;background:var(--border-color-light);color:var(--text-light)}.roll-button[data-v-25795810]:disabled:hover{transform:none;box-shadow:var(--shadow-sm)}.preset-button[data-v-25795810]{background:linear-gradient(135deg,#6b8e9f 0%,#5a7a8a 100%);color:#fff}.preset-button[data-v-25795810]:hover{background:linear-gradient(135deg,#7a9fb0 0%,#6b8e9f 100%)}@keyframes shake-25795810{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}@media (max-width:768px){.header-controls[data-v-25795810]{flex-direction:column;gap:var(--spacing-md)}.points-display[data-v-25795810]{font-size:1rem}.points-display .points-value[data-v-25795810]{font-size:1.3rem}}
.navigation[data-v-de8f52dc]{display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-lg)}.nav-button[data-v-de8f52dc]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-xl);background:var(--button-bg);color:var(--title-color);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:16px;font-weight:600;cursor:pointer;transition:var(--transition-normal);box-shadow:var(--shadow-sm)}.nav-button[data-v-de8f52dc]:hover:not(:disabled){background:var(--button-hover);transform:translateY(-2px);box-shadow:var(--shadow-md)}.nav-button[data-v-de8f52dc]:active:not(:disabled){transform:translateY(0);box-shadow:var(--shadow-sm)}.nav-button[data-v-de8f52dc]:disabled{opacity:.5;cursor:not-allowed;background:var(--border-color-light);color:var(--text-light)}@media (max-width:768px){.navigation[data-v-de8f52dc]{flex-wrap:wrap;justify-content:center}.nav-button[data-v-de8f52dc]{flex:1;min-width:120px;justify-content:center}}
.confirm-overlay[data-v-45c171a6]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:9999;backdrop-filter:blur(2px)}.confirm-dialog[data-v-45c171a6]{background:var(--card-bg);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);border:1px solid var(--border-color);width:90%;max-width:400px;overflow:hidden}.confirm-header[data-v-45c171a6]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-lg);background:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,rgba(212,175,55,0.05) 100%);border-bottom:1px solid var(--border-color)}.confirm-header i[data-v-45c171a6]{font-size:1.3rem;color:var(--accent-color)}.confirm-header h3[data-v-45c171a6]{margin:0;font-size:1.2rem;color:var(--title-color);font-weight:700}.confirm-body[data-v-45c171a6]{padding:var(--spacing-lg);text-align:center}.confirm-body p[data-v-45c171a6]{margin:0 0 var(--spacing-sm) 0;color:var(--text-color);font-size:1rem}.confirm-body p[data-v-45c171a6]:last-child{margin-bottom:0}.confirm-body .confirm-hint[data-v-45c171a6]{font-size:.9rem;color:var(--text-light);font-style:italic}.confirm-actions[data-v-45c171a6]{display:flex;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg) var(--spacing-lg);justify-content:center}.confirm-button[data-v-45c171a6]{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.9rem;font-weight:600;cursor:pointer;transition:var(--transition-fast)}.confirm-button i[data-v-45c171a6]{font-size:.9rem}.confirm-button.save[data-v-45c171a6]{background:linear-gradient(135deg,var(--accent-color) 0%,#b8941f 100%);color:#fff;border-color:var(--accent-color)}.confirm-button.save[data-v-45c171a6]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.confirm-button.skip[data-v-45c171a6]{background:linear-gradient(135deg,var(--success-color) 0%,#2e7d32 100%);color:#fff;border-color:var(--success-color)}.confirm-button.skip[data-v-45c171a6]:hover{transform:translateY(-1px);box-shadow:var(--shadow-sm)}.confirm-button.cancel[data-v-45c171a6]{background:var(--card-bg);color:var(--text-color);border-color:var(--border-color)}.confirm-button.cancel[data-v-45c171a6]:hover{background:var(--button-bg)}
.steps[data-v-4595f292]{width:100%;display:flex;align-items:center;gap:var(--spacing-xs);position:relative}.steps[data-v-4595f292]::-webkit-scrollbar{height:4px}.steps[data-v-4595f292]::-webkit-scrollbar-track{background:var(--border-color-light);border-radius:2px}.steps[data-v-4595f292]::-webkit-scrollbar-thumb{background:var(--accent-color);border-radius:2px}.steps[data-v-4595f292]::-webkit-scrollbar-thumb:hover{background:var(--button-hover)}.steps .step[data-v-4595f292]{flex:1;display:flex;align-items:center;justify-content:center;color:var(--title-color);font-size:16px;background:var(--border-color-light);margin-left:-6px;clip-path:polygon(15px 0,100% 0,calc(100% - 15px) 50%,100% 100%,15px 100%,0 50%);transition:var(--transition-normal);padding:8px 20px;position:relative}.steps .step[data-v-4595f292]:first-child{clip-path:polygon(0 0,100% 0,calc(100% - 15px) 50%,100% 100%,0 100%,0 50%);padding-left:16px;margin-left:0}.steps .step[data-v-4595f292]:last-child{clip-path:polygon(15px 0,100% 0,100% 50%,100% 100%,15px 100%,0 50%);padding-right:16px}.steps .step .title[data-v-4595f292]{text-align:center;width:100%;line-height:1.3;word-break:keep-all;overflow-wrap:break-word;padding:4px 0}.steps .pass[data-v-4595f292]{background:var(--accent-color);color:var(--primary-bg);font-weight:600}@media (max-width:1024px){.steps[data-v-4595f292]{gap:2px}.steps .step[data-v-4595f292]{font-size:14px;padding:6px 16px}.steps .step[data-v-4595f292]:first-child{padding-left:14px}.steps .step[data-v-4595f292]:last-child{padding-right:14px}.steps .step .title[data-v-4595f292]{font-size:13px;line-height:1.4}}@media (max-width:640px){.steps[data-v-4595f292]{gap:1px}.steps .step[data-v-4595f292]{font-size:12px;padding:8px 10px;margin-left:-4px;clip-path:polygon(12px 0,100% 0,calc(100% - 12px) 50%,100% 100%,12px 100%,0 50%)}.steps .step[data-v-4595f292]:first-child{clip-path:polygon(0 0,100% 0,calc(100% - 12px) 50%,100% 100%,0 100%,0 50%);padding-left:10px;margin-left:0}.steps .step[data-v-4595f292]:last-child{clip-path:polygon(12px 0,100% 0,100% 50%,100% 100%,12px 100%,0 50%);padding-right:10px}.steps .step .title[data-v-4595f292]{line-height:1.5}}@media (max-width:480px){.steps[data-v-4595f292]{gap:0}.steps .step[data-v-4595f292]{font-size:10px;padding:6px 8px;margin-left:-3px;clip-path:polygon(10px 0,100% 0,calc(100% - 10px) 50%,100% 100%,10px 100%,0 50%)}.steps .step[data-v-4595f292]:first-child{clip-path:polygon(0 0,100% 0,calc(100% - 10px) 50%,100% 100%,0 100%,0 50%);padding-left:8px;margin-left:0}.steps .step[data-v-4595f292]:last-child{clip-path:polygon(10px 0,100% 0,100% 50%,100% 100%,10px 100%,0 50%);padding-right:8px}.steps .step .title[data-v-4595f292]{line-height:1.5}}
.layout[data-v-3ba0e588]{display:flex;flex-direction:column;min-height:500px;padding:var(--spacing-xl)}.main-title[data-v-3ba0e588]{text-align:center;margin-bottom:var(--spacing-lg);color:var(--title-color)}@media (max-width:768px){.layout[data-v-3ba0e588]{padding:var(--spacing-md)}}
.category-selection-layout[data-v-0b4afefe]{display:grid;grid-template-columns:var(--sidebar-width) 1fr;gap:0;height:var(--content-max-height);max-height:var(--content-max-height);border:2px solid var(--border-color);border-radius:var(--radius-lg);overflow:hidden}.category-sidebar[data-v-0b4afefe]{background:var(--card-bg);border-right:2px solid var(--border-color-strong);height:100%;display:flex;flex-direction:column;overflow:hidden}.category-sidebar .category-list[data-v-0b4afefe]{display:flex;flex-direction:column;gap:var(--spacing-xs);padding:var(--spacing-md);overflow-y:auto;flex:1}.category-sidebar .category-list[data-v-0b4afefe]::-webkit-scrollbar{width:6px}.category-sidebar .category-list[data-v-0b4afefe]::-webkit-scrollbar-track{background:var(--input-bg);border-radius:var(--radius-sm)}.category-sidebar .category-list[data-v-0b4afefe]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:var(--radius-sm)}.category-sidebar .category-list[data-v-0b4afefe]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}.category-sidebar .category-item[data-v-0b4afefe]{padding:var(--spacing-sm) var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast);font-size:.9rem;color:var(--text-color);text-align:left;white-space:normal;word-wrap:break-word;word-break:break-word;overflow-wrap:break-word;hyphens:auto;line-height:1.4;min-height:32px;display:flex;align-items:center}.category-sidebar .category-item[data-v-0b4afefe]:hover{border-color:var(--accent-color);background:rgba(212,175,55,.1)}.category-sidebar .category-item.active[data-v-0b4afefe]{background:var(--accent-color);border-color:var(--accent-color);color:var(--primary-bg);font-weight:600}.category-sidebar .category-item.disabled[data-v-0b4afefe]{cursor:not-allowed;opacity:.5;background:var(--input-bg);border-color:var(--border-color);color:var(--text-light)}.category-sidebar .category-item.disabled[data-v-0b4afefe]:hover{background:var(--input-bg);border-color:var(--border-color)}.content-area[data-v-0b4afefe]{background:var(--card-bg);overflow-y:auto;height:100%;display:flex;flex-direction:column}.content-area[data-v-0b4afefe]::-webkit-scrollbar{width:8px}.content-area[data-v-0b4afefe]::-webkit-scrollbar-track{background:var(--input-bg);border-radius:var(--radius-md)}.content-area[data-v-0b4afefe]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:var(--radius-md)}.content-area[data-v-0b4afefe]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}.filter-area[data-v-0b4afefe]{position:sticky;top:0;z-index:10;background:var(--card-bg);padding:var(--spacing-xs) var(--spacing-sm);border-bottom:2px solid var(--border-color);box-shadow:0 2px 4px rgba(0,0,0,.05)}.content-main[data-v-0b4afefe]{flex:1;overflow-y:auto}@media (max-width:768px){.category-selection-layout[data-v-0b4afefe]{grid-template-columns:120px 1fr;height:450px}.category-sidebar .category-list[data-v-0b4afefe]{padding:var(--spacing-xs) 4px}.category-sidebar .category-item[data-v-0b4afefe]{font-size:.8rem;padding:var(--spacing-xs) var(--spacing-sm);min-height:28px;line-height:1.3}}@media (max-width:480px){.category-selection-layout[data-v-0b4afefe]{grid-template-columns:100px 1fr;height:400px}.category-sidebar .category-list[data-v-0b4afefe]{padding:var(--spacing-xs) 3px}.category-sidebar .category-item[data-v-0b4afefe]{font-size:.75rem;padding:3px 5px;min-height:24px}}
.form-textarea-wrapper[data-v-517d0cac]{position:relative;width:100%}.form-textarea[data-v-517d0cac]{width:100%;padding:var(--spacing-sm) var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:1rem;font-family:var(--font-body);color:var(--text-color);line-height:1.5;resize:vertical;transition:all var(--transition-normal);box-shadow:var(--shadow-sm);outline:none}.form-textarea.auto-resize[data-v-517d0cac]{resize:none;overflow-y:hidden}.form-textarea[data-v-517d0cac]::placeholder{color:var(--text-light)}.form-textarea[data-v-517d0cac]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(212,175,55,.1);background:#fff}.form-textarea[data-v-517d0cac]:hover:not(:disabled):not(:focus){border-color:var(--border-color-strong)}.form-textarea.is-disabled[data-v-517d0cac]{opacity:.6;cursor:not-allowed;background:var(--border-color-light)}.form-textarea.is-readonly[data-v-517d0cac]{background:var(--border-color-light);cursor:default}
.requirement-item[data-v-18788000]{display:flex;flex-direction:column;gap:2px;font-size:.75rem}.requirement-item .requirement-label[data-v-18788000]{color:var(--text-light);font-weight:500;font-size:.85rem}.requirement-item .requirement-value[data-v-18788000]{font-weight:600;word-break:break-word;line-height:1.4}.requirement-item .requirement-value.requirement-met[data-v-18788000]{color:var(--success-color)}.requirement-item .requirement-value.requirement-unmet[data-v-18788000]{color:var(--error-color)}
.background-list[data-v-20e63764]{display:flex;flex-direction:column;gap:var(--spacing-md);padding:var(--spacing-md);height:100%;overflow-y:auto}.background-list[data-v-20e63764]::-webkit-scrollbar{width:8px}.background-list[data-v-20e63764]::-webkit-scrollbar-track{background:var(--input-bg);border-radius:var(--radius-md)}.background-list[data-v-20e63764]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:var(--radius-md)}.background-list[data-v-20e63764]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}.empty-message[data-v-20e63764]{text-align:center;padding:var(--spacing-2xl);color:var(--text-light);font-size:1.1rem}.background-card[data-v-20e63764]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);padding:var(--spacing-md);cursor:pointer;transition:all var(--transition-fast)}.background-card[data-v-20e63764]:hover:not(.disabled){border-color:var(--accent-color);background:rgba(212,175,55,.1);transform:translateX(4px)}.background-card.selected[data-v-20e63764]{border-color:var(--accent-color);background:rgba(212,175,55,.15);box-shadow:var(--shadow-md);border-left-width:4px}.background-card.disabled[data-v-20e63764]{opacity:.6;cursor:not-allowed}.background-card.disabled[data-v-20e63764]:hover{transform:none}.card-header[data-v-20e63764]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}.card-header .background-name[data-v-20e63764]{font-size:1.1rem;color:var(--title-color);margin:0;font-weight:600;flex:1}.card-header .expand-btn[data-v-20e63764]{padding:2px var(--spacing-sm);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-sm);cursor:pointer;font-size:.75rem;color:var(--text-color);transition:all var(--transition-fast);white-space:nowrap}.card-header .expand-btn[data-v-20e63764]:hover{background:var(--accent-color);color:var(--primary-bg);border-color:var(--accent-color)}.requirements[data-v-20e63764]{display:flex;flex-direction:column;gap:var(--spacing-xs);margin-bottom:var(--spacing-sm);padding:var(--spacing-xs) var(--spacing-sm);background:var(--input-bg);border-radius:var(--radius-sm);border-left:3px solid var(--accent-color)}.background-summary[data-v-20e63764]{color:var(--text-color);line-height:1.6;margin:0;font-size:.9rem}.requirement-warning[data-v-20e63764]{margin-top:var(--spacing-sm);padding:var(--spacing-xs) var(--spacing-sm);background:rgba(211,47,47,.1);border-left:3px solid var(--error-color);border-radius:var(--radius-sm);color:var(--error-color);font-size:.8rem;font-weight:500}.custom-input-area[data-v-20e63764]{margin-top:var(--spacing-md);padding-top:var(--spacing-md);border-top:2px dashed var(--border-color);animation:slideDown-20e63764 var(--transition-normal) ease-out}.custom-input-label[data-v-20e63764]{font-size:.9rem;font-weight:600;color:var(--title-color);margin-bottom:var(--spacing-sm)}@keyframes slideDown-20e63764{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.background-list[data-v-20e63764]{padding:var(--spacing-sm);gap:var(--spacing-sm)}.background-card[data-v-20e63764]{padding:var(--spacing-sm)}.card-header .background-name[data-v-20e63764]{font-size:1rem}.background-summary[data-v-20e63764],.background-description[data-v-20e63764]{font-size:.85rem}}
.confirm-overlay[data-v-62de9d7e]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(2px);animation:fadeIn-62de9d7e .2s ease-out}@keyframes fadeIn-62de9d7e{from{opacity:0}to{opacity:1}}@keyframes slideIn-62de9d7e{from{opacity:0;transform:scale(0.9) translateY(-10px)}to{opacity:1;transform:scale(1) translateY(0)}}.confirm-container[data-v-62de9d7e]{background:var(--card-bg);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);border:2px solid var(--border-color);width:90%;max-width:400px;overflow:hidden;animation:slideIn-62de9d7e .2s ease-out}.confirm-container.type-warning[data-v-62de9d7e]{border-color:var(--accent-color)}.confirm-container.type-danger[data-v-62de9d7e]{border-color:var(--error-color)}.confirm-container.type-info[data-v-62de9d7e]{border-color:var(--info-color,#2196f3)}.confirm-header[data-v-62de9d7e]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);background:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,rgba(212,175,55,0.05) 100%);border-bottom:1px solid var(--border-color)}.type-danger .confirm-header[data-v-62de9d7e]{background:linear-gradient(135deg,rgba(211,47,47,0.1) 0%,rgba(211,47,47,0.05) 100%)}.type-info .confirm-header[data-v-62de9d7e]{background:linear-gradient(135deg,rgba(33,150,243,0.1) 0%,rgba(33,150,243,0.05) 100%)}.confirm-header .confirm-icon[data-v-62de9d7e]{font-size:1.3rem}.type-warning .confirm-header .confirm-icon[data-v-62de9d7e]{color:var(--accent-color)}.type-danger .confirm-header .confirm-icon[data-v-62de9d7e]{color:var(--error-color)}.type-info .confirm-header .confirm-icon[data-v-62de9d7e]{color:var(--info-color,#2196f3)}.confirm-header .confirm-title[data-v-62de9d7e]{margin:0;font-size:1.1rem;color:var(--title-color);font-weight:700}.confirm-content[data-v-62de9d7e]{padding:var(--spacing-lg)}.confirm-content .confirm-message[data-v-62de9d7e]{margin:0;font-size:.95rem;color:var(--text-color);line-height:1.6}.confirm-actions[data-v-62de9d7e]{display:flex;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--border-color);justify-content:flex-end}.btn-cancel[data-v-62de9d7e],.btn-confirm[data-v-62de9d7e]{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--radius-md);cursor:pointer;font-size:.9rem;font-weight:600;transition:all var(--transition-fast);min-width:80px}.btn-cancel i[data-v-62de9d7e],.btn-confirm i[data-v-62de9d7e]{font-size:.85rem}.btn-cancel[data-v-62de9d7e]{background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color)}.btn-cancel[data-v-62de9d7e]:hover{background:var(--card-bg);border-color:var(--border-color-strong)}.btn-confirm[data-v-62de9d7e]{color:#fff}.btn-confirm.btn-warning[data-v-62de9d7e]{background:var(--accent-color)}.btn-confirm.btn-warning[data-v-62de9d7e]:hover{background:#c9a842;transform:translateY(-1px);box-shadow:var(--shadow-sm)}.btn-confirm.btn-danger[data-v-62de9d7e]{background:var(--error-color)}.btn-confirm.btn-danger[data-v-62de9d7e]:hover{background:#c62828;transform:translateY(-1px);box-shadow:var(--shadow-sm)}.btn-confirm.btn-info[data-v-62de9d7e]{background:var(--info-color,#2196f3)}.btn-confirm.btn-info[data-v-62de9d7e]:hover{background:#1976d2;transform:translateY(-1px);box-shadow:var(--shadow-sm)}@media (max-width:480px){.confirm-container[data-v-62de9d7e]{width:95%}.confirm-actions[data-v-62de9d7e]{flex-direction:column-reverse}.confirm-actions .btn-cancel[data-v-62de9d7e],.confirm-actions .btn-confirm[data-v-62de9d7e]{width:100%;justify-content:center}}
.form-array-input[data-v-c73d04d0]{width:100%;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--input-bg);overflow:hidden}.form-array-input.is-disabled[data-v-c73d04d0]{opacity:.6;pointer-events:none}.array-items[data-v-c73d04d0]{max-height:200px;overflow-y:auto;padding:var(--spacing-sm)}.array-items[data-v-c73d04d0]::-webkit-scrollbar{width:6px}.array-items[data-v-c73d04d0]::-webkit-scrollbar-track{background:var(--border-color-light);border-radius:3px}.array-items[data-v-c73d04d0]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.array-items[data-v-c73d04d0]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}.array-item[data-v-c73d04d0]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background:var(--card-bg);border:1px solid var(--border-color-light);border-radius:var(--radius-md);margin-bottom:var(--spacing-xs);transition:all var(--transition-fast)}.array-item[data-v-c73d04d0]:last-child{margin-bottom:0}.array-item[data-v-c73d04d0]:hover{border-color:var(--accent-color);box-shadow:var(--shadow-sm)}.item-index[data-v-c73d04d0]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:var(--accent-color);color:var(--primary-bg);border-radius:50%;font-size:.75rem;font-weight:700;flex-shrink:0}.item-text[data-v-c73d04d0]{flex:1;font-size:.95rem;color:var(--text-color);cursor:pointer;padding:var(--spacing-xs) 0;min-height:28px;display:flex;align-items:center}.item-text[data-v-c73d04d0]:hover{color:var(--accent-color)}.item-input[data-v-c73d04d0]{flex:1;padding:var(--spacing-xs) var(--spacing-sm);background:#fff;border:1px solid var(--accent-color);border-radius:var(--radius-sm);font-size:.95rem;color:var(--text-color);outline:none}.item-input[data-v-c73d04d0]:focus{box-shadow:0 0 0 2px rgba(212,175,55,.2)}.item-actions[data-v-c73d04d0]{display:flex;gap:4px;opacity:0;transition:opacity var(--transition-fast)}.array-item:hover .item-actions[data-v-c73d04d0]{opacity:1}.action-btn[data-v-c73d04d0]{display:flex;align-items:center;justify-content:center;width:26px;height:26px;padding:0;border:1px solid var(--border-color);border-radius:var(--radius-sm);background:var(--card-bg);cursor:pointer;font-size:.75rem;transition:all var(--transition-fast)}.action-btn[data-v-c73d04d0]:hover:not(:disabled){border-color:var(--accent-color);background:rgba(212,175,55,.1)}.action-btn[data-v-c73d04d0]:disabled{opacity:.4;cursor:not-allowed}.action-btn.remove-btn[data-v-c73d04d0]:hover:not(:disabled){border-color:var(--error-color);background:rgba(211,47,47,.1);color:var(--error-color)}.empty-state[data-v-c73d04d0]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-lg);color:var(--text-light);gap:var(--spacing-sm)}.empty-state .empty-icon[data-v-c73d04d0]{font-size:1.5rem;opacity:.6}.empty-state .empty-text[data-v-c73d04d0]{font-size:.85rem}.add-item-section[data-v-c73d04d0]{display:flex;gap:var(--spacing-sm);padding:var(--spacing-sm);border-top:1px solid var(--border-color-light);background:rgba(212,175,55,.03)}.add-input[data-v-c73d04d0]{flex:1;padding:var(--spacing-sm) var(--spacing-md);background:#fff;border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.9rem;color:var(--text-color);outline:none;transition:all var(--transition-fast)}.add-input[data-v-c73d04d0]::placeholder{color:var(--text-light)}.add-input[data-v-c73d04d0]:focus{border-color:var(--accent-color);box-shadow:0 0 0 2px rgba(212,175,55,.1)}.add-input[data-v-c73d04d0]:disabled{background:var(--border-color-light);cursor:not-allowed}.add-btn[data-v-c73d04d0]{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);background:var(--accent-color);color:var(--primary-bg);border:none;border-radius:var(--radius-md);font-size:.85rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast);white-space:nowrap}.add-btn[data-v-c73d04d0]:hover:not(:disabled){background:#c9a842;transform:translateY(-1px)}.add-btn[data-v-c73d04d0]:disabled{opacity:.5;cursor:not-allowed;transform:none}.add-btn .add-icon[data-v-c73d04d0]{font-size:1rem;font-weight:700}.count-info[data-v-c73d04d0]{display:flex;align-items:center;justify-content:flex-end;padding:var(--spacing-xs) var(--spacing-sm);background:var(--border-color-light);font-size:.75rem;color:var(--text-light);gap:2px}.count-info .count-current[data-v-c73d04d0]{font-weight:700;color:var(--accent-color)}.count-info .count-max[data-v-c73d04d0]{font-weight:600}.list-enter-active[data-v-c73d04d0],.list-leave-active[data-v-c73d04d0]{transition:all .3s ease}.list-enter-from[data-v-c73d04d0]{opacity:0;transform:translateX(-20px)}.list-leave-to[data-v-c73d04d0]{opacity:0;transform:translateX(20px)}.list-move[data-v-c73d04d0]{transition:transform .3s ease}@media (max-width:768px){.add-item-section[data-v-c73d04d0]{flex-direction:column}.add-btn[data-v-c73d04d0]{justify-content:center}.item-actions[data-v-c73d04d0]{opacity:1}.action-btn[data-v-c73d04d0]{width:28px;height:28px}}
.tree-level .tree-node .node-content[data-v-0a519f5e]{display:flex;align-items:center;padding:var(--spacing-xs) var(--spacing-sm);cursor:pointer;transition:background-color var(--transition-fast);border-radius:var(--radius-sm);margin:2px var(--spacing-xs)}.tree-level .tree-node .node-content[data-v-0a519f5e]:hover:not(.is-disabled){background:var(--hover-bg,rgba(212,175,55,0.1))}.tree-level .tree-node .node-content.is-selected[data-v-0a519f5e]{background:rgba(212,175,55,.15);color:var(--accent-color);font-weight:600}.tree-level .tree-node .node-content.is-disabled[data-v-0a519f5e]{opacity:.5;cursor:not-allowed}.tree-level .tree-node .node-content.has-children[data-v-0a519f5e]{font-weight:500}.tree-level .tree-node .expand-icon[data-v-0a519f5e]{width:16px;height:16px;display:flex;align-items:center;justify-content:center;font-size:.6rem;color:var(--text-light);transition:transform var(--transition-normal);flex-shrink:0}.tree-level .tree-node .expand-icon.expanded[data-v-0a519f5e]{transform:rotate(90deg)}.tree-level .tree-node .expand-icon.placeholder[data-v-0a519f5e]{visibility:hidden}.tree-level .tree-node .node-label[data-v-0a519f5e]{margin-left:var(--spacing-xs);flex:1}@media (max-width:768px){.tree-level .tree-node .node-content[data-v-0a519f5e]{min-height:44px;padding:var(--spacing-sm) var(--spacing-md)}}
.cascader-wrapper[data-v-8dd65b4a]{position:relative;width:100%}.cascader-trigger[data-v-8dd65b4a]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:var(--spacing-sm) var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:1rem;color:var(--text-color);transition:all var(--transition-normal);box-shadow:var(--shadow-sm);cursor:pointer}.cascader-trigger[data-v-8dd65b4a]:hover:not(.is-disabled){border-color:var(--border-color-strong)}.cascader-trigger.is-open[data-v-8dd65b4a]{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(212,175,55,.1)}.cascader-trigger.is-disabled[data-v-8dd65b4a]{opacity:.6;cursor:not-allowed;background:var(--border-color-light)}.cascader-trigger .selected-text[data-v-8dd65b4a]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cascader-trigger .selected-text.placeholder[data-v-8dd65b4a]{color:var(--text-light)}.cascader-trigger .trigger-arrow[data-v-8dd65b4a]{color:var(--accent-color);font-size:.7rem;transition:transform var(--transition-normal);margin-left:var(--spacing-sm)}.cascader-trigger .trigger-arrow.rotated[data-v-8dd65b4a]{transform:rotate(180deg)}.cascader-dropdown[data-v-8dd65b4a]{position:absolute;top:calc(100% + 4px);left:0;right:0;z-index:100;background:var(--card-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);box-shadow:var(--shadow-md);overflow:hidden}.search-box[data-v-8dd65b4a]{position:relative;padding:var(--spacing-sm);border-bottom:1px solid var(--border-color)}.search-box .search-input[data-v-8dd65b4a]{width:100%;padding:var(--spacing-xs) var(--spacing-sm);padding-right:28px;border:1px solid var(--border-color);border-radius:var(--radius-sm);font-size:.9rem;outline:none;background:var(--input-bg);color:var(--text-color)}.search-box .search-input[data-v-8dd65b4a]:focus{border-color:var(--accent-color)}.search-box .search-input[data-v-8dd65b4a]::placeholder{color:var(--text-light)}.search-box .clear-btn[data-v-8dd65b4a]{position:absolute;right:16px;top:50%;transform:translateY(-50%);color:var(--text-light);cursor:pointer;font-size:.8rem;padding:2px 4px}.search-box .clear-btn[data-v-8dd65b4a]:hover{color:var(--text-color)}.tree-container[data-v-8dd65b4a]{max-height:300px;overflow-y:auto;padding:var(--spacing-xs) 0}.search-results[data-v-8dd65b4a]{max-height:300px;overflow-y:auto}.search-result-item[data-v-8dd65b4a]{padding:var(--spacing-sm) var(--spacing-md);cursor:pointer;transition:background-color var(--transition-fast);font-size:.9rem}.search-result-item[data-v-8dd65b4a]:hover{background:var(--hover-bg,rgba(212,175,55,0.1))}.search-result-item.is-selected[data-v-8dd65b4a]{background:rgba(212,175,55,.15);color:var(--accent-color);font-weight:600}.search-result-item[data-v-8dd65b4a] .highlight{background:rgba(212,175,55,.3);color:inherit;padding:0 2px;border-radius:2px}.no-results[data-v-8dd65b4a]{padding:var(--spacing-md);text-align:center;color:var(--text-light);font-size:.9rem}@media (max-width:768px){.cascader-trigger[data-v-8dd65b4a]{min-height:44px}.search-result-item[data-v-8dd65b4a]{min-height:44px;display:flex;align-items:center;padding:var(--spacing-sm) var(--spacing-md)}.search-input[data-v-8dd65b4a]{min-height:40px}}
.form-input-wrapper[data-v-68bda4ea]{position:relative;width:100%}.form-input[data-v-68bda4ea]{width:100%;padding:var(--spacing-sm) var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:1rem;color:var(--text-color);transition:all var(--transition-normal);box-shadow:var(--shadow-sm);outline:none}.form-input[data-v-68bda4ea]::placeholder{color:var(--text-light)}.form-input[data-v-68bda4ea]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(212,175,55,.1);background:#fff}.form-input[data-v-68bda4ea]:hover:not(:disabled):not(:focus){border-color:var(--border-color-strong)}.form-input.is-disabled[data-v-68bda4ea]{opacity:.6;cursor:not-allowed;background:var(--border-color-light)}.form-input.is-readonly[data-v-68bda4ea]{background:var(--border-color-light);cursor:default}
.form-key-value[data-v-a1444030]{width:100%;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--input-bg);overflow:hidden}.form-key-value.is-disabled[data-v-a1444030]{opacity:.6;pointer-events:none}.kv-list[data-v-a1444030]{max-height:240px;overflow-y:auto;padding:var(--spacing-sm)}.kv-list[data-v-a1444030]::-webkit-scrollbar{width:6px}.kv-list[data-v-a1444030]::-webkit-scrollbar-track{background:var(--border-color-light);border-radius:3px}.kv-list[data-v-a1444030]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.kv-list[data-v-a1444030]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}.kv-row[data-v-a1444030]{display:grid;grid-template-columns:28px 1fr auto;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background:var(--card-bg);border:1px solid var(--border-color-light);border-radius:var(--radius-md);margin-bottom:var(--spacing-xs);transition:all var(--transition-fast)}.kv-row[data-v-a1444030]:last-child{margin-bottom:0}.kv-row[data-v-a1444030]:hover{border-color:var(--accent-color);box-shadow:var(--shadow-sm)}.row-index[data-v-a1444030]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:var(--accent-color);color:var(--primary-bg);border-radius:50%;font-size:.75rem;font-weight:700}.row-text[data-v-a1444030]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;color:var(--text-color)}.kv-key[data-v-a1444030]{font-weight:600;color:var(--title-color)}.kv-separator[data-v-a1444030]{color:var(--text-light)}.kv-value[data-v-a1444030]{color:var(--text-color)}.row-inputs[data-v-a1444030]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:var(--spacing-sm)}.kv-input[data-v-a1444030]{width:100%;padding:var(--spacing-xs) var(--spacing-sm);background:#fff;border:1px solid var(--border-color);border-radius:var(--radius-sm);font-size:.9rem;color:var(--text-color);outline:none;transition:all var(--transition-fast)}.kv-input[data-v-a1444030]::placeholder{color:var(--text-light)}.kv-input[data-v-a1444030]:focus{border-color:var(--accent-color);box-shadow:0 0 0 2px rgba(212,175,55,.15)}.kv-input[data-v-a1444030]:disabled{background:var(--border-color-light);cursor:not-allowed}.row-actions[data-v-a1444030]{display:flex;gap:var(--spacing-xs)}.action-btn[data-v-a1444030]{padding:4px 10px;border:1px solid var(--border-color);border-radius:var(--radius-sm);background:var(--card-bg);font-size:.8rem;cursor:pointer;transition:all var(--transition-fast)}.action-btn[data-v-a1444030]:hover:not(:disabled){border-color:var(--accent-color)}.action-btn[data-v-a1444030]:disabled{opacity:.5;cursor:not-allowed}.action-btn.danger[data-v-a1444030]:hover:not(:disabled){border-color:var(--error-color);color:var(--error-color);background:rgba(211,47,47,.05)}.action-btn.subtle[data-v-a1444030]{background:var(--input-bg)}.add-row[data-v-a1444030]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr)) auto;gap:var(--spacing-sm);padding:var(--spacing-sm);border-top:1px solid var(--border-color-light);background:rgba(212,175,55,.03)}.add-btn[data-v-a1444030]{padding:var(--spacing-xs) var(--spacing-md);background:var(--accent-color);color:var(--primary-bg);border:none;border-radius:var(--radius-md);font-size:.85rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.add-btn[data-v-a1444030]:hover:not(:disabled){background:#c9a842;transform:translateY(-1px)}.add-btn[data-v-a1444030]:disabled{opacity:.5;cursor:not-allowed;transform:none}.empty-state[data-v-a1444030]{padding:var(--spacing-lg);text-align:center;color:var(--text-light);font-size:.85rem}.count-info[data-v-a1444030]{display:flex;align-items:center;justify-content:flex-end;padding:var(--spacing-xs) var(--spacing-sm);background:var(--border-color-light);font-size:.75rem;color:var(--text-light);gap:2px}.count-info .count-current[data-v-a1444030]{font-weight:700;color:var(--accent-color)}.count-info .count-max[data-v-a1444030]{font-weight:600}.kv-list-enter-active[data-v-a1444030],.kv-list-leave-active[data-v-a1444030]{transition:all .3s ease}.kv-list-enter-from[data-v-a1444030]{opacity:0;transform:translateY(-8px)}.kv-list-leave-to[data-v-a1444030]{opacity:0;transform:translateX(16px)}.kv-list-move[data-v-a1444030]{transition:transform .3s ease}@media (max-width:768px){.kv-row[data-v-a1444030]{grid-template-columns:24px 1fr}.row-actions[data-v-a1444030]{grid-column:1/-1;justify-content:flex-end}.add-row[data-v-a1444030]{grid-template-columns:1fr}}
.form-label[data-v-11a19624]{display:inline-flex;align-items:center;gap:var(--spacing-xs);font-size:1rem;font-weight:600;color:var(--title-color);margin-bottom:var(--spacing-xs);letter-spacing:.3px;cursor:pointer;transition:color var(--transition-fast)}.form-label[data-v-11a19624]:hover{color:var(--accent-color)}.form-label .required-mark[data-v-11a19624]{color:var(--error-color);font-weight:700;font-size:1.1rem;line-height:1}
.form-number-wrapper[data-v-48d2dd58]{position:relative;width:100%;display:flex;align-items:center}.form-number[data-v-48d2dd58]{flex:1;padding:var(--spacing-sm) var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:1rem;color:var(--text-color);transition:all var(--transition-normal);box-shadow:var(--shadow-sm);outline:none}.form-number.has-controls[data-v-48d2dd58]{border-radius:var(--radius-md) 0 0 var(--radius-md);border-right:none}.form-number[data-v-48d2dd58]::-webkit-inner-spin-button,.form-number[data-v-48d2dd58]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.form-number[type=number][data-v-48d2dd58]{-moz-appearance:textfield}.form-number[data-v-48d2dd58]::placeholder{color:var(--text-light)}.form-number[data-v-48d2dd58]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(212,175,55,.1);background:#fff}.form-number[data-v-48d2dd58]:hover:not(:disabled):not(:focus){border-color:var(--border-color-strong)}.form-number.is-disabled[data-v-48d2dd58]{opacity:.6;cursor:not-allowed;background:var(--border-color-light)}.form-number.is-readonly[data-v-48d2dd58]{background:var(--border-color-light);cursor:default}.number-controls[data-v-48d2dd58]{display:flex;flex-direction:column;gap:0;border:1px solid var(--border-color);border-left:none;border-radius:0 var(--radius-md) var(--radius-md) 0;background:var(--button-bg);overflow:hidden}.number-controls .control-btn[data-v-48d2dd58]{width:32px;height:20px;padding:0;border:0;background:rgba(0,0,0,0);color:var(--text-color);font-size:.7rem;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center}.number-controls .control-btn[data-v-48d2dd58]:hover:not(:disabled){background:var(--button-hover);color:var(--accent-color)}.number-controls .control-btn[data-v-48d2dd58]:active:not(:disabled){background:var(--border-color-strong)}.number-controls .control-btn[data-v-48d2dd58]:disabled{opacity:.4;cursor:not-allowed}.number-controls .control-btn.up[data-v-48d2dd58]{border-bottom:1px solid var(--border-color)}
.form-radio-group[data-v-588d959c]{display:flex;gap:var(--spacing-sm)}.form-radio-group.layout-vertical[data-v-588d959c]{flex-direction:column}.form-radio-group.layout-horizontal[data-v-588d959c]{flex-direction:row;flex-wrap:wrap}.radio-option[data-v-588d959c]{display:flex;align-items:flex-start;gap:var(--spacing-md);padding:var(--spacing-md);cursor:pointer;border-radius:var(--radius-md);transition:all var(--transition-normal);background:var(--input-bg);border:1px solid var(--border-color);position:relative}.radio-option[data-v-588d959c]:hover:not(.is-disabled){background:var(--card-bg);border-color:var(--accent-color);box-shadow:var(--shadow-md)}.radio-option.is-checked[data-v-588d959c]{background:var(--card-bg);border-color:var(--accent-color);box-shadow:var(--shadow-md)}.radio-option.is-checked .radio-label[data-v-588d959c]{color:var(--accent-color);font-weight:600}.radio-option.is-disabled[data-v-588d959c]{opacity:.6;cursor:not-allowed}.radio-option.is-disabled[data-v-588d959c]:hover{transform:none;box-shadow:none}.radio-option .radio-input[data-v-588d959c]{position:absolute;opacity:0;width:0;height:0}.radio-option .radio-indicator[data-v-588d959c]{width:20px;height:20px;min-width:20px;border-radius:50%;border:2px solid var(--border-color);background:#fff;flex-shrink:0;margin-top:2px;transition:all var(--transition-normal);position:relative;display:flex;align-items:center;justify-content:center}.radio-option .radio-indicator[data-v-588d959c]::after{content:"";width:10px;height:10px;border-radius:50%;background:var(--accent-color);transform:scale(0);transition:transform var(--transition-fast)}.radio-option .radio-input:focus-visible~.radio-indicator[data-v-588d959c]{box-shadow:0 0 0 3px rgba(212,175,55,.2)}.radio-option:hover:not(.is-disabled) .radio-indicator[data-v-588d959c]{border-color:var(--accent-color)}.radio-option .radio-input:checked~.radio-indicator[data-v-588d959c]{border-color:var(--accent-color);background:#fff}.radio-option .radio-input:checked~.radio-indicator[data-v-588d959c]::after{transform:scale(1)}.radio-option .radio-label[data-v-588d959c]{color:var(--text-color);font-size:1rem;line-height:1.5;word-break:break-word;flex:1;transition:color var(--transition-fast)}
.form-select-wrapper[data-v-4a660eb2]{position:relative;width:100%}.form-select[data-v-4a660eb2]{width:100%;padding:var(--spacing-sm) var(--spacing-md);padding-right:36px;background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:1rem;color:var(--text-color);transition:all var(--transition-normal);box-shadow:var(--shadow-sm);outline:none;cursor:pointer;-webkit-appearance:none;appearance:none}.form-select[data-v-4a660eb2]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(212,175,55,.1);background:#fff}.form-select[data-v-4a660eb2]:hover:not(:disabled){border-color:var(--border-color-strong)}.form-select.is-disabled[data-v-4a660eb2]{opacity:.6;cursor:not-allowed;background:var(--border-color-light)}.form-select option[data-v-4a660eb2]{background:var(--input-bg);color:var(--text-color);padding:var(--spacing-sm)}.form-select option[data-v-4a660eb2]:disabled{color:var(--text-light)}.form-select-trigger[data-v-4a660eb2]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:var(--spacing-sm) var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:1rem;color:var(--text-color);transition:all var(--transition-normal);box-shadow:var(--shadow-sm);cursor:pointer}.form-select-trigger[data-v-4a660eb2]:hover:not(.is-disabled){border-color:var(--border-color-strong)}.form-select-trigger.is-open[data-v-4a660eb2]{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(212,175,55,.1)}.form-select-trigger.is-disabled[data-v-4a660eb2]{opacity:.6;cursor:not-allowed;background:var(--border-color-light)}.form-select-trigger .selected-text[data-v-4a660eb2]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select-arrow[data-v-4a660eb2]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--accent-color);font-size:.7rem;pointer-events:none;transition:transform var(--transition-normal)}.form-select:focus~.select-arrow[data-v-4a660eb2]{transform:translateY(-50%) rotate(180deg)}.form-select-trigger .select-arrow[data-v-4a660eb2]{position:static;transform:none;transition:transform var(--transition-normal)}.form-select-trigger .select-arrow.rotated[data-v-4a660eb2]{transform:rotate(180deg)}.select-dropdown[data-v-4a660eb2]{position:absolute;top:calc(100% + 4px);left:0;right:0;z-index:100;background:var(--card-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);box-shadow:var(--shadow-md);overflow:hidden}.search-box[data-v-4a660eb2]{position:relative;padding:var(--spacing-sm);border-bottom:1px solid var(--border-color)}.search-box .search-input[data-v-4a660eb2]{width:100%;padding:var(--spacing-xs) var(--spacing-sm);padding-right:28px;border:1px solid var(--border-color);border-radius:var(--radius-sm);font-size:.9rem;outline:none;background:var(--input-bg);color:var(--text-color)}.search-box .search-input[data-v-4a660eb2]:focus{border-color:var(--accent-color)}.search-box .search-input[data-v-4a660eb2]::placeholder{color:var(--text-light)}.search-box .clear-btn[data-v-4a660eb2]{position:absolute;right:16px;top:50%;transform:translateY(-50%);color:var(--text-light);cursor:pointer;font-size:.8rem;padding:2px 4px}.search-box .clear-btn[data-v-4a660eb2]:hover{color:var(--text-color)}.options-list[data-v-4a660eb2]{max-height:240px;overflow-y:auto}.option-item[data-v-4a660eb2]{padding:var(--spacing-sm) var(--spacing-md);cursor:pointer;transition:background-color var(--transition-fast)}.option-item[data-v-4a660eb2]:hover:not(.is-disabled){background:var(--hover-bg,rgba(212,175,55,0.1))}.option-item.is-selected[data-v-4a660eb2]{background:rgba(212,175,55,.15);color:var(--accent-color);font-weight:600}.option-item.is-disabled[data-v-4a660eb2]{opacity:.5;cursor:not-allowed}.option-item[data-v-4a660eb2] .highlight{background:rgba(212,175,55,.3);color:inherit;padding:0 2px;border-radius:2px}.no-results[data-v-4a660eb2]{padding:var(--spacing-md);text-align:center;color:var(--text-light);font-size:.9rem}@media (max-width:768px){.option-item[data-v-4a660eb2]{min-height:44px;display:flex;align-items:center;padding:var(--spacing-md)}.search-input[data-v-4a660eb2]{min-height:40px}}
.form-stepper[data-v-bf006b3c]{display:flex;align-items:center;gap:var(--spacing-md)}.stepper-label[data-v-bf006b3c]{font-size:1rem;font-weight:600;color:var(--title-color);min-width:60px}.stepper-controls[data-v-bf006b3c]{display:flex;align-items:center;gap:var(--spacing-sm);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);padding:var(--spacing-xs)}.stepper-btn[data-v-bf006b3c]{width:32px;height:32px;border:1px solid var(--border-color);background:var(--button-bg);color:var(--text-color);border-radius:var(--radius-sm);font-size:1.2rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center;line-height:1}.stepper-btn[data-v-bf006b3c]:hover:not(:disabled){background:var(--button-hover);border-color:var(--accent-color);color:var(--accent-color)}.stepper-btn[data-v-bf006b3c]:active:not(:disabled){transform:scale(0.95)}.stepper-btn[data-v-bf006b3c]:disabled{opacity:.4;cursor:not-allowed;background:var(--border-color-light)}.stepper-btn.decrement[data-v-bf006b3c]:hover:not(:disabled){color:var(--error-color);border-color:var(--error-color)}.stepper-btn.increment[data-v-bf006b3c]:hover:not(:disabled){color:var(--success-color);border-color:var(--success-color)}.stepper-value[data-v-bf006b3c]{min-width:40px;text-align:center;font-weight:600;font-size:1.1rem;color:var(--text-color);-webkit-user-select:none;user-select:none}
.attribute-editor[data-v-e089f256]{width:100%;padding:var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md)}.attribute-editor.is-disabled[data-v-e089f256]{opacity:.6;pointer-events:none}.attribute-editor[data-v-e089f256] .label-icon{color:var(--accent-color)}.attribute-grid[data-v-e089f256]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:var(--spacing-md)}.attribute-item[data-v-e089f256]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.total-points[data-v-e089f256]{display:flex;justify-content:flex-end;align-items:center;margin-top:var(--spacing-md);padding-top:var(--spacing-sm);border-top:1px solid var(--border-color-light);font-size:.9rem}.total-points .total-label[data-v-e089f256]{color:var(--text-light)}.total-points .total-value[data-v-e089f256]{font-weight:700;color:var(--accent-color);margin-left:var(--spacing-xs)}
.equipment-editor[data-v-8ad64c50]{width:100%;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--input-bg);overflow:hidden}.equipment-editor.is-disabled[data-v-8ad64c50]{opacity:.6;pointer-events:none}.equipment-list[data-v-8ad64c50]{max-height:400px;overflow-y:auto;padding:var(--spacing-sm)}.equipment-list[data-v-8ad64c50]::-webkit-scrollbar{width:6px}.equipment-list[data-v-8ad64c50]::-webkit-scrollbar-track{background:var(--border-color-light);border-radius:3px}.equipment-list[data-v-8ad64c50]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.equipment-list[data-v-8ad64c50]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}.equipment-item[data-v-8ad64c50]{background:var(--card-bg);border:1px solid var(--border-color-light);border-radius:var(--radius-md);padding:var(--spacing-md);margin-bottom:var(--spacing-sm);transition:all var(--transition-fast)}.equipment-item[data-v-8ad64c50]:last-child{margin-bottom:0}.equipment-item[data-v-8ad64c50]:hover:not(.editing){border-color:var(--accent-color);box-shadow:var(--shadow-sm)}.equipment-item.editing[data-v-8ad64c50]{border-color:var(--accent-color);background:rgba(212,175,55,.05)}.item-header[data-v-8ad64c50]{display:flex;align-items:center;gap:var(--spacing-sm);margin-bottom:var(--spacing-xs)}.item-type[data-v-8ad64c50]{padding:2px 8px;background:var(--border-color-light);border-radius:var(--radius-sm);font-size:.75rem;color:var(--text-light)}.item-name[data-v-8ad64c50]{flex:1;font-size:1rem;font-weight:600;color:var(--title-color)}.item-rarity[data-v-8ad64c50]{padding:2px 10px;border-radius:var(--radius-sm);font-size:.75rem;font-weight:600;background:var(--rarity-color);color:#fff;text-shadow:0 1px 1px rgba(0,0,0,.2)}.item-effect[data-v-8ad64c50]{font-size:.9rem;color:var(--text-color);margin-bottom:var(--spacing-xs)}.item-effect .effect-label[data-v-8ad64c50]{color:var(--accent-color);font-weight:600}.item-tag[data-v-8ad64c50]{margin-bottom:var(--spacing-xs);display:flex;flex-wrap:wrap;gap:4px}.item-tag .tag-text[data-v-8ad64c50]{display:inline-flex;align-items:center;padding:2px 8px;background:rgba(212,175,55,.15);border:1px solid rgba(212,175,55,.3);border-radius:var(--radius-sm);font-size:.8rem;color:var(--accent-color)}.effect-list[data-v-8ad64c50]{margin-top:var(--spacing-xs);display:grid;gap:4px}.effect-row[data-v-8ad64c50]{display:grid;grid-template-columns:minmax(64px,max-content) 1fr;gap:var(--spacing-xs);font-size:.85rem;color:var(--text-color)}.effect-key[data-v-8ad64c50]{color:var(--text-light);font-weight:600}.effect-value[data-v-8ad64c50]{color:var(--text-color)}.item-description[data-v-8ad64c50]{font-size:.85rem;color:var(--text-light);font-style:italic;padding-top:var(--spacing-xs);border-top:1px dashed var(--border-color-light)}.item-actions[data-v-8ad64c50]{display:flex;gap:var(--spacing-sm);margin-top:var(--spacing-sm);padding-top:var(--spacing-sm);border-top:1px solid var(--border-color-light)}.item-actions i[data-v-8ad64c50]{margin-right:var(--spacing-xs)}.action-btn[data-v-8ad64c50]{padding:var(--spacing-xs) var(--spacing-md);border:1px solid var(--border-color);border-radius:var(--radius-sm);background:var(--card-bg);font-size:.8rem;cursor:pointer;transition:all var(--transition-fast)}.action-btn[data-v-8ad64c50]:hover:not(:disabled){border-color:var(--accent-color)}.action-btn[data-v-8ad64c50]:disabled{opacity:.5;cursor:not-allowed}.action-btn.delete[data-v-8ad64c50]:hover:not(:disabled){border-color:var(--error-color);color:var(--error-color);background:rgba(211,47,47,.05)}.edit-form[data-v-8ad64c50],.add-form[data-v-8ad64c50]{padding:var(--spacing-md)}.add-form[data-v-8ad64c50]{border-top:1px solid var(--border-color-light);background:rgba(212,175,55,.03)}.add-form-header[data-v-8ad64c50]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.add-form-header .form-title[data-v-8ad64c50]{font-weight:600;color:var(--title-color)}.add-form-header .close-btn[data-v-8ad64c50]{width:24px;height:24px;padding:0;border:none;background:none;cursor:pointer;font-size:.9rem;color:var(--text-light);transition:color var(--transition-fast)}.add-form-header .close-btn[data-v-8ad64c50]:hover{color:var(--error-color)}.form-row[data-v-8ad64c50]{margin-bottom:var(--spacing-sm)}.form-row.half[data-v-8ad64c50]{flex:1}.form-row-group[data-v-8ad64c50]{display:flex;gap:var(--spacing-md);margin-bottom:var(--spacing-sm)}.edit-actions[data-v-8ad64c50],.add-form-actions[data-v-8ad64c50]{display:flex;gap:var(--spacing-sm);margin-top:var(--spacing-md);justify-content:flex-end}.btn-cancel[data-v-8ad64c50],.btn-save[data-v-8ad64c50],.btn-add[data-v-8ad64c50]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--radius-md);font-size:.9rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.btn-cancel[data-v-8ad64c50]{background:var(--border-color-light);color:var(--text-color)}.btn-cancel[data-v-8ad64c50]:hover{background:var(--border-color)}.btn-save[data-v-8ad64c50],.btn-add[data-v-8ad64c50]{background:var(--accent-color);color:var(--primary-bg)}.btn-save[data-v-8ad64c50]:hover:not(:disabled),.btn-add[data-v-8ad64c50]:hover:not(:disabled){background:#c9a842}.btn-save[data-v-8ad64c50]:disabled,.btn-add[data-v-8ad64c50]:disabled{opacity:.5;cursor:not-allowed}.empty-state[data-v-8ad64c50]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--text-light);gap:var(--spacing-sm)}.empty-state .empty-icon[data-v-8ad64c50]{font-size:2rem;opacity:.6}.empty-state .empty-text[data-v-8ad64c50]{font-size:.9rem}.add-section[data-v-8ad64c50]{padding:var(--spacing-sm);border-top:1px solid var(--border-color-light)}.add-btn[data-v-8ad64c50]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);width:100%;padding:var(--spacing-md);background:rgba(212,175,55,.1);border:2px dashed var(--accent-color);border-radius:var(--radius-md);color:var(--accent-color);font-size:.95rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.add-btn[data-v-8ad64c50]:hover:not(:disabled){background:rgba(212,175,55,.2);border-style:solid}.add-btn[data-v-8ad64c50]:disabled{opacity:.5;cursor:not-allowed}.add-btn .add-icon[data-v-8ad64c50]{font-size:1.2rem;font-weight:700}.count-info[data-v-8ad64c50]{display:flex;align-items:center;justify-content:flex-end;padding:var(--spacing-xs) var(--spacing-sm);background:var(--border-color-light);font-size:.75rem;color:var(--text-light);gap:2px}.count-info .count-current[data-v-8ad64c50]{font-weight:700;color:var(--accent-color)}.count-info .count-max[data-v-8ad64c50]{font-weight:600}.equip-list-enter-active[data-v-8ad64c50],.equip-list-leave-active[data-v-8ad64c50]{transition:all .3s ease}.equip-list-enter-from[data-v-8ad64c50]{opacity:0;transform:translateY(-10px)}.equip-list-leave-to[data-v-8ad64c50]{opacity:0;transform:translateX(20px)}.equip-list-move[data-v-8ad64c50]{transition:transform .3s ease}@media (max-width:768px){.form-row-group[data-v-8ad64c50]{flex-direction:column;gap:var(--spacing-sm)}.item-header[data-v-8ad64c50]{flex-wrap:wrap}.item-actions[data-v-8ad64c50]{flex-wrap:wrap}}
.skill-editor[data-v-1821fd54]{width:100%;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--input-bg);overflow:hidden}.skill-editor.is-disabled[data-v-1821fd54]{opacity:.6;pointer-events:none}.skill-list[data-v-1821fd54]{max-height:400px;overflow-y:auto;padding:var(--spacing-sm)}.skill-list[data-v-1821fd54]::-webkit-scrollbar{width:6px}.skill-list[data-v-1821fd54]::-webkit-scrollbar-track{background:var(--border-color-light);border-radius:3px}.skill-list[data-v-1821fd54]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.skill-list[data-v-1821fd54]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}.skill-item[data-v-1821fd54]{background:var(--card-bg);border:1px solid var(--border-color-light);border-radius:var(--radius-md);padding:var(--spacing-md);margin-bottom:var(--spacing-sm);transition:all var(--transition-fast)}.skill-item[data-v-1821fd54]:last-child{margin-bottom:0}.skill-item[data-v-1821fd54]:hover:not(.editing){border-color:var(--accent-color);box-shadow:var(--shadow-sm)}.skill-item.editing[data-v-1821fd54]{border-color:var(--accent-color);background:rgba(212,175,55,.05)}.item-header[data-v-1821fd54]{display:flex;align-items:center;gap:var(--spacing-sm);margin-bottom:var(--spacing-xs)}.item-type[data-v-1821fd54]{padding:2px 8px;background:var(--border-color-light);border-radius:var(--radius-sm);font-size:.75rem;color:var(--text-light)}.item-name[data-v-1821fd54]{flex:1;font-size:1rem;font-weight:600;color:var(--title-color)}.item-rarity[data-v-1821fd54]{padding:2px 10px;border-radius:var(--radius-sm);font-size:.75rem;font-weight:600;background:var(--rarity-color);color:#fff;text-shadow:0 1px 1px rgba(0,0,0,.2)}.item-tag[data-v-1821fd54]{margin-bottom:var(--spacing-xs);display:flex;flex-wrap:wrap;gap:4px}.item-tag .tag-text[data-v-1821fd54]{display:inline-flex;align-items:center;padding:2px 8px;background:rgba(212,175,55,.15);border:1px solid rgba(212,175,55,.3);border-radius:var(--radius-sm);font-size:.8rem;color:var(--accent-color)}.item-consume[data-v-1821fd54]{font-size:.85rem;color:var(--text-color);margin-bottom:var(--spacing-xs)}.item-consume .consume-label[data-v-1821fd54]{color:#e91e63;font-weight:600}.item-consume .consume-text[data-v-1821fd54]{color:#c2185b}.item-effect[data-v-1821fd54]{font-size:.9rem;color:var(--text-color);margin-bottom:var(--spacing-xs);line-height:1.5}.item-effect .effect-label[data-v-1821fd54]{color:var(--accent-color);font-weight:600}.effect-list[data-v-1821fd54]{margin-top:var(--spacing-xs);display:grid;gap:4px}.effect-row[data-v-1821fd54]{display:grid;grid-template-columns:minmax(64px,max-content) 1fr;gap:var(--spacing-xs);font-size:.85rem;color:var(--text-color)}.effect-key[data-v-1821fd54]{color:var(--text-light);font-weight:600}.effect-value[data-v-1821fd54]{color:var(--text-color)}.item-description[data-v-1821fd54]{font-size:.85rem;color:var(--text-light);font-style:italic;padding-top:var(--spacing-xs);border-top:1px dashed var(--border-color-light)}.item-actions[data-v-1821fd54]{display:flex;gap:var(--spacing-sm);margin-top:var(--spacing-sm);padding-top:var(--spacing-sm);border-top:1px solid var(--border-color-light)}.item-actions i[data-v-1821fd54]{margin-right:var(--spacing-xs)}.action-btn[data-v-1821fd54]{padding:var(--spacing-xs) var(--spacing-md);border:1px solid var(--border-color);border-radius:var(--radius-sm);background:var(--card-bg);font-size:.8rem;cursor:pointer;transition:all var(--transition-fast)}.action-btn[data-v-1821fd54]:hover:not(:disabled){border-color:var(--accent-color)}.action-btn[data-v-1821fd54]:disabled{opacity:.5;cursor:not-allowed}.action-btn.delete[data-v-1821fd54]:hover:not(:disabled){border-color:var(--error-color);color:var(--error-color);background:rgba(211,47,47,.05)}.edit-form[data-v-1821fd54],.add-form[data-v-1821fd54]{padding:var(--spacing-md)}.add-form[data-v-1821fd54]{border-top:1px solid var(--border-color-light);background:rgba(212,175,55,.03)}.add-form-header[data-v-1821fd54]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.add-form-header .form-title[data-v-1821fd54]{font-weight:600;color:var(--title-color)}.add-form-header .close-btn[data-v-1821fd54]{width:24px;height:24px;padding:0;border:none;background:none;cursor:pointer;font-size:.9rem;color:var(--text-light);transition:color var(--transition-fast)}.add-form-header .close-btn[data-v-1821fd54]:hover{color:var(--error-color)}.form-row[data-v-1821fd54]{margin-bottom:var(--spacing-sm)}.form-row.half[data-v-1821fd54]{flex:1}.form-row-group[data-v-1821fd54]{display:flex;gap:var(--spacing-md);margin-bottom:var(--spacing-sm)}.edit-actions[data-v-1821fd54],.add-form-actions[data-v-1821fd54]{display:flex;gap:var(--spacing-sm);margin-top:var(--spacing-md);justify-content:flex-end}.btn-cancel[data-v-1821fd54],.btn-save[data-v-1821fd54],.btn-add[data-v-1821fd54]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--radius-md);font-size:.9rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.btn-cancel[data-v-1821fd54]{background:var(--border-color-light);color:var(--text-color)}.btn-cancel[data-v-1821fd54]:hover{background:var(--border-color)}.btn-save[data-v-1821fd54],.btn-add[data-v-1821fd54]{background:var(--accent-color);color:var(--primary-bg)}.btn-save[data-v-1821fd54]:hover:not(:disabled),.btn-add[data-v-1821fd54]:hover:not(:disabled){background:#c9a842}.btn-save[data-v-1821fd54]:disabled,.btn-add[data-v-1821fd54]:disabled{opacity:.5;cursor:not-allowed}.empty-state[data-v-1821fd54]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--text-light);gap:var(--spacing-sm)}.empty-state .empty-icon[data-v-1821fd54]{font-size:2rem;opacity:.6}.empty-state .empty-text[data-v-1821fd54]{font-size:.9rem}.add-section[data-v-1821fd54]{padding:var(--spacing-sm);border-top:1px solid var(--border-color-light)}.add-btn[data-v-1821fd54]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);width:100%;padding:var(--spacing-md);background:rgba(212,175,55,.1);border:2px dashed var(--accent-color);border-radius:var(--radius-md);color:var(--accent-color);font-size:.95rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.add-btn[data-v-1821fd54]:hover:not(:disabled){background:rgba(212,175,55,.2);border-style:solid}.add-btn[data-v-1821fd54]:disabled{opacity:.5;cursor:not-allowed}.add-btn .add-icon[data-v-1821fd54]{font-size:1.2rem;font-weight:700}.count-info[data-v-1821fd54]{display:flex;align-items:center;justify-content:flex-end;padding:var(--spacing-xs) var(--spacing-sm);background:var(--border-color-light);font-size:.75rem;color:var(--text-light);gap:2px}.count-info .count-current[data-v-1821fd54]{font-weight:700;color:var(--accent-color)}.count-info .count-max[data-v-1821fd54]{font-weight:600}.skill-list-enter-active[data-v-1821fd54],.skill-list-leave-active[data-v-1821fd54]{transition:all .3s ease}.skill-list-enter-from[data-v-1821fd54]{opacity:0;transform:translateY(-10px)}.skill-list-leave-to[data-v-1821fd54]{opacity:0;transform:translateX(20px)}.skill-list-move[data-v-1821fd54]{transition:transform .3s ease}@media (max-width:768px){.form-row-group[data-v-1821fd54]{flex-direction:column;gap:var(--spacing-sm)}.item-header[data-v-1821fd54]{flex-wrap:wrap}.item-actions[data-v-1821fd54]{flex-wrap:wrap}}
.custom-destined-form[data-v-01050429]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);overflow:hidden;transition:all var(--transition-normal)}.custom-destined-form:not(.expanded) .form-header[data-v-01050429]{border-bottom:none}.custom-destined-form .form-header[data-v-01050429]{padding:var(--spacing-md) var(--spacing-lg);background:linear-gradient(135deg,rgba(139,69,19,0.1) 0%,rgba(139,69,19,0.05) 100%);border-bottom:2px solid var(--border-color);cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;justify-content:space-between;align-items:center;transition:all var(--transition-fast)}.custom-destined-form .form-header[data-v-01050429]:hover{background:linear-gradient(135deg,rgba(139,69,19,0.15) 0%,rgba(139,69,19,0.08) 100%)}.custom-destined-form .form-header .header-left[data-v-01050429]{flex:1}.custom-destined-form .form-header .form-title[data-v-01050429]{font-size:1.1rem;margin:0 0 var(--spacing-xs) 0;color:var(--title-color);font-weight:700}.custom-destined-form .form-header .form-desc[data-v-01050429]{font-size:.85rem;color:var(--text-light)}.custom-destined-form .form-header .toggle-icon[data-v-01050429]{font-size:.9rem;color:var(--text-light);transition:transform var(--transition-fast);margin-left:var(--spacing-md)}.custom-destined-form .form-header .toggle-icon.rotated[data-v-01050429]{transform:rotate(180deg)}.custom-destined-form .form-body[data-v-01050429]{padding:var(--spacing-lg);max-height:70vh;overflow-y:auto}.custom-destined-form .form-row[data-v-01050429]{margin-bottom:var(--spacing-md)}.custom-destined-form .form-row[data-v-01050429]:last-child{margin-bottom:0}.custom-destined-form .level-buttons[data-v-01050429]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:var(--spacing-xs)}.custom-destined-form .level-btn[data-v-01050429]{padding:var(--spacing-sm) var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast);font-size:.85rem;color:var(--text-color);white-space:nowrap}.custom-destined-form .level-btn[data-v-01050429]:hover{border-color:var(--accent-color);background:rgba(212,175,55,.1)}.custom-destined-form .level-btn.active[data-v-01050429]{background:var(--accent-color);border-color:var(--accent-color);color:var(--primary-bg);font-weight:600;box-shadow:0 2px 4px rgba(212,175,55,.3)}.custom-destined-form .cost-info[data-v-01050429]{margin-top:var(--spacing-xs);font-size:.85rem;color:var(--text-light)}.custom-destined-form .cost-info .cost-value[data-v-01050429]{font-size:1rem;font-weight:700;color:var(--accent-color);font-family:var(--font-mono);margin:0 var(--spacing-xs)}.custom-destined-form .form-actions[data-v-01050429]{display:flex;gap:var(--spacing-md);margin-top:var(--spacing-lg);padding-top:var(--spacing-md);border-top:1px solid var(--border-color)}.custom-destined-form .btn-reset[data-v-01050429],.custom-destined-form .btn-submit[data-v-01050429],.custom-destined-form .btn-cancel[data-v-01050429]{flex:1;padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--radius-md);cursor:pointer;font-size:.9rem;font-weight:600;transition:all var(--transition-fast)}.custom-destined-form .btn-reset[data-v-01050429]{background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color)}.custom-destined-form .btn-reset[data-v-01050429]:hover{background:var(--card-bg);border-color:var(--border-color-strong)}.custom-destined-form .btn-cancel[data-v-01050429]{background:var(--border-color);color:var(--text-color)}.custom-destined-form .btn-cancel[data-v-01050429]:hover{background:var(--border-color-strong)}.custom-destined-form .btn-submit[data-v-01050429]{background:var(--accent-color);color:var(--primary-bg)}.custom-destined-form .btn-submit[data-v-01050429]:hover:not(:disabled){background:#c9a842;transform:translateY(-1px);box-shadow:var(--shadow-sm)}.custom-destined-form .btn-submit[data-v-01050429]:disabled{opacity:.5;cursor:not-allowed}.custom-destined-form .field-hint[data-v-01050429]{margin-top:var(--spacing-xs);font-size:.8rem;color:var(--text-light);font-style:italic}@media (max-width:768px){.custom-destined-form .form-header[data-v-01050429]{padding:var(--spacing-sm) var(--spacing-md)}.custom-destined-form .form-header .header-left .form-title[data-v-01050429]{font-size:1rem}.custom-destined-form .form-header .header-left .form-desc[data-v-01050429]{font-size:.8rem}.custom-destined-form .form-header .toggle-icon[data-v-01050429]{font-size:.85rem}.custom-destined-form .form-body[data-v-01050429]{padding:var(--spacing-md);max-height:60vh}.custom-destined-form .form-row[data-v-01050429]{margin-bottom:var(--spacing-sm)}.custom-destined-form .level-buttons[data-v-01050429]{grid-template-columns:repeat(2,1fr)}.custom-destined-form .level-btn[data-v-01050429]{padding:6px var(--spacing-sm);font-size:.8rem}.custom-destined-form .form-actions[data-v-01050429]{flex-direction:column;gap:var(--spacing-sm)}}
.exchange-card[data-v-c35365ee]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);padding:var(--spacing-md)}.exchange-card--gold[data-v-c35365ee]{--exchange-accent:#d4af37;--exchange-accent-strong:#b8941f;--exchange-surface-start:rgba(212,175,55,0.1);--exchange-surface-end:rgba(212,175,55,0.05);--exchange-border:rgba(212,175,55,0.3);--exchange-secondary-start:#caa336;--exchange-secondary-end:#a57f1a}.exchange-card--violet[data-v-c35365ee]{--exchange-accent:#9c27b0;--exchange-accent-strong:#7b1fa2;--exchange-surface-start:rgba(156,39,176,0.1);--exchange-surface-end:rgba(156,39,176,0.05);--exchange-border:rgba(156,39,176,0.3);--exchange-secondary-start:#d4af37;--exchange-secondary-end:#b8941f}.exchange-header[data-v-c35365ee]{display:flex;align-items:center;gap:var(--spacing-xs);margin-bottom:var(--spacing-md);padding-bottom:var(--spacing-sm);border-bottom:1px solid var(--border-color)}.exchange-header .exchange-icon[data-v-c35365ee]{font-size:1.2rem;color:var(--exchange-accent)}.exchange-header .exchange-title[data-v-c35365ee]{font-size:1rem;font-weight:600;color:var(--title-color)}.exchange-header .exchange-rate[data-v-c35365ee]{font-size:.85rem;color:var(--text-light)}.exchange-body[data-v-c35365ee]{display:flex;align-items:center;gap:var(--spacing-md)}.exchange-body .current-display[data-v-c35365ee]{display:flex;align-items:baseline;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(135deg,var(--exchange-surface-start) 0%,var(--exchange-surface-end) 100%);border:1px solid var(--exchange-border);border-radius:var(--radius-md);white-space:nowrap}.exchange-body .current-display .label[data-v-c35365ee]{font-size:.9rem;color:var(--text-light)}.exchange-body .current-display .value[data-v-c35365ee]{font-size:1.2rem;font-weight:700;color:var(--exchange-accent);font-family:var(--font-mono);min-width:40px;text-align:right}.exchange-body .current-display .unit[data-v-c35365ee]{font-size:.85rem;color:var(--text-light)}.exchange-body .exchange-controls[data-v-c35365ee]{display:flex;align-items:center;gap:var(--spacing-sm);flex:1}.exchange-body .exchange-controls .exchange-input[data-v-c35365ee]{width:150px}.exchange-body .exchange-controls .exchange-button[data-v-c35365ee],.exchange-body .exchange-controls .exchange-all-button[data-v-c35365ee]{padding:var(--spacing-sm) var(--spacing-lg);background:linear-gradient(135deg,var(--exchange-accent) 0%,var(--exchange-accent-strong) 100%);color:var(--primary-bg);border:none;border-radius:var(--radius-md);font-size:.9rem;font-weight:600;cursor:pointer;transition:var(--transition-normal);white-space:nowrap}.exchange-body .exchange-controls .exchange-button[data-v-c35365ee]:hover:not(:disabled),.exchange-body .exchange-controls .exchange-all-button[data-v-c35365ee]:hover:not(:disabled){transform:translateY(-1px);box-shadow:var(--shadow-sm)}.exchange-body .exchange-controls .exchange-button[data-v-c35365ee]:active:not(:disabled),.exchange-body .exchange-controls .exchange-all-button[data-v-c35365ee]:active:not(:disabled){transform:translateY(0)}.exchange-body .exchange-controls .exchange-button[data-v-c35365ee]:disabled,.exchange-body .exchange-controls .exchange-all-button[data-v-c35365ee]:disabled{opacity:.5;cursor:not-allowed;background:var(--border-color-light);color:var(--text-light)}.exchange-body .exchange-controls .exchange-button[data-v-c35365ee]:disabled:hover,.exchange-body .exchange-controls .exchange-all-button[data-v-c35365ee]:disabled:hover{transform:none;box-shadow:none}.exchange-body .exchange-controls .exchange-all-button[data-v-c35365ee]{background:linear-gradient(135deg,var(--exchange-secondary-start) 0%,var(--exchange-secondary-end) 100%)}.exchange-body .exchange-controls .exchange-reset-icon[data-v-c35365ee]{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--radius-sm);border:1px solid var(--border-color);background:rgba(0,0,0,0);color:var(--text-light);cursor:pointer;transition:var(--transition-fast)}.exchange-body .exchange-controls .exchange-reset-icon[data-v-c35365ee]:hover:not(:disabled){color:var(--exchange-accent-strong);border-color:var(--exchange-accent-strong)}.exchange-body .exchange-controls .exchange-reset-icon[data-v-c35365ee]:disabled{opacity:.4;cursor:not-allowed}@media (max-width:768px){.exchange-body[data-v-c35365ee]{flex-direction:column;align-items:stretch}.exchange-body .current-display[data-v-c35365ee]{justify-content:space-between}.exchange-body .exchange-controls[data-v-c35365ee]{flex-wrap:wrap}.exchange-body .exchange-controls .exchange-input[data-v-c35365ee]{flex:1}.exchange-body .exchange-controls .exchange-button[data-v-c35365ee],.exchange-body .exchange-controls .exchange-all-button[data-v-c35365ee],.exchange-body .exchange-controls .exchange-reset-icon[data-v-c35365ee]{flex-shrink:0}}
.level-tabs[data-v-18f949f6]{display:flex;gap:var(--spacing-md);padding:var(--spacing-md) 0}.level-tab[data-v-18f949f6]{flex:1;padding:var(--spacing-md) var(--spacing-lg);background:var(--input-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);cursor:pointer;transition:all var(--transition-fast);text-align:center;font-size:1.1rem;font-weight:600;color:var(--title-color)}.level-tab[data-v-18f949f6]:hover{border-color:var(--accent-color);background:rgba(212,175,55,.1);transform:translateY(-2px)}.level-tab.active[data-v-18f949f6]{background:var(--accent-color);border-color:var(--accent-color);box-shadow:var(--shadow-md);color:var(--primary-bg)}@media (max-width:768px){.level-tabs[data-v-18f949f6]{gap:var(--spacing-sm)}.level-tab[data-v-18f949f6]{padding:var(--spacing-sm) var(--spacing-md);font-size:.95rem}}
.destined-one-list[data-v-253614da]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:var(--spacing-lg);padding:var(--spacing-md)}.empty-message[data-v-253614da]{grid-column:1/-1;text-align:center;padding:var(--spacing-2xl);color:var(--text-light);font-size:1.1rem}.destined-one-card[data-v-253614da]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);padding:var(--spacing-md);cursor:pointer;transition:all var(--transition-fast)}.destined-one-card[data-v-253614da]:hover:not(.disabled){transform:translateY(-2px);box-shadow:var(--shadow-md);border-color:var(--accent-color)}.destined-one-card.selected[data-v-253614da]{border-color:var(--accent-color);background:rgba(212,175,55,.15);box-shadow:var(--shadow-md)}.destined-one-card.disabled[data-v-253614da]{opacity:.5;cursor:not-allowed}.destined-one-card.expanded .card-body[data-v-253614da]{max-height:10000px;opacity:1}.card-header[data-v-253614da]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm);padding-bottom:var(--spacing-sm);border-bottom:2px solid var(--border-color)}.card-header .item-name[data-v-253614da]{font-size:1.2rem;color:var(--title-color);margin:0;flex:1}.card-header .header-actions[data-v-253614da]{display:flex;align-items:center;gap:var(--spacing-sm)}.card-header .item-cost[data-v-253614da]{font-weight:600;color:var(--accent-color);font-size:1rem}.card-header .expand-btn[data-v-253614da]{padding:2px var(--spacing-sm);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-sm);cursor:pointer;font-size:.8rem;color:var(--text-color);transition:all var(--transition-fast)}.card-header .expand-btn[data-v-253614da]:hover{background:var(--accent-color);color:var(--primary-bg);border-color:var(--accent-color)}.card-summary[data-v-253614da]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-xs);margin-bottom:var(--spacing-sm)}.card-summary .summary-row[data-v-253614da]{display:flex;gap:var(--spacing-xs);font-size:.85rem}.card-summary .summary-row .label[data-v-253614da]{color:var(--text-light);white-space:nowrap}.card-summary .summary-row .value[data-v-253614da]{color:var(--text-color);font-weight:500}.card-body[data-v-253614da]{display:flex;flex-direction:column;gap:var(--spacing-md);max-height:0;opacity:0;overflow:hidden;transition:all var(--transition-normal)}.info-section[data-v-253614da]{padding:var(--spacing-sm) 0;border-bottom:1px solid var(--border-color-light)}.info-section[data-v-253614da]:last-child{border-bottom:none}.info-row[data-v-253614da]{display:grid;grid-template-columns:auto 1fr;gap:var(--spacing-sm);font-size:.9rem;line-height:1.6;margin-bottom:var(--spacing-xs)}.info-row .label[data-v-253614da]{color:var(--text-light);font-weight:500;white-space:nowrap}.info-row .value[data-v-253614da]{color:var(--text-color);word-break:break-word}.info-block[data-v-253614da]{margin-bottom:var(--spacing-sm)}.info-block[data-v-253614da]:last-child{margin-bottom:0}.block-title[data-v-253614da]{font-weight:600;color:var(--title-color);margin-bottom:var(--spacing-xs);font-size:.95rem}.block-content[data-v-253614da]{color:var(--text-color);line-height:1.6;font-size:.85rem}.attributes[data-v-253614da]{display:grid;grid-template-columns:repeat(auto-fit,minmax(70px,1fr));gap:var(--spacing-xs)}.attr-item[data-v-253614da]{display:flex;align-items:center;gap:var(--spacing-xs);padding:4px var(--spacing-xs);background:rgba(212,175,55,.05);border-radius:var(--radius-sm)}.attr-item .attr-label[data-v-253614da]{color:var(--text-light);font-size:.8rem}.attr-item .attr-value[data-v-253614da]{color:var(--accent-color);font-weight:600;font-size:.85rem}.equipment-list[data-v-253614da],.skills-list[data-v-253614da]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.equipment-item[data-v-253614da],.skill-item[data-v-253614da]{padding:var(--spacing-sm);background:rgba(0,0,0,.02);border-left:3px solid var(--accent-color);border-radius:var(--radius-sm)}.equip-name[data-v-253614da],.skill-name[data-v-253614da]{font-weight:600;color:var(--title-color);margin-bottom:var(--spacing-xs);font-size:.9rem}.equip-info[data-v-253614da],.skill-tag[data-v-253614da],.skill-consume[data-v-253614da]{font-size:.8rem;color:var(--text-light);margin-bottom:var(--spacing-xs);display:flex;flex-wrap:wrap;gap:4px}.effect-inline[data-v-253614da]{padding:2px 6px;background:rgba(212,175,55,.12);border-radius:var(--radius-sm);font-size:.75rem;color:var(--text-color)}.equip-desc[data-v-253614da],.skill-effect[data-v-253614da],.skill-desc[data-v-253614da]{font-size:.8rem;color:var(--text-color);line-height:1.5;margin-bottom:var(--spacing-xs)}.equip-desc[data-v-253614da]:last-child,.skill-effect[data-v-253614da]:last-child,.skill-desc[data-v-253614da]:last-child{margin-bottom:0}.skill-header[data-v-253614da]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-xs)}.skill-header .skill-type[data-v-253614da]{font-size:.75rem;padding:2px var(--spacing-xs);background:var(--accent-color);color:var(--primary-bg);border-radius:var(--radius-sm)}.stairway-content[data-v-253614da]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.stairway-section[data-v-253614da]{padding:var(--spacing-xs);background:rgba(0,0,0,.02);border-radius:var(--radius-sm)}.stairway-label[data-v-253614da]{font-weight:600;color:var(--title-color);margin-bottom:var(--spacing-xs);font-size:.85rem}.stairway-item[data-v-253614da]{font-size:.8rem;color:var(--text-color);margin-bottom:var(--spacing-xs);line-height:1.5}.stairway-item[data-v-253614da]:last-child{margin-bottom:0}.stairway-desc[data-v-253614da]{font-size:.8rem;color:var(--text-light);line-height:1.5;margin-top:var(--spacing-xs)}.comment[data-v-253614da]{margin-top:var(--spacing-sm);padding:var(--spacing-sm);background:rgba(212,175,55,.1);border-left:3px solid var(--accent-color);border-radius:var(--radius-sm);font-style:italic;color:var(--text-color);font-size:.85rem;line-height:1.6}@media (max-width:768px){.destined-one-list[data-v-253614da]{grid-template-columns:1fr;gap:var(--spacing-md);padding:var(--spacing-sm)}.destined-one-card[data-v-253614da]{padding:var(--spacing-sm)}.card-header[data-v-253614da]{flex-wrap:wrap;gap:var(--spacing-xs)}.card-header .item-name[data-v-253614da]{font-size:1.1rem;flex-basis:100%}.card-header .header-actions[data-v-253614da]{flex-basis:100%;justify-content:space-between}.card-header .item-cost[data-v-253614da]{font-size:.9rem}.card-summary[data-v-253614da]{grid-template-columns:1fr}.attributes[data-v-253614da]{grid-template-columns:repeat(2,1fr)}}
.background-page[data-v-2e7bfa8a]{display:flex;flex-direction:column;gap:var(--spacing-xl);max-width:1600px;margin:0 auto;padding:var(--spacing-md)}.section-title[data-v-2e7bfa8a]{font-size:1.5rem;color:var(--title-color);margin:0 0 var(--spacing-md) 0;padding-bottom:var(--spacing-sm);border-bottom:2px solid var(--border-color)}.destined-ones-section[data-v-2e7bfa8a]{display:flex;flex-direction:column}.destined-ones-section .section-title[data-v-2e7bfa8a]{margin-bottom:0}.destined-ones-content[data-v-2e7bfa8a]{max-height:600px;overflow-y:auto;border:2px solid var(--border-color);border-radius:var(--radius-lg);background:var(--input-bg)}.destined-ones-content[data-v-2e7bfa8a]::-webkit-scrollbar{width:10px}.destined-ones-content[data-v-2e7bfa8a]::-webkit-scrollbar-track{background:var(--input-bg);border-radius:var(--radius-md)}.destined-ones-content[data-v-2e7bfa8a]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:var(--radius-md)}.destined-ones-content[data-v-2e7bfa8a]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}.background-section[data-v-2e7bfa8a]{display:flex;flex-direction:column}.summary-section[data-v-2e7bfa8a]{position:sticky;bottom:0}.summary-card[data-v-2e7bfa8a]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);padding:var(--spacing-md)}.summary-header[data-v-2e7bfa8a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md);padding-bottom:var(--spacing-sm);border-bottom:1px solid var(--border-color)}.summary-title-row[data-v-2e7bfa8a]{display:flex;align-items:center;gap:var(--spacing-md)}.summary-title[data-v-2e7bfa8a]{font-size:1.2rem;color:var(--title-color);margin:0}.points-info[data-v-2e7bfa8a]{display:flex;align-items:baseline;gap:var(--spacing-xs);font-size:1rem;font-weight:600}.points-info .points-value[data-v-2e7bfa8a]{color:var(--accent-color);font-size:1.2rem}.points-info .points-value.insufficient[data-v-2e7bfa8a]{color:var(--error-color)}.points-info .points-separator[data-v-2e7bfa8a]{color:var(--text-light);font-size:1rem}.points-info .points-total[data-v-2e7bfa8a]{color:var(--text-light);font-size:1rem}.clear-btn[data-v-2e7bfa8a]{padding:var(--spacing-xs) var(--spacing-md);background:var(--error-color);color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;font-size:.9rem;font-weight:500;transition:all var(--transition-fast)}.clear-btn[data-v-2e7bfa8a]:hover{background:#b71c1c;transform:translateY(-1px)}.clear-btn[data-v-2e7bfa8a]:active{transform:translateY(0)}.summary-content[data-v-2e7bfa8a]{display:flex;flex-direction:column;gap:var(--spacing-md)}.summary-group[data-v-2e7bfa8a]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.summary-label[data-v-2e7bfa8a]{font-weight:600;color:var(--title-color);font-size:.95rem}.summary-items[data-v-2e7bfa8a]{display:flex;flex-wrap:wrap;gap:var(--spacing-sm)}.summary-item[data-v-2e7bfa8a]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-xs) var(--spacing-sm);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.85rem;transition:all var(--transition-fast)}.summary-item.full[data-v-2e7bfa8a]{flex:1 1 100%}.summary-item.is-custom[data-v-2e7bfa8a]{cursor:pointer;border-style:dashed}.summary-item.is-custom[data-v-2e7bfa8a]:hover{border-color:#43a047;box-shadow:0 0 0 1px rgba(67,160,71,.2)}.summary-item .item-name[data-v-2e7bfa8a]{display:inline-flex;align-items:center;gap:var(--spacing-xs);color:var(--text-color)}.summary-item .item-name .name-text[data-v-2e7bfa8a]{max-width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.summary-item .item-name .custom-tag[data-v-2e7bfa8a]{display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:var(--radius-sm);background:rgba(76,175,80,.15);color:#43a047;font-size:.75rem;font-weight:600}.summary-item .item-name .custom-tag i[data-v-2e7bfa8a]{font-size:.7rem}.summary-item .item-cost[data-v-2e7bfa8a]{color:var(--accent-color);font-weight:600}.summary-item .remove-btn[data-v-2e7bfa8a]{width:20px;height:20px;display:flex;align-items:center;justify-content:center;background:var(--error-color);color:#fff;border:none;border-radius:50%;cursor:pointer;font-size:.65rem;margin-left:auto}.summary-item .remove-btn[data-v-2e7bfa8a]:hover{background:#b71c1c}.empty-state[data-v-2e7bfa8a]{text-align:center;padding:var(--spacing-2xl);color:var(--text-light);font-size:.95rem}@media (max-width:768px){.background-page[data-v-2e7bfa8a]{gap:var(--spacing-md);padding:var(--spacing-sm)}.section-title[data-v-2e7bfa8a]{font-size:1.3rem}.destined-ones-content[data-v-2e7bfa8a]{max-height:500px}.summary-section[data-v-2e7bfa8a]{position:static}.summary-items[data-v-2e7bfa8a]{flex-direction:column}.summary-item[data-v-2e7bfa8a]{justify-content:space-between}}@media (max-width:480px){.section-title[data-v-2e7bfa8a]{font-size:1.1rem}.summary-header[data-v-2e7bfa8a]{flex-wrap:wrap;gap:var(--spacing-sm)}.summary-title-row[data-v-2e7bfa8a]{flex-direction:column;align-items:flex-start;gap:var(--spacing-xs);flex:1 1 100%}.clear-btn[data-v-2e7bfa8a]{width:100%}}
.form-row[data-v-1d72dcf1]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-lg);margin-bottom:var(--spacing-lg)}.form-row.full-width[data-v-1d72dcf1]{grid-template-columns:1fr}.form-field[data-v-1d72dcf1]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.form-field label[data-v-1d72dcf1]{font-weight:600;color:var(--accent-color);font-size:1rem;display:flex;align-items:center;gap:var(--spacing-xs);letter-spacing:.5px}.form-field label.required[data-v-1d72dcf1]::after{content:"*";color:#ff6b6b;font-weight:bold;margin-left:2px}.level-input-group[data-v-1d72dcf1]{display:flex;align-items:center;gap:var(--spacing-md)}.level-input-group .number-input-wrapper[data-v-1d72dcf1]{flex:1}.level-input-group .level-indicator[data-v-1d72dcf1]{padding:var(--spacing-sm) var(--spacing-md);background:var(--card-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);color:var(--accent-color);font-weight:600;font-size:.9rem;white-space:nowrap}.attributes-panel[data-v-1d72dcf1]{margin:var(--spacing-2xl) 0 0}.attributes-panel .panel-header[data-v-1d72dcf1]{padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--spacing-sm)}.attributes-panel .panel-header h3[data-v-1d72dcf1]{margin:0;color:var(--title-color);font-size:1.2rem;font-weight:700}.attributes-panel .panel-header .points-summary[data-v-1d72dcf1]{display:flex;align-items:center;gap:var(--spacing-md);flex-wrap:wrap}.attributes-panel .panel-header .points-badge[data-v-1d72dcf1]{font-size:.9rem;color:var(--text-color);padding:var(--spacing-xs) var(--spacing-sm);background:var(--primary-bg);border:1px solid var(--border-color);border-radius:var(--radius-sm)}.attributes-panel .panel-header .points-badge strong[data-v-1d72dcf1]{color:var(--accent-color);font-size:1.1rem}.attributes-panel .panel-header .points-badge strong.error[data-v-1d72dcf1]{color:var(--error-color)}.attributes-panel .panel-header .points-badge strong.success[data-v-1d72dcf1]{color:var(--success-color)}.attributes-panel .panel-header .points-badge .points-hint[data-v-1d72dcf1]{font-size:.75rem;opacity:.7}.attributes-panel .panel-content[data-v-1d72dcf1]{padding:var(--spacing-lg)}.attributes-panel .mobile-label[data-v-1d72dcf1]{display:none}.attributes-panel .attr-table-header[data-v-1d72dcf1]{display:grid;grid-template-columns:50px auto 40px auto 50px;gap:var(--spacing-md);align-items:center;padding:var(--spacing-xs) var(--spacing-sm);margin-bottom:var(--spacing-sm);font-size:.8rem;font-weight:600;color:var(--text-color-secondary);border-bottom:1px solid var(--border-color);text-align:center}.attributes-panel .attr-table-header .col-name[data-v-1d72dcf1]{text-align:left}.attributes-panel .attr-table-header .col-result[data-v-1d72dcf1]{text-align:right}.attributes-panel .attr-row[data-v-1d72dcf1]{display:grid;grid-template-columns:50px auto 40px auto 50px;gap:var(--spacing-md);align-items:center;padding:var(--spacing-sm);border-bottom:1px solid var(--border-color-light,rgba(255,255,255,0.05));transition:background var(--transition-fast)}.attributes-panel .attr-row[data-v-1d72dcf1]:hover{background:var(--primary-bg)}.attributes-panel .attr-row[data-v-1d72dcf1]:last-of-type{border-bottom:none}.attributes-panel .attr-row .col-name[data-v-1d72dcf1]{font-weight:600;color:var(--title-color);font-size:1rem}.attributes-panel .attr-row .col-base[data-v-1d72dcf1],.attributes-panel .attr-row .col-extra[data-v-1d72dcf1]{display:flex;justify-content:center}.attributes-panel .attr-row .col-tier[data-v-1d72dcf1]{display:flex;justify-content:center;align-items:center}.attributes-panel .attr-row .tier-value[data-v-1d72dcf1]{font-weight:600;color:var(--text-color-secondary);font-size:1rem}.attributes-panel .attr-row .col-result[data-v-1d72dcf1]{display:flex;justify-content:flex-end;align-items:center}.attributes-panel .attr-row .final-value[data-v-1d72dcf1]{font-weight:700;font-size:1.1rem;color:var(--accent-color)}.attributes-panel .attr-row[data-v-1d72dcf1] .form-stepper .stepper-label{display:none}.attributes-panel .attr-table-header[data-v-1d72dcf1]:not(:has(+.attr-row .col-extra)),.attributes-panel .attr-row[data-v-1d72dcf1]:not(:has(.col-extra)){grid-template-columns:50px auto 40px 50px}.attributes-panel .status-message[data-v-1d72dcf1]{padding:var(--spacing-md);border-radius:var(--radius-md);text-align:center;font-weight:600;font-size:1rem;border:1px solid;margin-top:var(--spacing-md)}.attributes-panel .status-message .sep[data-v-1d72dcf1]{margin:0 var(--spacing-xs);opacity:.5}.attributes-panel .status-message.error[data-v-1d72dcf1]{background:rgba(211,47,47,.1);color:var(--error-color);border-color:var(--error-color)}.attributes-panel .status-message.success[data-v-1d72dcf1]{background:rgba(56,142,60,.1);color:var(--success-color);border-color:var(--success-color)}.attributes-panel .status-message.info[data-v-1d72dcf1]{background:rgba(212,175,55,.1);color:var(--accent-color);border-color:var(--accent-color)}@media (max-width:768px){.form-row[data-v-1d72dcf1]{grid-template-columns:1fr}.form-row.full-width[data-v-1d72dcf1]{grid-template-columns:1fr}.level-input-group[data-v-1d72dcf1]{flex-direction:column;align-items:stretch}.location-field .location-options[data-v-1d72dcf1]{max-height:300px}.location-field .location-option .location-label[data-v-1d72dcf1]{font-size:.85rem}.attributes-panel .panel-header[data-v-1d72dcf1]{flex-direction:column;align-items:stretch}.attributes-panel .attr-table-header[data-v-1d72dcf1]{display:none}.attributes-panel .mobile-label[data-v-1d72dcf1]{display:block;font-size:.75rem;font-weight:600;color:var(--text-color-secondary);margin-bottom:var(--spacing-xs)}.attributes-panel .attr-row[data-v-1d72dcf1]{grid-template-columns:1fr 1fr;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-sm)}.attributes-panel .attr-row .col-name[data-v-1d72dcf1]{grid-column:1/-1;font-size:1.1rem;padding-bottom:var(--spacing-xs);border-bottom:1px solid var(--border-color-light,rgba(255,255,255,0.05))}.attributes-panel .attr-row .col-base[data-v-1d72dcf1],.attributes-panel .attr-row .col-extra[data-v-1d72dcf1],.attributes-panel .attr-row .col-tier[data-v-1d72dcf1],.attributes-panel .attr-row .col-result[data-v-1d72dcf1]{flex-direction:column;align-items:flex-start}.attributes-panel .attr-row .col-result[data-v-1d72dcf1]{align-items:flex-end}.attributes-panel .attr-row[data-v-1d72dcf1]:not(:has(.col-extra)){grid-template-columns:1fr auto 1fr}.attributes-panel .attr-row:not(:has(.col-extra)) .col-result[data-v-1d72dcf1]{align-items:flex-end}}
.confirm-page[data-v-22222b1f]{max-width:900px;margin:0 auto}.confirm-panel[data-v-22222b1f]{overflow:hidden}.panel-header[data-v-22222b1f]{text-align:center;padding:var(--spacing-lg);background:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,rgba(212,175,55,0.05) 100%);border-bottom:2px solid var(--border-color)}.panel-header .panel-title[data-v-22222b1f]{font-size:1.6rem;color:var(--title-color);margin:0 0 var(--spacing-xs) 0;font-weight:700}.panel-header .panel-subtitle[data-v-22222b1f]{font-size:.95rem;color:var(--text-light);margin:0}.panel-content[data-v-22222b1f]{padding:var(--spacing-lg)}.points-section[data-v-22222b1f]{background:linear-gradient(135deg,rgba(212,175,55,0.05) 0%,rgba(212,175,55,0.02) 100%);border:2px solid var(--border-color);border-radius:var(--radius-md);padding:var(--spacing-md) !important;margin-bottom:var(--spacing-lg) !important}.points-grid[data-v-22222b1f]{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--spacing-md)}.points-grid .point-item[data-v-22222b1f]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm);background:var(--card-bg);border-radius:var(--radius-md)}.points-grid .point-item.destiny[data-v-22222b1f]{background:linear-gradient(135deg,rgba(156,39,176,0.1) 0%,rgba(156,39,176,0.05) 100%)}.points-grid .point-item .point-label[data-v-22222b1f]{font-size:.85rem;color:var(--text-light);font-weight:500}.points-grid .point-item .point-value[data-v-22222b1f]{font-size:1.5rem;font-weight:700;font-family:var(--font-mono);color:var(--text-color)}.points-grid .point-item .point-value.gold[data-v-22222b1f]{color:var(--accent-color)}.points-grid .point-item .point-value.purple[data-v-22222b1f]{color:#9c27b0}.points-grid .point-item .point-value.positive[data-v-22222b1f]{color:var(--success-color)}.points-grid .point-item .point-value.negative[data-v-22222b1f]{color:var(--error-color)}.doc-section[data-v-22222b1f]{padding:var(--spacing-lg) 0}.doc-section[data-v-22222b1f]:last-child{border-bottom:none;padding-bottom:0}.doc-section[data-v-22222b1f]:first-child{padding-top:0}.section-title[data-v-22222b1f]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:1.2rem;color:var(--title-color);margin:0 0 var(--spacing-md) 0;font-weight:700}.section-title i[data-v-22222b1f]{color:var(--accent-color)}.doc-text[data-v-22222b1f]{line-height:1.8;color:var(--text-color)}.doc-text p[data-v-22222b1f]{margin:0 0 var(--spacing-sm) 0}.doc-text p[data-v-22222b1f]:last-child{margin-bottom:0}.doc-text p strong[data-v-22222b1f]{color:var(--text-light);font-weight:600}.doc-text.attributes[data-v-22222b1f]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-sm) var(--spacing-lg)}.doc-text.attributes .attr-detail[data-v-22222b1f]{font-family:var(--font-mono);color:var(--accent-color);font-weight:700;font-size:1.1em}.item-entry[data-v-22222b1f],.destined-entry[data-v-22222b1f]{margin-bottom:var(--spacing-lg);padding-bottom:var(--spacing-lg);border-bottom:1px dashed var(--border-color-light)}.item-entry[data-v-22222b1f]:last-child,.destined-entry[data-v-22222b1f]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.item-entry .item-title[data-v-22222b1f],.destined-entry .item-title[data-v-22222b1f]{font-size:1.05rem;margin-bottom:var(--spacing-xs) !important}.item-entry .item-title .item-quantity[data-v-22222b1f],.destined-entry .item-title .item-quantity[data-v-22222b1f]{font-size:.9rem;color:#4caf50;font-weight:600;margin-left:var(--spacing-xs)}.item-entry .item-title .item-cost[data-v-22222b1f],.destined-entry .item-title .item-cost[data-v-22222b1f]{font-size:.9rem;color:var(--accent-color);font-weight:600;font-family:var(--font-mono);margin-left:var(--spacing-xs)}.item-entry .item-meta[data-v-22222b1f],.destined-entry .item-meta[data-v-22222b1f]{font-size:.9rem;color:var(--text-light);margin-bottom:var(--spacing-xs) !important}.item-entry .item-desc[data-v-22222b1f],.destined-entry .item-desc[data-v-22222b1f]{margin-bottom:var(--spacing-xs) !important}.item-entry .effect-inline[data-v-22222b1f],.destined-entry .effect-inline[data-v-22222b1f]{display:block;margin-left:12px;margin-top:4px;padding:2px 6px;background:rgba(212,175,55,.12);border-radius:var(--radius-sm);font-size:.85rem}.item-entry .item-flavor[data-v-22222b1f],.destined-entry .item-flavor[data-v-22222b1f]{font-size:.9rem;color:var(--text-light);font-style:italic}.item-entry .sub-list[data-v-22222b1f],.destined-entry .sub-list[data-v-22222b1f]{margin-top:var(--spacing-sm);padding-left:var(--spacing-md)}.item-entry .sub-list p[data-v-22222b1f],.destined-entry .sub-list p[data-v-22222b1f]{margin-bottom:4px !important}.item-entry .sub-list p strong[data-v-22222b1f],.destined-entry .sub-list p strong[data-v-22222b1f]{color:var(--text-color)}.item-entry .sub-list .sub-item[data-v-22222b1f],.destined-entry .sub-list .sub-item[data-v-22222b1f]{font-size:.95rem;color:var(--text-light)}.background-story[data-v-22222b1f],.background-desc[data-v-22222b1f]{white-space:pre-wrap;line-height:1.8}.empty-text[data-v-22222b1f]{text-align:center;padding:var(--spacing-lg);color:var(--text-light);font-style:italic}.final-notice[data-v-22222b1f]{margin-top:var(--spacing-lg)}.final-notice .notice[data-v-22222b1f]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs);padding:var(--spacing-md);border-radius:var(--radius-md);font-size:.95rem;font-weight:600;text-align:center}.final-notice .notice.warning[data-v-22222b1f]{background:rgba(244,67,54,.1);color:var(--error-color);border:2px solid var(--error-color)}.final-notice .notice.info[data-v-22222b1f]{background:rgba(33,150,243,.1);color:#2196f3;border:2px solid #2196f3}@media (max-width:768px){.panel-header[data-v-22222b1f]{padding:var(--spacing-md)}.panel-header .panel-title[data-v-22222b1f]{font-size:1.3rem}.panel-content[data-v-22222b1f]{padding:var(--spacing-md)}.points-grid[data-v-22222b1f]{grid-template-columns:repeat(2,1fr)}.doc-text.attributes[data-v-22222b1f]{grid-template-columns:1fr}.item-entry[data-v-22222b1f],.destined-entry[data-v-22222b1f]{margin-bottom:var(--spacing-md);padding-bottom:var(--spacing-md)}}
.category-tabs[data-v-53e67b8a]{display:flex;gap:var(--spacing-sm);padding:var(--spacing-sm);background:var(--card-bg);border-radius:var(--radius-lg);border:1px solid var(--border-color);margin-bottom:var(--spacing-lg)}.tab-button[data-v-53e67b8a]{flex:1;display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-normal);font-size:.9rem;font-weight:600;color:var(--text-color)}.tab-button[data-v-53e67b8a]:hover{border-color:var(--accent-color);background:rgba(212,175,55,.1)}.tab-button.active[data-v-53e67b8a]{background:var(--accent-color);border-color:var(--accent-color);color:var(--primary-bg)}.tab-button.active .tab-icon[data-v-53e67b8a]{transform:scale(1.1)}.tab-button .tab-icon[data-v-53e67b8a]{font-size:1.2rem;transition:transform var(--transition-normal)}.tab-button .tab-label[data-v-53e67b8a]{font-family:var(--font-title);font-size:.9rem}@media (max-width:768px){.category-tabs[data-v-53e67b8a]{gap:var(--spacing-sm);padding:var(--spacing-sm)}.tab-button[data-v-53e67b8a]{flex-direction:column;padding:var(--spacing-sm);gap:var(--spacing-xs)}.tab-button .tab-icon[data-v-53e67b8a]{font-size:1.2rem}.tab-button .tab-label[data-v-53e67b8a]{font-size:.85rem}}
.custom-item-form[data-v-59c411bc]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);overflow:hidden;transition:all var(--transition-normal)}.custom-item-form:not(.expanded) .form-header[data-v-59c411bc]{border-bottom:none}.custom-item-form .form-header[data-v-59c411bc]{padding:var(--spacing-md) var(--spacing-lg);background:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,rgba(212,175,55,0.05) 100%);border-bottom:2px solid var(--border-color);cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;justify-content:space-between;align-items:center;transition:all var(--transition-fast)}.custom-item-form .form-header[data-v-59c411bc]:hover{background:linear-gradient(135deg,rgba(212,175,55,0.15) 0%,rgba(212,175,55,0.08) 100%)}.custom-item-form .form-header .header-left[data-v-59c411bc]{flex:1}.custom-item-form .form-header .form-title[data-v-59c411bc]{font-size:1.1rem;margin:0 0 var(--spacing-xs) 0;color:var(--title-color);font-weight:700}.custom-item-form .form-header .form-desc[data-v-59c411bc]{font-size:.85rem;color:var(--text-light)}.custom-item-form .form-header .toggle-icon[data-v-59c411bc]{font-size:.9rem;color:var(--text-light);transition:transform var(--transition-fast);margin-left:var(--spacing-md)}.custom-item-form .form-header .toggle-icon.rotated[data-v-59c411bc]{transform:rotate(180deg)}.custom-item-form .form-body[data-v-59c411bc]{padding:var(--spacing-lg)}.custom-item-form .form-row[data-v-59c411bc]{margin-bottom:var(--spacing-md)}.custom-item-form .form-row[data-v-59c411bc]:last-child{margin-bottom:0}.custom-item-form .category-buttons[data-v-59c411bc],.custom-item-form .rarity-buttons[data-v-59c411bc]{display:flex;gap:var(--spacing-xs);flex-wrap:wrap}.custom-item-form .category-btn[data-v-59c411bc]{padding:var(--spacing-sm) var(--spacing-lg);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast);font-size:.9rem;color:var(--text-color)}.custom-item-form .category-btn[data-v-59c411bc]:hover{border-color:var(--accent-color);background:rgba(212,175,55,.1)}.custom-item-form .category-btn.active[data-v-59c411bc]{background:var(--accent-color);border-color:var(--accent-color);color:var(--primary-bg);font-weight:600;box-shadow:0 2px 4px rgba(212,175,55,.3)}.custom-item-form .category-btn.disabled[data-v-59c411bc]{opacity:.6;cursor:not-allowed;border-style:dashed;background:var(--input-bg)}.custom-item-form .rarity-btn[data-v-59c411bc]{padding:4px var(--spacing-sm);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-sm);cursor:pointer;transition:all var(--transition-fast);font-size:.85rem;color:var(--text-color)}.custom-item-form .rarity-btn[data-v-59c411bc]:hover{border-color:var(--rarity-color);color:var(--rarity-color)}.custom-item-form .rarity-btn.active[data-v-59c411bc]{background:var(--rarity-color);border-color:var(--rarity-color);color:#fff;font-weight:600;box-shadow:0 2px 4px rgba(0,0,0,.2)}.custom-item-form .cost-info[data-v-59c411bc]{margin-top:var(--spacing-xs);font-size:.85rem;color:var(--text-light)}.custom-item-form .cost-info .cost-value[data-v-59c411bc]{font-size:1rem;font-weight:700;color:var(--accent-color);font-family:var(--font-mono);margin:0 var(--spacing-xs)}.custom-item-form .cost-info .cost-range[data-v-59c411bc]{font-size:.8rem;color:var(--text-light)}.custom-item-form .form-actions[data-v-59c411bc]{display:flex;gap:var(--spacing-md);margin-top:var(--spacing-lg);padding-top:var(--spacing-md);border-top:1px solid var(--border-color)}.custom-item-form .btn-reset[data-v-59c411bc],.custom-item-form .btn-submit[data-v-59c411bc],.custom-item-form .btn-cancel[data-v-59c411bc]{flex:1;padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--radius-md);cursor:pointer;font-size:.9rem;font-weight:600;transition:all var(--transition-fast)}.custom-item-form .btn-reset[data-v-59c411bc]{background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color)}.custom-item-form .btn-reset[data-v-59c411bc]:hover{background:var(--card-bg);border-color:var(--border-color-strong)}.custom-item-form .btn-cancel[data-v-59c411bc]{background:var(--border-color);color:var(--text-color)}.custom-item-form .btn-cancel[data-v-59c411bc]:hover{background:var(--border-color-strong)}.custom-item-form .btn-submit[data-v-59c411bc]{background:var(--accent-color);color:var(--primary-bg)}.custom-item-form .btn-submit[data-v-59c411bc]:hover:not(:disabled){background:#c9a842;transform:translateY(-1px);box-shadow:var(--shadow-sm)}.custom-item-form .btn-submit[data-v-59c411bc]:disabled{opacity:.5;cursor:not-allowed}@media (max-width:768px){.custom-item-form .form-header[data-v-59c411bc]{padding:var(--spacing-sm) var(--spacing-md)}.custom-item-form .form-header .header-left .form-title[data-v-59c411bc]{font-size:1rem}.custom-item-form .form-header .header-left .form-desc[data-v-59c411bc]{font-size:.8rem}.custom-item-form .form-header .toggle-icon[data-v-59c411bc]{font-size:.85rem}.custom-item-form .form-body[data-v-59c411bc]{padding:var(--spacing-md)}.custom-item-form .form-row[data-v-59c411bc]{margin-bottom:var(--spacing-sm)}.custom-item-form .category-buttons[data-v-59c411bc],.custom-item-form .rarity-buttons[data-v-59c411bc]{gap:4px}.custom-item-form .category-btn[data-v-59c411bc]{padding:6px var(--spacing-sm);font-size:.85rem}.custom-item-form .rarity-btn[data-v-59c411bc]{padding:3px var(--spacing-xs);font-size:.8rem}.custom-item-form .form-actions[data-v-59c411bc]{flex-direction:column;gap:var(--spacing-sm)}}
.item-card[data-v-6ed91820]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);padding:var(--spacing-md);cursor:pointer;transition:all var(--transition-normal);position:relative;overflow:hidden}.item-card[data-v-6ed91820]::before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:var(--rarity-color);opacity:.6}.item-card[data-v-6ed91820]:hover:not(.is-disabled){border-color:var(--accent-color);box-shadow:var(--shadow-md);transform:translateY(-2px)}.item-card.is-selected[data-v-6ed91820]{border-color:var(--accent-color);background:linear-gradient(to bottom,var(--card-bg),rgba(212,175,55,0.05));box-shadow:0 0 0 2px rgba(212,175,55,.2)}.item-card.is-selected[data-v-6ed91820]::before{height:4px;opacity:1}.item-card.is-disabled[data-v-6ed91820]{opacity:.5;cursor:not-allowed}.card-header[data-v-6ed91820]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm);padding-bottom:var(--spacing-sm);border-bottom:1px solid var(--border-color-light)}.card-header .item-name[data-v-6ed91820]{font-size:1.1rem;font-weight:700;color:var(--title-color)}.card-header .item-rarity[data-v-6ed91820]{font-size:.9rem;font-weight:600;padding:2px 8px;border-radius:var(--radius-sm);background:rgba(0,0,0,.1)}.card-body[data-v-6ed91820]{margin-bottom:var(--spacing-md)}.card-body .item-info[data-v-6ed91820]{display:flex;gap:var(--spacing-xs);margin-bottom:var(--spacing-xs);font-size:.9rem}.card-body .item-info .info-label[data-v-6ed91820]{color:var(--text-light);font-weight:600;min-width:50px}.card-body .item-info .info-value[data-v-6ed91820]{color:var(--text-color);flex:1}.card-body .item-info .info-value.quantity[data-v-6ed91820]{font-family:monospace;font-size:.9rem;font-weight:600;color:#4caf50}.card-body .item-info .info-value.consume[data-v-6ed91820]{font-family:monospace;font-size:.85rem;color:#2196f3}.card-body .item-info .tag-list[data-v-6ed91820]{display:flex;flex-wrap:wrap;gap:6px;align-items:center}.card-body .item-info .tag-chip[data-v-6ed91820]{padding:2px 8px;font-size:.8rem;border-radius:999px;background:rgba(212,175,55,.15);color:var(--accent-color);border:1px solid rgba(212,175,55,.35);font-family:var(--font-mono)}.card-body .item-effect[data-v-6ed91820]{margin:var(--spacing-sm) 0;padding:var(--spacing-sm);background:rgba(212,175,55,.05);border-left:3px solid var(--accent-color);border-radius:var(--radius-sm)}.card-body .item-effect .effect-label[data-v-6ed91820]{font-size:.9rem;font-weight:600;color:var(--accent-color);margin-bottom:var(--spacing-xs)}.card-body .item-effect .effect-grid[data-v-6ed91820]{display:grid;grid-template-columns:minmax(80px,120px) 1fr;gap:6px 12px;font-size:.85rem;color:var(--text-color)}.card-body .item-effect .effect-row[data-v-6ed91820]{display:contents}.card-body .item-effect .effect-key[data-v-6ed91820]{color:var(--text-light);font-weight:600}.card-body .item-effect .effect-value[data-v-6ed91820]{color:var(--text-color)}.card-body .item-description[data-v-6ed91820]{margin-top:var(--spacing-sm);font-size:.85rem;line-height:1.6;color:var(--text-light);font-style:italic}.card-footer[data-v-6ed91820]{display:flex;justify-content:space-between;align-items:center;padding-top:var(--spacing-sm);border-top:1px solid var(--border-color-light)}.card-footer .item-cost[data-v-6ed91820]{display:flex;gap:var(--spacing-xs);align-items:center}.card-footer .item-cost .cost-label[data-v-6ed91820]{font-size:.9rem;color:var(--text-light)}.card-footer .item-cost .cost-value[data-v-6ed91820]{font-size:1.1rem;font-weight:700;color:var(--accent-color)}.card-footer .selected-badge[data-v-6ed91820]{padding:4px 12px;background:var(--accent-color);color:var(--primary-bg);border-radius:var(--radius-md);font-size:.85rem;font-weight:600}@media (max-width:768px){.item-card[data-v-6ed91820]{padding:var(--spacing-sm)}.card-header .item-name[data-v-6ed91820]{font-size:1rem}.card-header .item-rarity[data-v-6ed91820]{font-size:.8rem}.card-body .item-info[data-v-6ed91820]{font-size:.85rem}.card-body .item-effect .effect-label[data-v-6ed91820]{font-size:.85rem}.card-body .item-effect .effect-grid[data-v-6ed91820]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.card-body .item-effect .effect-row[data-v-6ed91820]{display:flex;flex-direction:column;gap:2px;padding-left:var(--spacing-xs);border-left:2px solid var(--accent-color)}.card-body .item-effect .effect-key[data-v-6ed91820]{font-size:.85rem;color:var(--accent-color)}.card-body .item-effect .effect-value[data-v-6ed91820]{font-size:.8rem;line-height:1.5}.card-body .item-description[data-v-6ed91820]{font-size:.8rem}.card-footer .item-cost .cost-label[data-v-6ed91820]{font-size:.85rem}.card-footer .item-cost .cost-value[data-v-6ed91820]{font-size:1rem}.card-footer .selected-badge[data-v-6ed91820]{font-size:.8rem;padding:3px 10px}}
.item-list[data-v-0cb1e7b4]{min-height:400px}.empty-state[data-v-0cb1e7b4]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-2xl);min-height:400px}.empty-state .empty-icon[data-v-0cb1e7b4]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state .empty-text[data-v-0cb1e7b4]{font-size:1.1rem;color:var(--text-light);font-style:italic}.item-grid[data-v-0cb1e7b4]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:var(--spacing-lg);padding:var(--spacing-md)}@media (max-width:1200px){.item-grid[data-v-0cb1e7b4]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:var(--spacing-md)}}@media (max-width:768px){.item-grid[data-v-0cb1e7b4]{grid-template-columns:1fr;gap:var(--spacing-md);padding:var(--spacing-sm)}.empty-state[data-v-0cb1e7b4]{padding:var(--spacing-xl);min-height:300px}.empty-state .empty-icon[data-v-0cb1e7b4]{font-size:3rem}.empty-state .empty-text[data-v-0cb1e7b4]{font-size:1rem}}
.rarity-filter[data-v-4102fea8]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-sm) var(--spacing-xs);background:var(--card-bg);flex-wrap:wrap}.rarity-filter .filter-label[data-v-4102fea8]{font-size:.9rem;font-weight:600;color:var(--text-color);white-space:nowrap}.rarity-filter .filter-buttons[data-v-4102fea8]{display:flex;gap:var(--spacing-xs);flex-wrap:wrap;flex:1}.rarity-filter .filter-btn[data-v-4102fea8]{padding:4px var(--spacing-sm);background:var(--card-bg);border:1px solid var(--border-color);border-radius:var(--radius-sm);cursor:pointer;transition:all var(--transition-fast);font-size:.85rem;color:var(--text-color);white-space:nowrap}.rarity-filter .filter-btn[data-v-4102fea8]:hover{border-color:var(--rarity-color);background:var(--card-bg);color:var(--rarity-color);transform:translateY(-1px)}.rarity-filter .filter-btn.active[data-v-4102fea8]{background:var(--rarity-color);border-color:var(--rarity-color);color:#fff;font-weight:600;box-shadow:0 2px 4px rgba(0,0,0,.2)}@media (max-width:768px){.rarity-filter[data-v-4102fea8]{padding:var(--spacing-xs) var(--spacing-sm);gap:var(--spacing-sm)}.rarity-filter .filter-label[data-v-4102fea8]{font-size:.85rem}.rarity-filter .filter-buttons[data-v-4102fea8]{gap:4px}.rarity-filter .filter-btn[data-v-4102fea8]{font-size:.8rem;padding:3px var(--spacing-xs)}}@media (max-width:480px){.rarity-filter[data-v-4102fea8]{flex-direction:column;align-items:flex-start;gap:var(--spacing-xs)}.rarity-filter .filter-label[data-v-4102fea8]{font-size:.8rem}.rarity-filter .filter-buttons[data-v-4102fea8]{width:100%;justify-content:flex-start}.rarity-filter .filter-btn[data-v-4102fea8]{font-size:.75rem;padding:2px 6px}}
.selected-panel[data-v-68795a6e]{background:var(--card-bg);border:2px solid var(--border-color);border-radius:var(--radius-lg);display:flex;flex-direction:column;height:100%}.selected-panel .panel-header[data-v-68795a6e]{padding:var(--spacing-md);border-bottom:2px solid var(--border-color);display:flex;flex-direction:column;gap:var(--spacing-xs)}.selected-panel .panel-header .header-top[data-v-68795a6e]{display:flex;justify-content:space-between;align-items:center}.selected-panel .panel-header .title[data-v-68795a6e]{font-size:1.1rem;margin:0;color:var(--title-color);font-weight:700}.selected-panel .panel-header .count-badge[data-v-68795a6e]{display:flex;align-items:center;justify-content:center;min-width:32px;height:32px;padding:0 var(--spacing-sm);background:var(--accent-color);color:var(--primary-bg);border-radius:50%;font-weight:700;font-size:1rem}.selected-panel .panel-header .points-info[data-v-68795a6e]{display:flex;align-items:baseline;gap:var(--spacing-xs);font-size:.9rem}.selected-panel .panel-header .points-info .points-label[data-v-68795a6e]{color:var(--text-light);font-weight:500}.selected-panel .panel-header .points-info .points-value[data-v-68795a6e]{font-size:1.1rem;font-weight:700;color:var(--accent-color);font-family:var(--font-mono)}.selected-panel .panel-header .points-info .points-value.negative[data-v-68795a6e]{color:var(--error-color)}.selected-panel .panel-header .points-info .points-total[data-v-68795a6e]{color:var(--text-light);font-family:var(--font-mono)}.selected-panel .panel-header .points-info .points-consumed[data-v-68795a6e]{color:var(--text-light);font-size:.85rem}.selected-panel .panel-body[data-v-68795a6e]{flex:1;align-content:center;overflow-y:auto;padding:var(--spacing-lg)}.selected-panel .panel-body .section[data-v-68795a6e]{margin-bottom:var(--spacing-lg)}.selected-panel .panel-body .section[data-v-68795a6e]:last-child{margin-bottom:0}.selected-panel .panel-body .section .section-title[data-v-68795a6e]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:1rem;font-weight:600;color:var(--title-color);margin-bottom:var(--spacing-sm);padding-bottom:var(--spacing-xs);border-bottom:1px solid var(--border-color-light)}.selected-panel .panel-body .section .section-title .section-label[data-v-68795a6e]{display:inline-flex;align-items:center;gap:var(--spacing-xs)}.selected-panel .panel-body .section .section-title .section-label i[data-v-68795a6e]{font-size:1rem;color:var(--accent-color)}.selected-panel .panel-body .section .section-title .count[data-v-68795a6e]{font-size:.9rem;color:var(--text-light)}.selected-panel .panel-body .section .item-list[data-v-68795a6e]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.selected-panel .panel-body .section .selected-item[data-v-68795a6e]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm);background:var(--input-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);transition:all var(--transition-fast)}.selected-panel .panel-body .section .selected-item[data-v-68795a6e]:hover{border-color:var(--accent-color);box-shadow:var(--shadow-sm)}.selected-panel .panel-body .section .selected-item .item-info[data-v-68795a6e]{flex:1;min-width:0}.selected-panel .panel-body .section .selected-item .item-info .item-name[data-v-68795a6e]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.9rem;font-weight:600;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.selected-panel .panel-body .section .selected-item .item-info .item-name .name-text[data-v-68795a6e]{min-width:0;overflow:hidden;text-overflow:ellipsis}.selected-panel .panel-body .section .selected-item .item-info .item-name .item-quantity[data-v-68795a6e]{margin-left:var(--spacing-xs);font-size:.85rem;font-weight:500;color:#4caf50}.selected-panel .panel-body .section .selected-item .item-info .item-name .custom-tag[data-v-68795a6e]{flex:none;display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:var(--radius-sm);background:rgba(76,175,80,.15);color:#43a047;font-size:.75rem;font-weight:600}.selected-panel .panel-body .section .selected-item .item-info .item-name .custom-tag i[data-v-68795a6e]{font-size:.7rem}.selected-panel .panel-body .section .selected-item .item-info .item-cost[data-v-68795a6e]{font-size:.85rem;color:var(--accent-color);font-family:var(--font-mono);margin-top:2px}.selected-panel .panel-body .section .selected-item.is-custom[data-v-68795a6e]{cursor:pointer;border-style:dashed}.selected-panel .panel-body .section .selected-item.is-custom[data-v-68795a6e]:hover{border-color:#43a047;box-shadow:0 0 0 1px rgba(67,160,71,.2)}.selected-panel .panel-body .section .selected-item .remove-btn[data-v-68795a6e]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:var(--error-color);color:#fff;border:none;border-radius:50%;cursor:pointer;margin-left:var(--spacing-sm);font-size:.75rem}.selected-panel .panel-body .section .selected-item .remove-btn[data-v-68795a6e]:hover{background:#b71c1c}.selected-panel .panel-body .empty-state[data-v-68795a6e]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-2xl) var(--spacing-lg);text-align:center}.selected-panel .panel-body .empty-state .empty-icon[data-v-68795a6e]{font-size:3rem;margin-bottom:var(--spacing-md);opacity:.5}.selected-panel .panel-body .empty-state .empty-text[data-v-68795a6e]{font-size:.95rem;color:var(--text-light);font-style:italic}.selected-panel .panel-footer[data-v-68795a6e]{padding:var(--spacing-lg);border-top:2px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-md)}.selected-panel .panel-footer .total-info[data-v-68795a6e]{display:flex;align-items:center;gap:var(--spacing-xs)}.selected-panel .panel-footer .total-info .label[data-v-68795a6e]{font-size:.95rem;color:var(--text-light)}.selected-panel .panel-footer .total-info .value[data-v-68795a6e]{font-size:1.2rem;font-weight:700;color:var(--accent-color);font-family:var(--font-mono)}.selected-panel .panel-footer .clear-btn[data-v-68795a6e]{padding:var(--spacing-sm) var(--spacing-lg);background:var(--error-color);color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;font-size:.9rem;font-weight:600;transition:all var(--transition-fast)}.selected-panel .panel-footer .clear-btn[data-v-68795a6e]:hover{background:#b71c1c;transform:translateY(-1px);box-shadow:var(--shadow-sm)}.panel-body[data-v-68795a6e]::-webkit-scrollbar{width:8px}.panel-body[data-v-68795a6e]::-webkit-scrollbar-track{background:var(--input-bg);border-radius:var(--radius-md)}.panel-body[data-v-68795a6e]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:var(--radius-md)}.panel-body[data-v-68795a6e]::-webkit-scrollbar-thumb:hover{background:var(--border-color-strong)}@media (max-width:768px){.selected-panel[data-v-68795a6e]{max-height:none}.selected-panel .panel-header[data-v-68795a6e]{padding:var(--spacing-md)}.selected-panel .panel-header .title[data-v-68795a6e]{font-size:1.1rem}.selected-panel .panel-header .count-badge[data-v-68795a6e]{min-width:28px;height:28px;font-size:.9rem}.selected-panel .panel-body[data-v-68795a6e]{padding:var(--spacing-md)}.selected-panel .panel-body .section .section-title[data-v-68795a6e]{font-size:.95rem}.selected-panel .panel-body .section .selected-item[data-v-68795a6e]{padding:var(--spacing-xs) var(--spacing-sm)}.selected-panel .panel-body .section .selected-item .item-info .item-name[data-v-68795a6e]{font-size:.85rem}.selected-panel .panel-body .section .selected-item .item-info .item-cost[data-v-68795a6e]{font-size:.8rem}.selected-panel .panel-body .section .selected-item .remove-btn[data-v-68795a6e]{width:24px;height:24px}.selected-panel .panel-body .empty-state[data-v-68795a6e]{padding:var(--spacing-xl) var(--spacing-md)}.selected-panel .panel-body .empty-state .empty-icon[data-v-68795a6e]{font-size:2.5rem}.selected-panel .panel-body .empty-state .empty-text[data-v-68795a6e]{font-size:.9rem}.selected-panel .panel-footer[data-v-68795a6e]{padding:var(--spacing-md);flex-direction:column;align-items:stretch}.selected-panel .panel-footer .total-info[data-v-68795a6e]{justify-content:center}.selected-panel .panel-footer .total-info .label[data-v-68795a6e]{font-size:.9rem}.selected-panel .panel-footer .total-info .value[data-v-68795a6e]{font-size:1.1rem}.selected-panel .panel-footer .clear-btn[data-v-68795a6e]{width:100%;font-size:.85rem}}
.selections-container[data-v-5acd2d02]{display:flex;flex-direction:column;gap:var(--spacing-xl);max-width:1600px;margin:0 auto}.selection-area[data-v-5acd2d02]{display:flex;flex-direction:column}.custom-area[data-v-5acd2d02]{display:flex;flex-direction:column;gap:var(--spacing-md)}.summary-area[data-v-5acd2d02]{height:600px;min-height:300px}@media (max-width:768px){.selections-container[data-v-5acd2d02]{gap:var(--spacing-md)}.summary-area[data-v-5acd2d02]{height:auto;max-height:none}}
</style></head><body><div id="app"></div></body>